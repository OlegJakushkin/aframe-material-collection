!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e){t.exports=AFRAME},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){}static isFirstOrLastChange(){let t=!0;for(let e in this.changesDetected){t=!1;break}this.is_changeing||t?this.is_changeing&&t&&this.is_changeing&&(this.scene.emit("ui-changing-stopped"),this.is_changeing=!1):(this.scene.emit("ui-changing"),this.is_changeing=!0)}static preventDefault(t){t.detail&&t.detail.preventDefault&&"function"==typeof t.detail.preventDefault&&t.detail.preventDefault()}static shorten(t,e){return t.length>e?t.substr(0,e)+"...":t}static isChanging(t,e){if(this.changesDetected[e])this.changesDetected[e].t=(new Date).getTime();else{this.scene=this.scene||t;let i=(new Date).getTime();this.changesDetected[e]={t:i,e:(new Error).stack},this.isFirstOrLastChange()}}static stoppedChanging(t){delete this.changesDetected[t],this.isFirstOrLastChange()}static clearObject(t){t.traverse(t=>{if(t.material)if(t.material.length)for(let e=0;e<t.material.length;e++)t.material[e].map&&t.material[e].map.dispose(),t.material[e].dispose();else t.material.map&&t.material.map.dispose(),t.material.dispose();t.geometry&&t.geometry.dispose()})}}s.changesDetected={},s.is_changeing=!1,e.Utils=s},function(t,e){t.exports=THREE},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(3));t.exports=AFRAME.registerComponent("ui-yoga",{schema:{alignContent:{default:"flex-start"},alignItems:{default:"auto"},alignSelf:{default:"auto"},display:{default:"default"},flex:{type:"number",default:1},flexDirection:{default:"row"},flexWrap:{default:"default"},aspectRatio:{default:"default"},overflow:{default:"default"},justifyContent:{default:"start"},border:{type:"int",default:0},borderLeft:{type:"int",default:0},borderRight:{type:"int",default:0},borderTop:{type:"int",default:0},borderBottom:{type:"int",default:0},padding:{type:"int",default:0},paddingLeft:{type:"int",default:0},paddingRight:{type:"int",default:0},paddingTop:{type:"int",default:0},paddingBottom:{type:"int",default:0},margin:{type:"int",default:0},marginLeft:{type:"int",default:0},marginRight:{type:"int",default:0},marginTop:{type:"int",default:0},marginBottom:{type:"int",default:0},marginAuto:{type:"boolean",default:!1},marginAutoLeft:{type:"boolean",default:!1},marginAutoRight:{type:"boolean",default:!1},marginAutoTop:{type:"boolean",default:!1},marginAutoBottom:{type:"boolean",default:!1},marginPercent:{type:"number",default:0},marginPercentLeft:{type:"int",default:0},marginPercentRight:{type:"int",default:0},marginPercentTop:{type:"int",default:0},marginPercentBottom:{type:"int",default:0},flexBasis:{default:"default"},flexBasisPercent:{type:"number",default:0},flexGrow:{type:"number",default:0},flexShrink:{type:"number",default:1},maxHeight:{default:"default"},minHeight:{default:"default"},maxWidth:{default:"default"},minWidth:{default:"default"},maxHeightPercent:{default:"default"},minHeightPercent:{default:"default"},maxWidthPercent:{default:"default"},minWidthPercent:{default:"default"},position:{default:"default"},positionLeft:{type:"int",default:0},positionRight:{type:"int",default:0},positionTop:{type:"int",default:0},positionBottom:{type:"int",default:0},positionPercent:{default:"default"},positionPercentLeft:{type:"int",default:0},positionPercentRight:{type:"int",default:0},positionPercentTop:{type:"int",default:0},positionPercentBottom:{type:"int",default:0},width:{default:"default"},height:{default:"default"},widthAuto:{type:"boolean",default:!1},heightAuto:{type:"boolean",default:!1},widthPercent:{default:"default"},heightPercent:{default:"default"}},init(){this.el.getYogaProperties=this.getProperties.bind(this),this.setProperties()},updateSchema(){this.setProperties()},setProperties(){this.properties=this.properties||[],this.properties.length=0;for(let t in this.data)if(this.data.hasOwnProperty(t)&&"default"!==this.data[t]&&this.data[t]){this.mapPropertyToEnum(t)&&this.properties.push({method:"set"+t.charAt(0).toUpperCase()+t.substr(1),value:this.mapPropertyToEnum(t)})}},getProperties(){let t={};for(let e=0;e<this.properties.length;e++)t[this.properties[e].method]=this.properties[e];return t},mapPropertyToEnum(t){switch(!0){case t.indexOf("align")>-1:return this.enums.align[this.data[t]];case t.indexOf("Edge")>-1:return this.enums.edge[this.data[t]];case"flexDirection"===t:case"flexWrap"===t:case"positionType"===t:case"overflow"===t:case"display"===t:case"justifyContent"===t:return this.enums[t][this.data[t]];default:return this.data[t]}},enums:{align:{count:s.default.ALIGN_COUNT,auto:s.default.ALIGN_AUTO,"flex-start":s.default.ALIGN_FLEX_START,center:s.default.ALIGN_CENTER,"flex-end":s.default.ALIGN_FLEX_END,stretch:s.default.ALIGN_STRETCH,baseline:s.default.ALIGN_BASELINE,"space-between":s.default.ALIGN_SPACE_BETWEEN,"space-around":s.default.ALIGN_SPACE_AROUND},dimension:{count:s.default.DIMENSION_COUNT,width:s.default.DIMENSION_WIDTH,height:s.default.DIMENSION_HEIGHT},direction:{count:s.default.DIRECTION_COUNT,inherit:s.default.DIRECTION_INHERIT,ltr:s.default.DIRECTION_LTR,rtl:s.default.DIRECTION_RTL},display:{count:s.default.DISPLAY_COUNT,flex:s.default.DISPLAY_FLEX,none:s.default.DISPLAY_NONE},edge:{count:s.default.EDGE_COUNT,left:s.default.EDGE_LEFT,top:s.default.EDGE_TOP,right:s.default.EDGE_RIGHT,bottom:s.default.EDGE_BOTTOM,start:s.default.EDGE_START,end:s.default.EDGE_END,horizontal:s.default.EDGE_HORIZONTAL,vertical:s.default.EDGE_VERTICAL,all:s.default.EDGE_ALL},experimental:{count:s.default.EXPERIMENTAL_FEATURE_COUNT,"flex-basis":s.default.EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS},flexDirection:{count:s.default.FLEX_DIRECTION_COUNT,column:s.default.FLEX_DIRECTION_COLUMN,"column-reverse":s.default.FLEX_DIRECTION_COLUMN_REVERSE,row:s.default.FLEX_DIRECTION_ROW,reverse:s.default.FLEX_DIRECTION_ROW_REVERSE},justifyContent:{count:s.default.JUSTIFY_COUNT,start:s.default.JUSTIFY_FLEX_START,center:s.default.JUSTIFY_CENTER,end:s.default.JUSTIFY_FLEX_END,between:s.default.JUSTIFY_SPACE_BETWEEN,around:s.default.JUSTIFY_SPACE_AROUND,evenly:s.default.JUSTIFY_SPACE_EVENLY},logLevel:{count:s.default.LOG_LEVEL_COUNT,error:s.default.LOG_LEVEL_ERROR,warn:s.default.LOG_LEVEL_WARN,info:s.default.LOG_LEVEL_INFO,debug:s.default.LOG_LEVEL_DEBUG,verbose:s.default.LOG_LEVEL_VERBOSE,fatal:s.default.LOG_LEVEL_FATAL},measureMode:{count:s.default.MEASURE_MODE_COUNT,undefined:s.default.MEASURE_MODE_UNDEFINED,exactly:s.default.MEASURE_MODE_EXACTLY,"at-most":s.default.MEASURE_MODE_AT_MOST},nodeType:{count:s.default.NODE_TYPE_COUNT,default:s.default.NODE_TYPE_DEFAULT,text:s.default.NODE_TYPE_TEXT},overflow:{count:s.default.OVERFLOW_COUNT,visible:s.default.OVERFLOW_VISIBLE,hidden:s.default.OVERFLOW_HIDDEN,scroll:s.default.OVERFLOW_SCROLL},positionType:{count:s.default.POSITION_TYPE_COUNT,relative:s.default.POSITION_TYPE_RELATIVE,absolute:s.default.POSITION_TYPE_ABSOLUTE},printOptions:{count:s.default.PRINT_OPTIONS_COUNT,layout:s.default.PRINT_OPTIONS_LAYOUT,style:s.default.PRINT_OPTIONS_STYLE,children:s.default.PRINT_OPTIONS_CHILDREN},unit:{count:s.default.UNIT_COUNT,undefined:s.default.UNIT_UNDEFINED,point:s.default.UNIT_POINT,percent:s.default.UNIT_PERCENT,auto:s.default.UNIT_AUTO},flexWrap:{count:s.default.WRAP_COUNT,"no-wrap":s.default.WRAP_NO_WRAP,wrap:s.default.WRAP_WRAP,"wrap-reverse":s.default.WRAP_WRAP_REVERSE}}})},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});let a=s(i(5)).version;if(console.log("aframe-material-collection version "+a),"undefined"==typeof AFRAME)throw'aframe-material-collection requires AFRAME to be loaded first. - <script src="https://aframe.io/releases/0.8.2/aframe.min.js"><\/script>';let n=Promise.resolve().then(()=>s(i(6)));window.UI=n},function(t){t.exports={name:"aframe-material-collection",version:"0.4.40",description:"Material UI based primitives and components for use in your aframe projects.",homepage:"https://github.com/shaneharris/aframe-material-collection",keywords:["AFRAME","UI","Material"],scripts:{start:"webpack-dev-server --mode development",build:"webpack --mode production",test:"karma start karma.config.js"},repository:{type:"git",url:"git@github.com:shaneharris/aframe-material-collection.git"},bugs:{url:"https://github.com/shaneharris/aframe-material-collection/issues"},devDependencies:{"@types/chai":"^4.1.6","@types/es6-promise":"^3.3.0","@types/mocha":"^5.2.5",chai:"*","uglifyjs-webpack-plugin":"^1.2.7",karma:"^3.1.4","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.2.0","karma-firefox-launcher":"^1.1.0","karma-ie-launcher":"^1.0.0","karma-mocha":"^1.3.0","karma-webpack":"^3.0.5",mocha:"*","ts-loader":"^5.2.1",typescript:"^3.1.1",webpack:"^4.16.1","webpack-cli":"^3.1.0","webpack-dev-server":"^3.1.14"},author:"Shane Harris",license:"MIT",dependencies:{"@types/aframe":"^0.8.2","@types/three":"^0.93.18","@types/yoga-layout":"^1.9.0","worker-loader":"^2.0.0"}}},function(t,e,i){"use strict";const s=i(1);i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22),i(23),i(24),i(25),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(34),i(35),i(36),i(37),i(38),i(39),i(40),i(41),i(42),i(3),t.exports={utils:new s.Utils}},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-button",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{geometry:{primitive:"plane",width:.5,height:.175},material:{color:"#009688",shader:"flat"},"ui-btn":{},"ui-rounded":{borderRadius:.0025},"ui-ripple":{size:{x:.5,y:.175},clampToSquare:!0,zIndex:.001},text:{font:"roboto",align:"center",zOffset:.002,wrapCount:10,alphaTest:.4}},mappings:{height:"geometry.height",width:"geometry.width",color:"material.color",transparent:"material.transparent","font-color":"text.color","ripple-color":"ui-ripple.color","ripple-size":"ui-ripple.size","ripple-z-index":"ui-ripple.zIndex","text-value":"text.value","wrap-count":"text.wrapCount","border-radius":"ui-rounded.borderRadius","curve-segments":"ui-rounded.curveSegments",disabled:"ui-btn.disabled","hover-height":"ui-btn.hoverHeight","active-height":"ui-btn.activeHeight","prevent-updates":"ui-btn.preventUpdates"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-fab-button",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{geometry:{primitive:"circle",radius:.1,segments:6},material:{color:"#009688",shader:"flat"},"ui-btn":{},"ui-ripple":{size:{x:.1,y:.1},zIndex:.002,fadeDelay:300,duration:500},"ui-icon":{size:{x:.105,y:.105}}},mappings:{radius:"geometry.radius",color:"material.color","icon-color":"ui-icon.color",transparent:"material.transparent",src:"ui-icon.src","ripple-color":"ui-ripple.color","ripple-size":"ui-ripple.size","ripple-z-index":"ui-ripple.zIndex",disabled:"ui-btn.disabled",coords:"ui-icon.spriteCoords"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-switch",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-switch":{}},mappings:{value:"ui-switch.value",disabled:"ui-switch.disabled"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-slider",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-slider":{}},mappings:{value:"ui-slider.value",disabled:"ui-slider.disabled","camera-el":"ui-slider.cameraEl"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-number",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-number":{}},mappings:{}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-toast",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{geometry:{primitive:"plane",width:.5,height:.2},material:{color:"#010e0f",shader:"flat",transparent:!0,opacity:.8},"ui-rounded":{borderRadius:.01,curveSegments:3},text:{font:"roboto",value:"Toast Message!",align:"center",zOffset:.002,wrapCount:20}},mappings:{height:"geometry.height",width:"geometry.width",color:"material.color",transparent:"material.transparent","font-color":"text.color","text-value":"text.value","wrap-count":"text.wrapCount","border-radius":"ui-rounded.borderRadius","curve-segments":"ui-rounded.curveSegments"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-checkbox",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-checkbox":{},"ui-ripple":{size:{x:.1,y:.1},zIndex:-.001,color:"#afafaf"}},mappings:{value:"ui-checkbox.value",disabled:"ui-checkbox.disabled",indeterminate:"ui-checkbox.indeterminate"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-radio",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-radio":{},geometry:{primitive:"ring",radiusInner:.0575,radiusOuter:.0675,segmentsTheta:6},material:{shader:"flat",color:"#afafaf"},"ui-ripple":{size:{x:.1,y:.1},zIndex:-.001,color:"#afafaf"}},mappings:{color:"ui-radio.selectedColor",value:"ui-radio.value",selected:"ui-radio.selected",disabled:"ui-radio.disabled"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-input-text",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-input-text":{placeHolder:"Text...",width:1,height:.2,value:""},"ui-double-click":{}},mappings:{width:"ui-input-text.width",height:"ui-input-text.height",type:"ui-input-text.type",value:"ui-input-text.value","background-color":"ui-input-text.backgroundColor","place-holder":"ui-input-text.placeHolder","camera-el":"ui-input-text.cameraEl","rig-el":"ui-input-text.rigEl","tab-next":"ui-input-text.tabNext","look-controls-component":"ui-input-text.lookControlsComponent","wasd-controls-component":"ui-input-text.wasdControlsComponent"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-text-input",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{placeHolder:"Text..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-number-input",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"number",placeHolder:"Number..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-int-input",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"int",placeHolder:"Whole Number..."},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-password-input",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-text":{type:"password",placeHolder:""},"ui-double-click":{}},mappings:{width:"ui-text.width",height:"ui-text.height",value:"ui-text.value","place-holder":"ui-text.placeHolder"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-scroll-pane",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-scroll-pane":{}},mappings:{width:"ui-scroll-pane.width",height:"ui-scroll-pane.height","scroll-z-offset":"ui-scroll-pane.scrollZOffset","handle-color":"ui-scroll-pane.scrollHandleColor","scroll-padding":"ui-scroll-pane.scrollPadding","look-controls-el":"ui-scroll-pane.cameraEl","look-controls-component":"ui-scroll-pane.lookControlsComponent"}}))},function(t,e,i){"use strict";const s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(0));t.exports=s.default.registerPrimitive("a-ui-renderer",s.default.utils.extendDeep({},s.default.primitives.getMeshMixin(),{defaultComponents:{"ui-renderer":{}},mappings:{"ui-panel":"ui-renderer.uiPanel","look-controls-el":"ui-renderer.lookControlsEl","look-controls-component":"ui-renderer.lookControlsComponent","panel-position":"ui-renderer.panelPosition","panel-size":"ui-renderer.panelSize","render-resolution":"ui-renderer.renderResolution","debug-raycaster":"ui-renderer.debugRaycaster",fps:"ui-renderer.fps","intersectable-class":"ui-renderer.intersectableClass","render-debug":"ui-renderer.debug","init-delay":"ui-renderer.initDelay"}}))},function(t,e,i){"use strict";t.exports=AFRAME.registerComponent("ui-text",{schema:{width:{type:"number",default:.5},height:{type:"number",default:.1},value:{default:""},type:{default:"text"},lineFocusColor:{default:"#009688"},lineBlurColor:{default:"#cfcfcf"},disabledColor:{default:"#afafaf"},disabled:{type:"boolean",default:!1},fontFamily:{default:"Roboto"},fontColor:{default:"#4f4f4f"},placeHolder:{default:"Text..."},intersectableClass:{default:"intersectable"}},init(){console.warn("ui-text is deprecated. please use ui-input-text instead. Thanks!")}})},function(t,e,i){"use strict";const s=i(0),a=i(2),n=i(1);t.exports=s.registerComponent("ui-input-text",{container:void 0,backing:void 0,underline:void 0,selectionHighlight:void 0,carret:void 0,text:{},alphabet:{},startSelection:0,scrollOffset:0,scrollIndex:0,carretInterval:0,shiftStartPos:void 0,chars:new Array,charsAllowed:new Array,blurHandler:()=>{},isMoving:!1,isFocused:!1,mousemove:t=>{},keydown:t=>{},keySelectAll:()=>{},keyCut:()=>{},keyCopy:()=>{},keyPaste:()=>{},positions:new Array,depends:["text"],content_clips:[new a.Plane(new a.Vector3(-1,0,0),0),new a.Plane(new a.Vector3(1,0,0),0)],schema:{value:{default:""},disabled:{type:"boolean",default:!1},type:{default:"text"},cameraEl:{type:"selector"},rigEl:{type:"selector"},tabNext:{type:"selector"},width:{type:"number",default:1},height:{type:"number",default:.2},backgroundColor:{default:"white"},lookControlsComponent:{default:"look-controls"},wasdControlsComponent:{default:"wasd-controls"},placeHolder:{default:"Text..."}},init(){this.setupElements(),this.setupScrollClips(),this.text.addEventListener("textfontset",()=>{this.text.selectionStart=0,this.text.selectionLength=0,this.startSelection=0,this.scrollOffset=0,this.alphabet={},this.scrollIndex=0;let t=this.data.value.split("");this.chars=[],this.charsAllowed=["-","_","+","=","{","}","[","]",":",";","'","@","~","#","<",">",",",".","?","/","|","\\","`","¬"];for(let e=0;e<t.length;e++)this.chars.push({char:t[e]});this.blurHandler=(()=>{this.el.sceneEl.defaultKeypressPrevented?this.el.sceneEl.defaultKeypressPrevented=!1:this.blur()}),this.isMoving=!1,this.mousemove=this.onMousemove.bind(this),this.keydown=(t=>this.handleKeyboardEvent(t)),this.keySelectAll=(()=>this.selectAll()),this.keyCut=(()=>this.cutText()),this.keyCopy=(()=>this.copyText()),this.keyPaste=(()=>this.pasteText()),this.backing.addEventListener("mousedown",()=>{this.focus()}),this.el.sceneEl.addEventListener("mouseup",()=>{this.backing.removeEventListener("ui-mousemove",this.mousemove),this.isMoving=!1,this.setSelection(this.text.selectionStart,this.text.selectionLength)}),this.el.setAttribute("visible",!1),this.setValue(),setTimeout(()=>{this.setScrollClips(),this.el.setAttribute("visible",!0)},200)}),this.el.getValue=this.getValue.bind(this),this.el.value=this.value.bind(this),this.el.focus=this.focus.bind(this)},setupScrollClips(){this.content_clips=[new a.Plane(new a.Vector3(-1,0,0),0),new a.Plane(new a.Vector3(1,0,0),0)]},selectAll(){this.text.selectionStart=0,this.text.selectionLength=this.chars.length,this.setValue()},increaseWrap(){let t=this.text.object3D.children[this.text.object3D.children.length-1];t&&(t.geometry.layout&&t.geometry.layout._linesTotal>1?(this.text.setAttribute("visible",!1),this.text.setAttribute("width",1.2*this.text.getAttribute("width")),this.text.setAttribute("wrap-pixels",500*this.text.getAttribute("width")),this.text.setAttribute("x-offset",(this.text.getAttribute("width")-this.data.width)/2),setTimeout(()=>this.increaseWrap())):this.text.setAttribute("visible",!0))},setScrollClips(){this.content_clips[0].set(new a.Vector3(-1,0,0),this.data.width/2+.005),this.content_clips[1].set(new a.Vector3(1,0,0),this.data.width/2+.005),this.content_clips[0].applyMatrix4(this.backing.object3D.matrixWorld),this.content_clips[1].applyMatrix4(this.backing.object3D.matrixWorld),setTimeout(()=>{let t=this.text.object3D.children[this.text.object3D.children.length-1];t&&(t.material.clippingPlanes=this.text._content_clips?this.text._content_clips.concat(this.content_clips):this.content_clips)},0);let t=this.selectionHighlight.getObject3D("mesh");t&&(t.material.clippingPlanes=this.text._content_clips?this.text._content_clips.concat(this.content_clips):this.content_clips);let e=this.carret.getObject3D("mesh");e&&(e.material.clipShadows=!0,e.material.needsUpdate=!0,e.material.clippingPlanes=this.text._content_clips?this.text._content_clips.concat(this.content_clips):this.content_clips)},numberOnly(t,e){if(-1!==[46,8,9,27,13,110].indexOf(t.keyCode)||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||67===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||88===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=39)return!0;let i=this.getValue();return t?(e?/^\d*((\.)|(\.\d+))?$/g:/^\d*?$/g).test(i+t.key):void 0},floatOnly(t){return this.numberOnly(t,!0)},focus(){this.isFocused||(this.isFocused=!0,this.setupCarret(),this.setScrollClips(),setTimeout(()=>{this.setValue(),this.el.sceneEl.addEventListener("mousedown",this.blurHandler),this.playPauseCamera("pause")}),this.backing.addEventListener("ui-mousemove",this.mousemove),window.addEventListener("keydown",this.keydown),this.el.sceneEl.addEventListener("key-select",this.keySelectAll),this.el.sceneEl.addEventListener("key-cut",this.keyCut),this.el.sceneEl.addEventListener("key-copy",this.keyCopy),this.el.sceneEl.addEventListener("key-paste",this.keyPaste),this.underline.setAttribute("height",.008),this.underline.setAttribute("color","#009688"))},blur(){this.chars.length&&"."===this.chars[this.chars.length-1].char&&"number"===this.data.type&&(this.chars.pop(),this.setValue()),this.setSelection(0,0),setTimeout(()=>{clearInterval(this.carretInterval),this.carret.getObject3D("mesh").material.opacity=0,this.isFocused=!1}),this.el.sceneEl.removeEventListener("mousedown",this.blurHandler),this.playPauseCamera("play"),window.removeEventListener("keydown",this.keydown),this.el.sceneEl.removeEventListener("key-select",this.keySelectAll),this.el.sceneEl.removeEventListener("key-cut",this.keyCut),this.el.sceneEl.removeEventListener("key-copy",this.keyCopy),this.el.sceneEl.removeEventListener("key-paste",this.keyPaste),n.Utils.stoppedChanging(this.text.object3D.uuid),this.underline.setAttribute("height",.005),this.underline.setAttribute("color","#bfbfbf")},pasteText(){navigator.clipboard.readText().then(t=>{let e=[this.text.selectionStart,this.text.selectionLength].concat(t.split("").map(t=>({char:t})));Array.prototype.splice.apply(this.chars,e),this.text.selectionStart=this.text.selectionStart+e.length-2,this.text.selectionLength=0,this.setValue()})},cutText(){this.copyText(),this.chars.splice(this.text.selectionStart,this.text.selectionLength),this.setValue()},copyText(){let t=this.chars.slice(this.text.selectionStart,this.text.selectionStart+this.text.selectionLength).map(t=>t.char).join("");navigator.clipboard.writeText(t)},handleKeyboardEvent(t){if(13===t.keyCode)this.el.emit("submit");else if(9===t.keyCode)this.data.tabNext&&(this.carret.getObject3D("mesh").material.opacity=1,this.blur(),setTimeout(()=>this.data.tabNext.focus()));else if(88===t.keyCode&&t.ctrlKey)this.cutText();else if(67===t.keyCode&&t.ctrlKey)this.copyText();else if(86===t.keyCode&&t.ctrlKey)this.pasteText();else if(65===t.keyCode&&t.ctrlKey)this.text.selectionStart=0,this.text.selectionLength=this.chars.length,t.preventDefault(),t.stopPropagation();else if(t.code.indexOf("Key")>-1||t.code.indexOf("Digit")>-1||this.charsAllowed.indexOf(t.key)>-1){let e=!0;switch(this.data.type){case"number":e=this.floatOnly(t);break;case"int":console.log(this.numberOnly(t,!1)),e=this.numberOnly(t,!1)}e&&(this.chars.splice(this.text.selectionStart,this.text.selectionLength,{char:t.key}),this.text.selectionStart++,this.text.selectionLength=0),t.preventDefault(),t.stopPropagation()}else 46===t.keyCode?(this.chars.splice(this.text.selectionStart,this.text.selectionLength||1),this.text.selectionStart=this.text.selectionStart>this.chars.length?this.chars.length:this.text.selectionStart,this.text.selectionLength=0,t.preventDefault(),t.stopPropagation()):39===t.keyCode?(t.shiftKey?(this.shiftStartPos||(this.shiftStartPos=this.text.selectionStart),this.text.selectionStart<this.shiftStartPos?(this.text.selectionStart++,this.text.selectionLength=Math.abs(this.shiftStartPos-this.text.selectionStart)):this.text.selectionLength++):(this.text.selectionLength?this.text.selectionStart+=this.text.selectionLength:this.text.selectionStart++,this.text.selectionLength=0,this.text.selectionStart>this.chars.length&&(this.text.selectionStart=this.chars.length),delete this.shiftStartPos),t.preventDefault(),t.stopPropagation()):37===t.keyCode?(t.shiftKey?(this.shiftStartPos||(this.shiftStartPos=this.text.selectionStart),this.text.selectionStart+this.text.selectionLength>this.shiftStartPos?this.text.selectionLength--:(this.text.selectionStart--,this.text.selectionLength=Math.abs(this.shiftStartPos-this.text.selectionStart))):(this.text.selectionLength||this.text.selectionStart--,this.text.selectionLength=0,this.text.selectionStart<0&&(this.text.selectionStart=0),delete this.shiftStartPos),t.preventDefault(),t.stopPropagation()):(this.text.selectionLength?8===t.keyCode&&(this.chars.splice(this.text.selectionStart,this.text.selectionLength),this.text.selectionLength=0):8===t.keyCode?this.text.selectionStart&&(this.chars.splice(this.text.selectionStart-1,this.text.selectionLength||1),this.text.selectionStart=this.text.selectionStart-1):32===t.keyCode&&(this.chars.splice(this.text.selectionStart,0,{char:" "}),this.text.selectionStart++),t.preventDefault(),t.stopPropagation());this.el.emit("ui-keypress",t),this.setValue(),this.carret.getObject3D("mesh").material.opacity=1},setValue(){this.setScrolledValue(),setTimeout(()=>{this.setCharacters(),this.setSelection(this.text.selectionStart,this.text.selectionLength),this.increaseWrap()})},setScrolledValue(){let t=this.getValue();this.text.setAttribute("value",t),this.chars.length?(this.text.setAttribute("value",t),this.text.setAttribute("color","#2f2f2f")):(this.text.setAttribute("color","#bfbfbf"),this.text.setAttribute("value",this.data.placeHolder))},onMousemove(t){let e=this.getSelectionPosition(t);this.isMoving||(this.isMoving=!0,this.startSelection=e);let i=this.getNearestGlyph(this.startSelection,e);this.selectionHighlight.setAttribute("scale",i.end-i.start+" 1 1"),this.selectionHighlight.setAttribute("position",i.start+(i.end-i.start)/2+" 0 0.0005"),this.carret.setAttribute("position",i.end+" 0 0.001")},setupElements(){this.container=document.createElement("a-entity"),this.container.setAttribute("position",this.data.width/2+" 0 0"),this.text=document.createElement("a-text"),this.text.setAttribute("color","#2f2f2f"),this.text.setAttribute("anchor","center"),this.text.setAttribute("align","left"),this.text.setAttribute("position","0 0 0.003"),this.text.setAttribute("width",this.data.width),this.text.setAttribute("wrap-pixels",500*this.data.width),this.text.className="no-yoga-layout",this.text.setAttribute("height",this.data.height),this.text.setAttribute("value",this.data.value),this.container.appendChild(this.text),this.selectionHighlight=document.createElement("a-box"),this.selectionHighlight.setAttribute("width",1),this.selectionHighlight.setAttribute("scale","0 1 1"),this.selectionHighlight.setAttribute("height",.16),this.selectionHighlight.setAttribute("depth",1e-5),this.selectionHighlight.setAttribute("transparent",!0),this.selectionHighlight.className="no-yoga-layout",this.selectionHighlight.setAttribute("color","#009688"),this.selectionHighlight.setAttribute("shader","flat"),this.selectionHighlight.setAttribute("opacity",.3),this.selectionHighlight.setAttribute("position","0 0 0.0005"),this.text.appendChild(this.selectionHighlight),this.carret=document.createElement("a-box"),this.carret.setAttribute("width",.01),this.carret.setAttribute("height",.12),this.carret.setAttribute("depth",1e-5),this.carret.setAttribute("transparent",!0),this.carret.setAttribute("opacity",0),this.carret.setAttribute("shader","flat"),this.carret.className="no-yoga-layout",this.carret.setAttribute("color","#009688"),this.carret.setAttribute("position",-this.data.width/2+" 0 0.001"),this.text.appendChild(this.carret),this.backing=document.createElement("a-box"),this.backing.className="intersectable no-yoga-layout text-backing",this.backing.setAttribute("width",this.data.width+.1),this.backing.setAttribute("height",this.data.height),this.backing.setAttribute("depth",1e-5),this.backing.setAttribute("color",this.data.backgroundColor),this.backing.setAttribute("shader","flat"),this.container.appendChild(this.backing),this.underline=document.createElement("a-box"),this.underline.setAttribute("width",this.data.width),this.underline.setAttribute("height",.005),this.underline.setAttribute("depth",1e-5),this.underline.className="no-yoga-layout",this.underline.setAttribute("shader","flat"),this.underline.setAttribute("color","#bfbfbf"),this.underline.setAttribute("position","0 -0.072 0.001"),this.container.appendChild(this.underline),this.el.appendChild(this.container)},setupCarret(){let t=this.carret.getObject3D("mesh").material;this.carretInterval=setInterval(()=>{t.opacity=t.opacity?0:1,n.Utils.isChanging(this.el.sceneEl,this.text.object3D.uuid)},350)},value(t){if(!t&&""!==t)return this.chars.map(t=>t.char).join("");this.chars=t.split("").map(t=>({char:t})),this.text.selectionStart=this.chars.length,this.setValue()},getValue(){let t="";for(let e=0;e<this.chars.length;e++)t+="password"===this.data.type?"*":this.chars[e].char;return t},getSelectionPosition(t){return this.el.object3D.updateMatrixWorld(!1),this.text.object3D.worldToLocal(t.detail.intersection.point.clone()).x},playPauseCamera(t){let e=this.data.cameraEl;e&&e.components[this.data.lookControlsComponent]&&e.components[this.data.lookControlsComponent][t](),this.data.rigEl&&(e=this.data.rigEl),e&&e.components[this.data.wasdControlsComponent]&&e.components[this.data.wasdControlsComponent][t]()},setCharacters(){this.positions=new Array;let t=this.text.object3D.children[this.text.object3D.children.length-1];if(!this.chars.length||!t)return;let e=t.geometry.layout.glyphs,i=t.scale.x,s=0;for(let t=0;t<e.length;t++){let a=e[t];this.chars[t]||console.log(e.length,this.chars.length);let n=" "===this.chars[t].char?20:a.data.width,l=(a.position[0]+n+a.position[1])*i+.08;0===t&&(s=(a.position[0]+a.position[1])*i+.08),this.chars[t].id||(this.chars[t].id=a.data.id,this.chars[t].width=l-s),this.chars[t].left=s,s=l}},getNearestGlyph(t,e){let i=Number(this.text.getAttribute("width")),s=this.data.width;if(e<t){let i=e;e=t,t=i}t<-s/2&&(t=-s/2),e>i-s/2&&(e=i-s/2);let a=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,l={start:0,end:0};if(this.chars.length)for(let i=0;i<=this.chars.length;i++){let o=this.chars[i===this.chars.length?i-1:i],r=(i===this.chars.length?o.left+o.width:o.left)-s/2;Math.abs(t-r)<a&&(a=Math.abs(t-r),l.start=r,this.text.selectionStart=i),Math.abs(e-r)<n&&(n=Math.abs(e-r),l.end=r,this.text.selectionLength=i-this.text.selectionStart)}return l},setSelection(t,e){this.text.selectionStart=t,this.text.selectionLength=e;let i=0,s=0;for(let a=0;a<this.chars.length;a++){let n=this.chars[a];if(a>=t&&a<t+e+1){let e=n.left;a===t&&(s=e),i=e}}let a=this.chars.length?this.chars[this.chars.length-1].left+this.chars[this.chars.length-1].width:0;t+e===this.chars.length&&(i=a),t===this.chars.length&&(s=i=a);let n=this.data.width;this.selectionHighlight.setAttribute("scale",i-s+" 1 1"),this.selectionHighlight.setAttribute("position",s+(i-s)/2-n/2+" 0 0.0005");let l=i-n/2;this.carret.setAttribute("position",l+" 0 0.001"),l>n/2-this.scrollOffset&&(this.scrollOffset=-(l-n/2),this.text.setAttribute("position",this.scrollOffset+" 0 0.003")),l+n/2<-this.scrollOffset&&(this.scrollOffset+=-this.scrollOffset-(l+n/2),this.scrollOffset>0&&(this.scrollOffset=0),this.text.setAttribute("position",this.scrollOffset+" 0 0.003"))},updateSchema(){}})},function(t,e,i){"use strict";const s=i(0),a=i(1);t.exports=s.registerComponent("ui-btn",{defaultZ:0,is_clicked:!1,schema:{duration:{type:"int",default:250},hoverHeight:{type:"number",default:.01},activeHeight:{type:"number",default:-.001},disabled:{type:"boolean",default:!1},preventUpdates:{type:"boolean",default:!1}},updateSchema(){},init(){this.defaultZ=this.el.object3D.position.z,this.data.disabled||(this.el.addEventListener("mouseenter",t=>this.mouseEnter(t)),this.el.addEventListener("mousedown",t=>this.mouseDown(t)),this.el.addEventListener("mouseup",t=>this.mouseUp(t)),this.el.addEventListener("mouseleave",t=>this.mouseLeave(t)))},mouseEnter(t){const e=this;this.tween(this.defaultZ,this.defaultZ+this.data.hoverHeight,function(){e.el.object3D.position.z=this.x},function(){e.el.object3D.position.z=e.defaultZ+e.data.hoverHeight})},mouseLeave(t){if(this.is_clicked)return this.is_clicked=!1;this.resetAnimation(this.defaultZ+this.data.hoverHeight)},mouseUp(t){this.is_clicked=!0,this.resetAnimation(this.defaultZ+this.data.activeHeight),a.Utils.preventDefault(t)},mouseDown(t){const e=this;this.tween(this.defaultZ+this.data.hoverHeight,this.defaultZ+this.data.activeHeight,function(){e.el.object3D.position.z=this.x},function(){e.el.object3D.position.z=e.defaultZ+e.data.activeHeight}),a.Utils.preventDefault(t)},resetAnimation(t){let e=this;this.tween(t,this.defaultZ,function(){e.el.object3D.position.z=this.x},function(){e.el.object3D.position.z=e.defaultZ})},tween(t,e,i,s){let n=this;return this.data.preventUpdates||a.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),new TWEEN.Tween({x:t}).to({x:e},this.data.duration).onUpdate(i).onComplete(()=>(n.data.preventUpdates||a.Utils.stoppedChanging(n.el.object3D.uuid),s.call(this))).easing(TWEEN.Easing.Exponential.Out).start()}})},function(t,e,i){"use strict";const s=i(0);t.exports=s.registerComponent("ui-icon",{icon:void 0,schema:{src:{default:"icons/send_white_64dp.png"},spriteCoords:{type:"vec4"},size:{type:"vec2",default:{x:.1,y:.1}},zIndex:{type:"number",default:.003},color:{default:"#fff"}},init(){this.icon=document.createElement("a-entity"),this.icon.className="no-yoga-layout",this.icon.setAttribute("geometry","primitive:plane; width: "+this.data.size.x+"; height: "+this.data.size.y+";skipCache: true;"),this.icon.setAttribute("material","shader: flat; color:"+this.data.color+";alpha-test:0.4; transparent:true;src:"+this.data.src),this.data.spriteCoords&&this.icon.setAttribute("sprite-sheet","coords:"+this.data.spriteCoords.x+" "+this.data.spriteCoords.y+" "+this.data.spriteCoords.z+" "+this.data.spriteCoords.w+";shape:square"),this.icon.setAttribute("position","0 0 "+this.data.zIndex),this.el.appendChild(this.icon)}})},function(t,e,i){"use strict";const s=i(0),a=i(2);t.exports=s.registerComponent("ui-rounded",{schema:{borderRadius:{type:"number",default:.01},curveSegments:{type:"int",default:1}},init(){let t=this.el.getObject3D("mesh"),e=new a.Shape;!function(t,e,i,s,a,n){t.moveTo(e,i+n),t.lineTo(e,i+a-n),t.quadraticCurveTo(e,i+a,e+n,i+a),t.lineTo(e+s-n,i+a),t.quadraticCurveTo(e+s,i+a,e+s,i+a-n),t.lineTo(e+s,i+n),t.quadraticCurveTo(e+s,i,e+s-n,i),t.lineTo(e+n,i),t.quadraticCurveTo(e,i,e,i+n)}(e,-t.geometry.metadata.parameters.width/2,-t.geometry.metadata.parameters.height/2,t.geometry.metadata.parameters.width,t.geometry.metadata.parameters.height,this.data.borderRadius),t.geometry=new a.ShapeBufferGeometry(e,this.data.curveSegments),this.el.emit("rounded-loaded",null,!1)}})},function(t,e,i){"use strict";const s=i(2),a=i(0),n=i(1);t.exports=a.registerComponent("ui-ripple",{rippleGeometry:void 0,ripple:void 0,content_clips:new Array,isRippling:!1,schema:{color:{default:"#fff"},duration:{type:"int",default:1e3},fadeDuration:{type:"int",default:750},fadeDelay:{type:"int",default:250},clampToSquare:{type:"boolean",default:!1},size:{type:"vec2",default:{x:1,y:1}},zIndex:{type:"number",default:-.001},segments:{type:"int",default:6}},init(){this.rippleGeometry=new s.CircleGeometry(Math.max(this.data.size.x,this.data.size.y),this.data.segments),this.ripple=new s.Mesh(this.rippleGeometry.clone(),new s.MeshBasicMaterial({color:this.data.color,transparent:!0,opacity:.4,alphaTest:.1})),this.ripple.scale.set(1e-5,1e-5,1e-5),this.el.object3D.add(this.ripple),this.el.addEventListener("mousedown",this.click.bind(this)),this.ripple.position.set(0,0,this.data.zIndex),this.data.clampToSquare&&(this.content_clips=[new s.Plane(new s.Vector3(0,1,0),this.data.size.y/2),new s.Plane(new s.Vector3(0,-1,0),this.data.size.y/2),new s.Plane(new s.Vector3(-1,0,0),this.data.size.x/2),new s.Plane(new s.Vector3(1,0,0),this.data.size.x/2)])},click(t){if(this.isRippling)return t.preventDefault();this.isRippling=!0,this.data.clampToSquare&&this.setRippleClips(),this.tweenSize(this.ripple.geometry),this.tweenOpacity(this.ripple.material)},setRippleClips(){this.content_clips[0].set(new s.Vector3(0,1,0),this.data.size.y/2),this.content_clips[1].set(new s.Vector3(0,-1,0),this.data.size.y/2),this.content_clips[2].set(new s.Vector3(-1,0,0),this.data.size.x/2),this.content_clips[3].set(new s.Vector3(1,0,0),this.data.size.x/2),this.content_clips[0].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[1].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[2].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[3].applyMatrix4(this.el.object3D.matrixWorld),this.ripple.material.clippingPlanes=this.el._content_clips?this.el._content_clips.concat(this.content_clips):this.content_clips,this.ripple.material.clipShadows=!0,this.ripple.material.needsUpdate=!0},tweenSize(t){let e=this;n.Utils.isChanging(this.el.sceneEl,e.ripple.uuid),new TWEEN.Tween({x:1e-5}).to({x:1},this.data.duration).onUpdate(function(){e.ripple.scale.set(this.x,this.x,this.x)}).onComplete(()=>{e.ripple.scale.set(1e-5,1e-5,1e-5),this.isRippling=!1,n.Utils.stoppedChanging(e.ripple.uuid)}).easing(TWEEN.Easing.Exponential.Out).start()},tweenOpacity(t){new TWEEN.Tween({x:.4}).to({x:0},this.data.fadeDuration).delay(this.data.fadeDelay).onUpdate(function(){t.opacity=this.x}).onComplete(()=>{t.opacity=.4}).easing(TWEEN.Easing.Exponential.Out).start()}})},function(t,e,i){"use strict";const s=i(0),a=i(2),n=i(1);t.exports=s.registerComponent("ui-slider",{schema:{value:{type:"number",default:0},disabled:{type:"boolean",default:!1},progressColor:{default:"#4db6ac"},handleColor:{default:"#009688"},handleDisabledColor:{default:"#afafaf"},railColor:{default:"#fff"},handleZIndex:{type:"number",default:.001},intersectableClass:{default:"intersectable"},width:{type:"number",default:.5},height:{type:"number",default:.1},lookControlsComponent:{default:"look-controls"},handleRadius:{type:"number",default:.055},scrollZOffset:{type:"number",default:0},cameraEl:{type:"selector"}},getValue(){return this.scroll_perc},init(){this.scroll_perc=this.data.value,this.width=this.data.width,this.height=this.data.height,this.backgroundPanel=document.createElement("a-plane"),this.backgroundPanel.setAttribute("class","no-yoga-layout background "+this.data.intersectableClass),this.backgroundPanel.setAttribute("width",this.data.width+1),this.backgroundPanel.setAttribute("height",this.data.height+1),this.backgroundPanel.setAttribute("position","0 0 -0.02"),this.backgroundPanel.setAttribute("opacity",1e-4),this.backgroundPanel.setAttribute("transparent",!0),this.el.appendChild(this.backgroundPanel),this.handleEl=document.createElement("a-circle"),this.handleEl.setAttribute("radius",this.data.handleRadius),this.handleEl.setAttribute("color",this.data.handleColor),this.handleEl.setAttribute("shader","flat"),this.handleEl.setAttribute("ui-ripple","size:0.1 0.1;color:#999;fadeDelay:300;duration:500"),this.handleEl.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),this.handleEl.setAttribute("position",-this.data.width/2+this.data.handleRadius+" 0 "+this.data.handleZIndex),this.handleEl.setAttribute("segments",6),this.el.appendChild(this.handleEl),this.railEl=document.createElement("a-plane"),this.railEl.setAttribute("width",this.data.width-.1),this.railEl.setAttribute("height","0.05"),this.railEl.setAttribute("shader","flat"),this.railEl.setAttribute("ui-rounded","borderRadius:0.025"),this.railEl.setAttribute("color",this.data.railColor),this.railEl.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),this.el.appendChild(this.railEl),this.railEl.addEventListener("rounded-loaded",()=>{this.getRailObject(this.railEl.object3D),this.slide(this.scroll_perc,!0)});const t=t=>{if(this.data.cameraEl){let e=this.data.cameraEl.components[this.data.lookControlsComponent];e&&e[t]()}},e=t=>this.mouseMove(t);this.handleEl.addEventListener("mousedown",i=>{t("pause"),this.isDragging=!0,this.el.emit("slide-start",this.scroll_perc),this.handlePos=this.handleEl.object3D.worldToLocal(i.detail.intersection?i.detail.intersection.point:i.relatedTarget.object3D.position).x,this.backgroundPanel.addEventListener("ui-mousemove",e),n.Utils.isChanging(this.el.sceneEl,this.handleEl.object3D.uuid),n.Utils.preventDefault(i)});const i=i=>{this.isDragging&&(this.backgroundPanel.removeEventListener("ui-mousemove",e),t("play"),this.isDragging=!1,this.el.emit("slide-end",this.scroll_perc),n.Utils.stoppedChanging(this.handleEl.object3D.uuid),n.Utils.preventDefault(i))};this.backgroundPanel.addEventListener("mouseup",i),this.backgroundPanel.addEventListener("mouseleave",i),this.railEl.addEventListener("mousedown",t=>{n.Utils.isChanging(this.el.sceneEl,this.handleEl.object3D.uuid),this.isDragging=!0,this.handlePos=0,this.slide(this.railEl.object3D.worldToLocal(t.detail.intersection?t.detail.intersection.point:t.relatedTarget.object3D.position).x),this.backgroundPanel.addEventListener("ui-mousemove",e),this.el.emit("slide-end",this.scroll_perc),n.Utils.preventDefault(t)}),this.el.slide=this.slide.bind(this),this.el.getValue=this.getValue.bind(this),this.el.railEl=this.railEl},slide(t,e){let i=-this.data.width/2+this.data.handleRadius,s=this.data.width/2-this.data.handleRadius,n=e?i+(s-i)*t:a.Math.clamp(t,i,s);this.scroll_perc=e?t:(n-i)/(s-i),this.el.emit("slide",this.scroll_perc),this.progress.scale.set(this.scroll_perc||1e-4,1,1),this.progress.position.set(-(this.data.width-this.data.handleRadius)/2+this.scroll_perc*((this.data.width-this.data.handleRadius)/2),0,1e-4),this.handleEl.setAttribute("position",n+" 0 "+(this.data.scrollZOffset+5e-4))},mouseMove(t){if(this.isDragging){let e=this.railEl.object3D.worldToLocal(t.detail.intersection.point);this.slide(e.x-this.handlePos+this.data.handleRadius)}},getRailObject(t){t.traverse(t=>{t.geometry&&"ShapeBufferGeometry"===t.geometry.type&&(this.progress=new a.Mesh(t.geometry.clone(),new a.MeshBasicMaterial({color:this.data.progressColor})),this.progress.position.set(-this.data.width/2,0,1e-4),this.progress.scale.set(1e-5,1,1),this.el.object3D.add(this.progress))})}})},function(t,e,i){"use strict";const s=i(0);t.exports=s.registerComponent("ui-number",{schema:{value:{type:"number",default:0},increment:{type:"number",default:.001},width:{type:"number",default:.65},height:{type:"number",default:.2},intersectableClass:{default:"intersectable"}},init(){this.setupElements()},setupElements(){let t=document.createElement("a-plane");t.setAttribute("width","0.55"),t.setAttribute("height","0.2"),t.className="no-yoga-layout",t.setAttribute("color","#212121"),t.setAttribute("text","value:"+this.data.value.toFixed(3)+";color:#212121;wrapCount:12;align:center"),t.setAttribute("ui-border","borderRadius:0.1;borderWidth:0.008");let e=document.createElement("a-ui-fab-button-small");e.setAttribute("scale","0.75 0.75 0.75"),e.className="no-yoga-layout "+this.data.intersectableClass,e.setAttribute("color","#009688"),e.setAttribute("position","0.33 0.055 0.001"),e.setAttribute("color","#009688"),e.setAttribute("icon-color","#fff"),e.setAttribute("ripple-color","#009688"),e.setAttribute("src","https://cdn.theexpanse.app/images/icons/baseline_keyboard_arrow_up_white_18dp.png"),e.addEventListener("click",()=>{this.data.value+=this.data.increment,t.setAttribute("text","value:"+this.data.value.toFixed(3)+";color:#212121;wrapCount:12;align:center"),this.el.emit("change",this.data.value)});let i=document.createElement("a-ui-fab-button-small");i.setAttribute("scale","0.75 0.75 0.75"),i.className="no-yoga-layout "+this.data.intersectableClass,i.setAttribute("color","#009688"),i.setAttribute("position","0.33 -0.055 0.001"),i.setAttribute("color","#009688"),i.setAttribute("icon-color","#fff"),i.setAttribute("ripple-color","#009688"),i.setAttribute("src","https://cdn.theexpanse.app/images/icons/down_arrow.png"),i.addEventListener("click",()=>{this.data.value-=this.data.increment,t.setAttribute("text","value:"+this.data.value.toFixed(3)+";color:#212121;wrapCount:12;align:center"),this.el.emit("change",this.data.value)}),t.appendChild(e),t.appendChild(i),this.el.appendChild(t)}})},function(t,e,i){"use strict";const s=i(2),a=i(1);t.exports=AFRAME.registerComponent("ui-switch",{schema:{value:{type:"boolean",default:!1},disabled:{type:"boolean",default:!1},progressColor:{default:"#4db6ac"},handleColor:{default:"#009688"},handleDisabledColor:{default:"#afafaf"},railColor:{default:"#fff"},switchDuration:{type:"int",default:350},handleZIndex:{type:"number",default:.01},intersectableClass:{default:"intersectable"},width:{type:"number",default:.3},height:{type:"number",default:.1}},updateSchema(){this.data&&(this.data.disabled?this.data.value&&(this.data.value=!1,this.click()):this.click(),this.setDisabled())},init(){this.width=.3,this.height=.1;let t='\n            <a-circle radius="0.055" shader="flat" color="'+this.data.handleColor+'" \n            ui-ripple="size:0.1 0.1;color:#999;fadeDelay:300;duration:500" class="'+this.data.intersectableClass+' no-yoga-layout"\n            position="-0.05 0 '+this.data.handleZIndex+'" segments="6"></a-circle>';this.el.insertAdjacentHTML("beforeend",t),this.handleEl=this.el.lastChild;let e='<a-plane width="0.15" shader="flat" height="0.05" \n            ui-rounded="borderRadius:0.025" class="'+this.data.intersectableClass+' no-yoga-layout"\n            color="'+this.data.railColor+'" segments="6"></a-plane>';this.el.insertAdjacentHTML("beforeend",e),this.railEl=this.el.lastChild,this.railEl.addEventListener("rounded-loaded",()=>{this.getRailObject(this.railEl.object3D),this.setDisabled(),this.click()}),this.el.getValue=this.getValue.bind(this),this.clickHandler=(t=>{this.data.value=!this.data.value,this.click(),t.detail.preventDefault&&t.detail.preventDefault()})},getValue(){return this.data.value},setDisabled(){this.data.disabled?(this.handleEl.removeEventListener("mousedown",this.clickHandler),this.handleEl.setAttribute("color",this.data.handleDisabledColor)):(this.handleEl.addEventListener("mousedown",this.clickHandler),this.handleEl.setAttribute("color",this.data.handleColor))},click(){this.el.emit("ui-switch-changed",this.data.value),this.tweenHandle(),this.tweenProgress()},getRailObject(t){t.traverse(t=>{t.geometry&&"ShapeBufferGeometry"===t.geometry.type&&(this.progress=new s.Mesh(t.geometry.clone(),new s.MeshBasicMaterial({color:this.data.progressColor})),this.progress.position.set(-.075,0,.001),this.progress.scale.set(1e-5,1,1),this.el.object3D.add(this.progress))})},tweenProgress(){this.progress&&(new TWEEN.Tween(this.progress.position).to(new s.Vector3(this.data.value?0:-.075,0,.001),this.data.switchDuration).easing(TWEEN.Easing.Exponential.Out).start(),new TWEEN.Tween(this.progress.scale).to(new s.Vector3(this.data.value?1:1e-5,1,1),this.data.switchDuration).easing(TWEEN.Easing.Exponential.Out).start())},tweenHandle(){this.handleEl&&(a.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),new TWEEN.Tween(this.handleEl.object3D.position).to(new s.Vector3(this.data.value?.05:-.05,0,this.data.handleZIndex),this.data.switchDuration).onComplete(()=>{a.Utils.stoppedChanging(this.el.object3D.uuid)}).easing(TWEEN.Easing.Exponential.Out).start())}})},function(t,e,i){"use strict";const s=i(1);t.exports=AFRAME.registerComponent("ui-toast",{schema:{toastEl:{type:"selector"},message:{default:"Hello from toast!"}},init(){this.originalPosition=this.data.toastEl.getAttribute("position").clone(),this.el.addEventListener("mousedown",()=>{this.closeTween&&this.closeTween.stop(),s.Utils.isChanging(this.el.sceneEl,this.data.toastEl.object3D.uuid),this.data.toastEl.setAttribute("visible",!0),this.data.toastEl.setAttribute("text-value",s.Utils.shorten(this.data.message,85));let t=this;new TWEEN.Tween({x:this.originalPosition.x,y:this.originalPosition.y-.1,z:this.originalPosition.z}).to(this.originalPosition,350).onUpdate(function(){t.data.toastEl.setAttribute("position",this)}).onComplete(()=>{this.closeTween=new TWEEN.Tween({x:.8}).delay(2e3).to({x:1e-4},350).onUpdate(function(){t.data.toastEl.setAttribute("opacity",this.x)}).onComplete(()=>{this.data.toastEl.setAttribute("visible",!1),s.Utils.stoppedChanging(this.data.toastEl.object3D.uuid)}).easing(TWEEN.Easing.Exponential.Out).start()}).easing(TWEEN.Easing.Exponential.Out).start(),new TWEEN.Tween({x:1e-4}).to({x:.8},350).onUpdate(function(){t.data.toastEl.setAttribute("opacity",this.x)}).easing(TWEEN.Easing.Exponential.Out).start()})}})},function(t,e,i){"use strict";var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))(function(a,n){function l(t){try{r(s.next(t))}catch(t){n(t)}}function o(t){try{r(s.throw(t))}catch(t){n(t)}}function r(t){t.done?a(t.value):new i(function(e){e(t.value)}).then(l,o)}r((s=s.apply(t,e||[])).next())})},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const n=i(2),l=a(i(3)),o=a(i(33)),r=i(0),h=i(1);let d={},u=new o.default;u.onmessage=(t=>{d.hasOwnProperty(t.data.uuid)&&d[t.data.uuid](t.data)});let c=(t,e,i,s)=>new Promise(a=>{let l=n.Math.generateUUID();d[l]=a,u.postMessage({type:t,properties:e,uuid:l,parentUuid:i,width:s})});t.exports=r.registerComponent("ui-scroll-pane",{schema:{height:{type:"number",default:1.2},width:{type:"number",default:2.9},scrollPadding:{type:"number",default:.05},scrollZOffset:{type:"number",default:0},scrollHandleColor:{default:"#009688"},intersectableClass:{default:"intersectable"},cameraEl:{type:"selector"},lookControlsComponent:{default:"look-controls"}},init(){if(this.setupElements(),this.container=this.el.querySelector(".container"),void 0===this.container)throw'ui-scroll-pane needs an entity inside it with the class "container" - <a-entity class="container"></a-entity>';this.scrollBarWidth=this.rail.getAttribute("width"),this.container.setAttribute("position",-this.data.width/2+" "+this.data.height/2+" 0"),this.rail.setAttribute("position",this.data.width/2+this.data.scrollPadding+" 0 "+(this.data.scrollZOffset+2e-4)),this.handle.setAttribute("position",this.data.width/2+this.data.scrollPadding+" 0 "+(this.data.scrollZOffset+5e-4)),this.el.sceneEl.renderer.localClippingEnabled=!0,this.content_clips=[new n.Plane(new n.Vector3(0,1,0),this.data.height/2),new n.Plane(new n.Vector3(0,-1,0),this.data.height/2),new n.Plane(new n.Vector3(-1,0,0),this.data.width/2),new n.Plane(new n.Vector3(1,0,0),this.data.width/2)];const t=t=>{if(this.data.cameraEl){let e=this.data.cameraEl.components[this.data.lookControlsComponent];e&&e[t]()}},e=t=>this.mouseMove(t);this.handle.addEventListener("mousedown",i=>{t("pause"),this.isDragging=!0,this.handlePos=this.handle.object3D.worldToLocal(i.detail.intersection.point).y,this.backgroundPanel.addEventListener("ui-mousemove",e),h.Utils.isChanging(this.el.sceneEl,this.handle.object3D.uuid),h.Utils.preventDefault(i)});const i=i=>{this.isDragging&&(this.backgroundPanel.removeEventListener("ui-mousemove",e),t("play"),this.isDragging=!1,h.Utils.stoppedChanging(this.handle.object3D.uuid),h.Utils.preventDefault(i))};this.backgroundPanel.addEventListener("mouseup",i),this.backgroundPanel.addEventListener("mouseleave",i),this.rail.addEventListener("mousedown",t=>{h.Utils.isChanging(this.el.sceneEl,this.handle.object3D.uuid),this.isDragging=!0,this.handlePos=0,this.scroll(this.rail.object3D.worldToLocal(t.detail.intersection.point).y),this.backgroundPanel.addEventListener("ui-mousemove",e),h.Utils.preventDefault(t)}),this.updateContent(),this.el.emit("scroll-pane-loaded"),this.setupMouseWheelScroll(),this.el.setContent=this.setContent.bind(this),this.el.updateContent=this.updateContent.bind(this),this.el.scroll=this.scroll.bind(this)},updateContentClips(){this.el.sceneEl.object3D.updateMatrixWorld(),this.content_clips[0].set(new n.Vector3(0,1,0),this.data.height/2),this.content_clips[1].set(new n.Vector3(0,-1,0),this.data.height/2),this.content_clips[2].set(new n.Vector3(-1,0,0),this.data.width/2),this.content_clips[3].set(new n.Vector3(1,0,0),this.data.width/2),this.content_clips[0].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[1].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[2].applyMatrix4(this.el.object3D.matrixWorld),this.content_clips[3].applyMatrix4(this.el.object3D.matrixWorld)},setContent(t,e){return s(this,void 0,void 0,function*(){if(this.container){for(;this.container.firstChild;){let t=this.container.firstChild;t.object3D&&h.Utils.clearObject(t.object3D),this.container.removeChild(t),this.container.firstChild=null}return new Promise(i=>{let a=document.createElement("a-entity");a.setAttribute("visible",!1),a.insertAdjacentHTML("afterbegin",t),a.addEventListener("loaded",t=>{c("reset-layout",null,this.container.yoga_uuid,void 0).then(()=>s(this,void 0,void 0,function*(){if(a.setAttribute("visible",!0),!e)return this.updateContent()})).then(()=>i(a))}),this.container.appendChild(a)})}})},updateContent(t){return s(this,void 0,void 0,function*(){this.updateContentClips(),this.currentUuid=n.Math.generateUUID(),h.Utils.isChanging(this.el.sceneEl,this.currentUuid),this.setChildClips(),yield this.initialiseYoga(this.container),yield c("get-layout",null,this.container.yoga_uuid,void 0).then(e=>{this.content_height=e.data.content_height/100,this.updateYoga(this.container,e.data),this.handleSize=n.Math.clamp(this.data.height/this.content_height,.1,1),this.handle.setAttribute("visible",1!==this.handleSize),this.rail.setAttribute("visible",1!==this.handleSize),this.rail.setAttribute("color",1===this.handleSize?"#efefef":"#fff"),this.handle.setAttribute("height",this.data.height*this.handleSize),t||(this.container.object3D.position.y=this.data.height/2,this.handle.setAttribute("position",this.data.width/2+this.data.scrollPadding+" "+(this.data.height-this.data.height*this.handleSize)/2+" "+(this.data.scrollZOffset+5e-4))),setTimeout(()=>h.Utils.stoppedChanging(this.currentUuid),3e3)})})},mouseMove(t){if(this.isDragging){let e=this.rail.object3D.worldToLocal(t.detail.intersection.point);this.scroll(e.y-this.handlePos)}},scroll(t){let e=-this.data.height/2+this.data.height*this.handleSize/2,i=this.data.height/2-this.data.height*this.handleSize/2,s=n.Math.clamp(t,e,i),a=1===this.handleSize?0:1-(s-e)/(i-e);this.container.object3D.position.y=(this.content_height-this.data.height)*a+this.data.height/2,this.handle.setAttribute("position",this.data.width/2+this.data.scrollPadding+" "+s+" "+(this.data.scrollZOffset+5e-4))},setupMouseWheelScroll(){this.backgroundPanel.addEventListener("ui-mousewheel",t=>{1!==this.handleSize&&(h.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),this.scroll(this.handle.getAttribute("position").y+(t.detail.evt.deltaY<0?.1:-.1)),h.Utils.stoppedChanging(this.el.object3D.uuid),h.Utils.preventDefault(t))})},setupElements(){this.backgroundPanel=document.createElement("a-plane"),this.backgroundPanel.setAttribute("class","background "+this.data.intersectableClass),this.backgroundPanel.setAttribute("width",this.data.width+1),this.backgroundPanel.setAttribute("height",this.data.height+1),this.backgroundPanel.setAttribute("position","0 0 -0.013"),this.backgroundPanel.setAttribute("opacity",1e-4),this.backgroundPanel.setAttribute("transparent",!0),this.el.appendChild(this.backgroundPanel),this.rail=document.createElement("a-plane"),this.rail.setAttribute("class","rail "+this.data.intersectableClass),this.rail.setAttribute("width",.1),this.rail.setAttribute("height",this.data.height),this.rail.setAttribute("shader","flat"),this.el.appendChild(this.rail),this.handle=document.createElement("a-plane"),this.handle.setAttribute("class","handle "+this.data.intersectableClass),this.handle.setAttribute("width",.1),this.handle.setAttribute("height",this.data.height),this.handle.setAttribute("color",this.data.scrollHandleColor),this.handle.setAttribute("shader","flat"),this.el.appendChild(this.handle)},setupYogaNode(t,e,i,s){},initialiseYoga(t){return s(this,void 0,void 0,function*(){let e=0,i=0,s=(t=t||this.container).getAttribute("geometry");switch(t.tagName){case"A-TEXT":case"A-TRIANGLE":case"A-UI-TEXT-INPUT":case"A-UI-NUMBER-INPUT":case"A-UI-INT-INPUT":case"A-UI-INPUT-TEXT":case"A-UI-PASSWORD-INPUT":e=t.getAttribute("width"),i=t.getAttribute("height");break;case"A-UI-BUTTON":case"A-PLANE":case"A-ENTITY":e=Number(s?s.width:t.getAttribute("width")),i=Number(s?s.height:t.getAttribute("height"));break;case"A-UI-FAB-BUTTON":case"A-UI-FAB-BUTTON-SMALL":case"A-CIRCLE":i=e=Number(s?2*s.radius:2*(t.getAttribute("radius")||0));break;case"A-RING":i=e=Number(s?2*s["radius-outer"]:2*(t.getAttribute("radius-outer")||0));break;case"A-UI-SLIDER":case"A-UI-NUMBER":case"A-UI-SWITCH":case"A-UI-CHECKBOX":case"A-UI-RADIO":let a=t.tagName.substr(2).toLowerCase();e=t.getAttribute(a).width,i=t.getAttribute(a).height}let a,n={};t.getAttribute("ui-yoga")&&t.getYogaProperties?n=t.getYogaProperties():(n.setJustifyContent=l.default.JUSTIFY_FLEX_START,n.setFlexDirection=l.default.FLEX_DIRECTION_ROW,n.setAlignContent=l.default.ALIGN_AUTO,n.setFlexWrap=l.default.WRAP_WRAP,t.parentElement&&t.parentElement.yoga_uuid?(n.setMarginRight=5,n.setMarginBottom=5):n.setPadding=2),n.hasOwnProperty("setWidth")||(n.setWidth=e?100*e:"auto"),n.hasOwnProperty("setHeight")||(n.setHeight=i?100*i:"auto"),yield(a=t.parentElement&&t.parentElement.yoga_uuid?c("add-node",n,t.parentElement.yoga_uuid,void 0):c("add-node",n,null,100*this.data.width)).then(e=>{t.yoga_uuid=e.uuid;let i=new Array;for(let e=0;e<t.childNodes.length;e++){let s=t.childNodes[e];1===s.nodeType&&(s.classList.contains("no-yoga-layout")||i.push(this.initialiseYoga(s)))}return Promise.all(i)})})},updateYoga(t,e){for(let i=0;i<t.childNodes.length;i++){let s=t.childNodes[i];if(1===s.nodeType){if(s.classList.contains("no-yoga-layout"))return;let t;e[s.yoga_uuid]||console.log(s,e),t="A-ENTITY"===s.tagName?{x:e[s.yoga_uuid].left/100,y:e[s.yoga_uuid].top/100}:{x:e[s.yoga_uuid].left/100+e[s.yoga_uuid].width/200,y:e[s.yoga_uuid].top/100+e[s.yoga_uuid].height/200},s.setAttribute("position",t.x+" "+-t.y+" 0.0001")}this.updateYoga(s,e)}},setChildClips(t){t=t||this.container;for(let e=0;e<t.childNodes.length;e++){let i=t.childNodes[e];i._content_clips=this.content_clips;let s=()=>{i.object3D&&i.object3D.traverse(t=>{t.material&&(t.material.isRawShaderMaterial&&(t.material.onBeforeCompile=function(t){let e=t.vertexShader.split("\n"),i=e.indexOf("void main(void) {");e.splice(i,0,"#include <clipping_planes_pars_vertex>"),e.splice(i+2,0,"#include <begin_vertex>"),e.splice(e.length-2,0,"#include <project_vertex>"),e.splice(e.length-2,0,"#include <clipping_planes_vertex>"),t.vertexShader=e.join("\n");let s=t.fragmentShader.split("\n"),a=s.indexOf("void main() {");s.splice(a,0,"#include <clipping_planes_pars_fragment>"),s.splice(a+2,0,"#include <clipping_planes_fragment>"),t.fragmentShader=s.join("\n")},t.material.clipping=!0),t.material.clippingPlanes=this.content_clips,t.material.clipShadows=!0,t.material.needsUpdate=!0)})};setTimeout(()=>{if(i.getAttribute){i.getAttribute("text")?i.addEventListener("textfontset",()=>{clearTimeout(this.fontRenderTimeout),this.fontRenderTimeout=setTimeout(()=>h.Utils.stoppedChanging(this.currentUuid),500),s()}):s()}},0),this.setChildClips(i)}}})},function(t,e,i){t.exports=function(){return new Worker(i.p+"96036ce9552ce5ece7aa.worker.js")}},function(t,e,i){"use strict";const s=i(0);t.exports=s.registerComponent("ui-mouse-shim",{onmousewheele:t=>{},lastMouseMoveTime:0,schema:{fps:{type:"number",default:45}},init(){if(!this.el.components.raycaster)throw"ui-mouse-move component needs the raycaster component to be added.";this.onmousewheele=this.onMouseWheel.bind(this),this.el.sceneEl.raycaster=this.el.components.raycaster},pause(){this.el.sceneEl.renderer.domElement.removeEventListener("wheel",this.onmousewheele,!1)},play(){this.el.sceneEl.renderer.domElement.addEventListener("wheel",this.onmousewheele,!1)},onMouseWheel(t){this.emitMouseEvent("ui-mousewheel",t)},tick(){(new Date).getTime()-this.lastMouseMoveTime<1e3/this.data.fps||(this.emitMouseEvent("ui-mousemove",void 0),this.lastMouseMoveTime=(new Date).getTime())},emitMouseEvent(t,e){this.el.sceneEl.cursorPoint&&this.el.components.raycaster.intersections.length&&this.el.sceneEl.renderer.vr.enabled?(this.el.sceneEl.cursorPoint.position.copy(this.el.components.raycaster.intersections[0].point),this.el.sceneEl.cursorPoint.scale.set(1,1,1)):this.el.sceneEl.cursorPoint&&!this.el.sceneEl.hasSceneCursor&&this.el.sceneEl.cursorPoint.scale.set(1e-5,1e-5,1e-5),this.el.components.raycaster.intersections.forEach(i=>{i.object.el&&i.object.el.emit(t,{cursorEl:this.el,intersection:i,evt:e})})}})},function(t,e,i){"use strict";const s=i(0);t.exports=s.registerComponent("ui-double-click",{schema:{timeout:{type:"int",default:200}},init(){let t=0;this.el.addEventListener("mousedown",e=>{let i=(new Date).getTime();i-t<this.data.timeout&&(this.el.emit("dblclick",e),t=0,e.preventDefault()),t=i})}})},function(t,e,i){"use strict";const s=i(0),a=i(1);t.exports=s.registerComponent("ui-checkbox",{width:0,height:0,container:void 0,topLine:void 0,bottomLine:void 0,leftLine:void 0,rightLine:void 0,clickHandler:()=>{},schema:{value:{type:"boolean",default:!1},selectedColor:{default:"#009688"},unselectedColor:{default:"#7f7f7f"},disabledColor:{default:"#afafaf"},indeterminate:{type:"boolean",default:!1},disabled:{type:"boolean",default:!1},intersectableClass:{default:"intersectable"},width:{type:"number",default:.15},height:{type:"number",default:.15}},init(){this.width=.15,this.height=.15,this.container=document.createElement("a-entity"),this.container.setAttribute("class","no-yoga-layout"),this.el.appendChild(this.container),this.setupLines();let t=document.createElement("a-plane");t.setAttribute("width",.105),t.setAttribute("height",.105),t.setAttribute("position","0 0 -0.002"),t.setAttribute("shader","flat"),t.setAttribute("class",this.data.intersectableClass+" no-yoga-layout"),t.setAttribute("opacity",1e-4),t.setAttribute("transparent",!0),this.el.appendChild(t),this.clickHandler=(()=>{this.data.value=!this.data.value,this.click()}),this.setSelected(),this.setDisabled(),this.setTransform(1)},updateSchema(){this.data&&(this.setDisabled(),this.data.disabled?this.data.value&&(this.data.value=!1,this.data.indeterminate=!1,this.click()):this.click())},setTransform(t){this.data.value?(this.container.setAttribute("rotation",{x:0,y:0,z:-45*t}),this.container.setAttribute("position",{x:-.025*t,y:.05*t,z:0})):(this.container.setAttribute("rotation",{x:0,y:0,z:45*t-45}),this.container.setAttribute("position",{x:.025-.025*t,y:.05-.05*t,z:0}))},click(){this.data.indeterminate=!1,this.setSelected(),this.animateSelected()},animateSelected(){let t=this;a.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),new TWEEN.Tween({x:0}).to({x:1},200).onUpdate(function(){t.setTransform(this.x)}).onComplete(function(){a.Utils.stoppedChanging(t.el.object3D.uuid)}).easing(TWEEN.Easing.Exponential.Out).start()},setSelected(){this.data.value?(this.topLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.leftLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.bottomLine.setAttribute("scale","1 1 1"),this.rightLine.setAttribute("scale","1 1 1"),this.bottomLine.setAttribute("position","0.025 -0.05 0"),this.rightLine.setAttribute("position","0.05 0 0"),this.bottomLine.setAttribute("rotation","0 0 90"),this.bottomLine.setAttribute("height",.05),this.bottomLine.setAttribute("color",this.data.selectedColor),this.rightLine.setAttribute("color",this.data.selectedColor)):this.data.indeterminate?(this.topLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.leftLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.bottomLine.setAttribute("scale","1 1 1"),this.rightLine.setAttribute("scale","0.000001 0.000001 0.000001"),this.bottomLine.setAttribute("position","0 0 0"),this.bottomLine.setAttribute("rotation","0 0 90"),this.bottomLine.setAttribute("height",.1),this.bottomLine.setAttribute("color",this.data.unselectedColor),this.rightLine.setAttribute("color",this.data.unselectedColor)):(this.topLine.setAttribute("scale","1 1 1"),this.leftLine.setAttribute("scale","1 1 1"),this.bottomLine.setAttribute("scale","1 1 1"),this.rightLine.setAttribute("scale","1 1 1"),this.bottomLine.setAttribute("height",.1),this.leftLine.setAttribute("position","-0.05 0 0"),this.rightLine.setAttribute("position","0.05 0 0"),this.topLine.setAttribute("position","0 0.05 0"),this.bottomLine.setAttribute("position","0 -0.05 0"),this.topLine.setAttribute("rotation","0 0 90"),this.bottomLine.setAttribute("rotation","0 0 90"),this.bottomLine.setAttribute("color",this.data.unselectedColor),this.rightLine.setAttribute("color",this.data.unselectedColor))},setupLines(){this.leftLine=this.line(!0),this.rightLine=this.line(!0),this.topLine=this.line(!0),this.bottomLine=this.line(!0),this.container.appendChild(this.topLine),this.container.appendChild(this.leftLine),this.container.appendChild(this.bottomLine),this.container.appendChild(this.rightLine)},setDisabled(){this.data.disabled?(this.el.removeEventListener("mousedown",this.clickHandler),this.topLine.setAttribute("color",this.data.disabledColor),this.leftLine.setAttribute("color",this.data.disabledColor),this.rightLine.setAttribute("color",this.data.disabledColor),this.bottomLine.setAttribute("color",this.data.disabledColor)):(this.el.addEventListener("mousedown",this.clickHandler),this.topLine.setAttribute("color",this.data.unselectedColor),this.leftLine.setAttribute("color",this.data.unselectedColor),this.rightLine.setAttribute("color",this.data.value?this.data.selectedColor:this.data.unselectedColor),this.bottomLine.setAttribute("color",this.data.value?this.data.selectedColor:this.data.unselectedColor))},line(t){let e=document.createElement("a-plane");return e.setAttribute("width",t?.01:.105),e.setAttribute("height",t?.105:.01),e.setAttribute("class","no-yoga-layout"),e.setAttribute("shader","flat"),e}})},function(t,e,i){"use strict";const s=i(0),a=i(2),n=i(1);t.exports=s.registerComponent("ui-radio",{width:0,height:0,filled_circle:void 0,isRippling:!1,isSelecting:!1,schema:{value:{default:""},selected:{type:"boolean",default:!1},selectedColor:{default:"#009688"},selectedRadius:{type:"number",default:.045},unselectedColor:{default:"#5f5f5f"},disabledColor:{default:"#afafaf"},disabled:{type:"boolean",default:!1},intersectableClass:{default:"intersectable"},width:{type:"number",default:.15},height:{type:"number",default:.15}},init(){this.width=.15,this.height=.15,this.el.addEventListener("loaded",()=>{let t='\n            <a-circle radius="'+this.data.selectedRadius+'" color="'+(this.data.disabled?this.data.disabledColor:this.data.selectedColor)+'" \n            position="0 0 0" scale="0 0 0" shader="flat" class="no-yoga-layout" segments="6"></a-circle>';this.el.insertAdjacentHTML("beforeend",t),this.filled_circle=this.el.lastChild,this.el.components.material.material.color=new a.Color(this.data.disabled?this.data.disabledColor:this.data.unselectedColor);let e='\n            <a-circle radius="'+this.data.selectedRadius+'" position="0 0 -0.002" opacity="0.0001" transparent="true" \n            shader="flat" class="'+this.data.intersectableClass+' no-yoga-layout" segments="6"></a-circle>';this.el.insertAdjacentHTML("beforeend",e),this.data.selected&&this.filled_circle.addEventListener("loaded",()=>{this.click()}),this.data.disabled||this.el.addEventListener("mousedown",t=>this.click(t))})},deselect(){this.el.setAttribute("selected",!1);let t=this;n.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),new TWEEN.Tween({x:1}).to({x:1e-6},200).onUpdate(function(){t.filled_circle.object3D.scale.set(this.x,this.x,this.x)}).onComplete(()=>{n.Utils.stoppedChanging(t.el.object3D.uuid),this.isRippling=!1}).easing(TWEEN.Easing.Exponential.Out).start()},click(){if([].slice.call(this.el.parentNode.querySelectorAll("a-ring,a-ui-radio")).filter(t=>t!==this.el).forEach(t=>{t.components["ui-radio"]&&"true"===t.getAttribute("selected")&&t.components["ui-radio"].deselect()}),this.el.emit("ui-radio-changed",this.data.value),this.el.setAttribute("selected",!0),this.isSelecting)return;this.isSelecting=!0;let t=this;n.Utils.isChanging(this.el.sceneEl,this.filled_circle.object3D.uuid),new TWEEN.Tween({x:1e-6}).to({x:1},250).onUpdate(function(){t.filled_circle.object3D.scale.set(this.x,this.x,this.x)}).onComplete(()=>{n.Utils.stoppedChanging(this.filled_circle.object3D.uuid),this.isSelecting=!1}).easing(TWEEN.Easing.Exponential.Out).start()}})},function(t,e,i){"use strict";const s=i(2),a=i(0);t.exports=a.registerComponent("ui-border",{schema:{borderRadius:{type:"number",default:.01},curveSegments:{type:"int",default:5},borderWidth:{type:"number",default:.008},color:{default:"#5f5f5f"},numberOfPoints:{type:"int",default:180}},init(){let t=this.el.getObject3D("mesh").geometry.metadata,e=new s.Shape;this.roundedRect(e,t.parameters.width,t.parameters.height,this.data.borderRadius,!1),this.roundedRect(e,t.parameters.width-2*this.data.borderWidth,t.parameters.height-2*this.data.borderWidth,this.data.borderRadius,!0),this.el.setObject3D("mesh",new s.Mesh(new s.ShapeGeometry(e,this.data.curveSegments),new s.MeshBasicMaterial({color:this.data.color})))},roundedRect(t,e,i,a,n){let l,o=-e/2,r=-i/2;n&&(l=t,t=new s.Path),t.moveTo(o,r+a),t.lineTo(o,r+i-a),t.quadraticCurveTo(o,r+i,o+a,r+i),t.lineTo(o+e-a,r+i),t.quadraticCurveTo(o+e,r+i,o+e,r+i-a),t.lineTo(o+e,r+a),t.quadraticCurveTo(o+e,r,o+e-a,r),t.lineTo(o+a,r),t.quadraticCurveTo(o,r,o,r+a),n&&l.holes.push(t)}})},function(t,e,i){"use strict";const s=i(0),a=i(2);t.exports=s.registerComponent("ui-curved-plane",{schema:{depth:{type:"number",default:.03}},init(){let t=this.el.getObject3D("mesh"),e=this.el.getAttribute("width"),i=this.el.getAttribute("height"),s=new a.PlaneGeometry(e,i,5,1),n=new a.CubicBezierCurve3(s.vertices[0],new a.Vector3(.375*e,0,-this.data.depth*e),new a.Vector3(.625*e,0,-this.data.depth*e),s.vertices[s.vertices.length/2-1]).getPoints(Math.abs(s.vertices.length/2)-1);for(let t=1;t<3;t++)for(let e=0;e<n.length;e++)s.vertices[2===t?n.length+e:e].z=n[e].z;t.geometry=s}})},function(t,e,i){"use strict";const s=i(0),a=i(2),n=i(1);t.exports=s.registerComponent("ui-color-picker",{schema:{backingColor:{default:"#dfdfdf"},backingColorBottom:{default:"#4db6ac"},targetEl:{type:"selector"}},init(){this.setupColorWheel(),this.setupBrightnessSlider(),this.setupColorPreview(),this.setupBacking(),this.setupEvents(),this.el.setAttribute("visible",!1),this.el.setAttribute("scale","0.00001 0.00001 0.00001"),this.el.open=this.open.bind(this),this.el.close=this.close.bind(this)},open(){return new Promise(t=>{this.selectCallback=t,this.el.setAttribute("visible",!0),this.tweenPickerScale(1e-5,.5)})},close(){this.tweenPickerScale(.5,1e-5).then(()=>this.el.setAttribute("visible",!1))},tweenPickerScale(t,e){return n.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),new Promise(i=>{let s=this;new TWEEN.Tween({x:t}).to({x:e},250).onUpdate(function(){s.el.setAttribute("scale",this.x+" "+this.x+" "+this.x)}).onComplete(()=>{n.Utils.stoppedChanging(this.el.object3D.uuid),i()}).easing(TWEEN.Easing.Exponential.Out).start()})},setupBacking(){let t=document.createElement("a-circle");t.className="no-yoga-layout",t.setAttribute("position","0 0 -0.001"),t.setAttribute("material",{color:this.data.backingColor,flatShading:!0,shader:"flat",fog:!1,side:"double"}),t.setAttribute("radius",.65),t.setAttribute("theta-length",180),this.el.appendChild(t);let e=document.createElement("a-plane");e.setAttribute("position","0 -0.375 -0.001"),e.className="no-yoga-layout",e.setAttribute("material",{color:this.data.backingColor,flatShading:!0,shader:"flat",fog:!1,side:"double"}),e.setAttribute("width",1.3),e.setAttribute("height",.75),this.el.appendChild(e);let i=document.createElement("a-plane");i.setAttribute("position","0 -1.05 -0.001"),i.className="no-yoga-layout",i.setAttribute("material",{color:this.data.backingColorBottom,flatShading:!0,shader:"flat",fog:!1,side:"double"}),i.setAttribute("width",1.3),i.setAttribute("height",.6),this.el.appendChild(i);let s=document.createElement("a-ui-button");s.setAttribute("position","0.315 -1.17 0.001"),s.className="intersectable no-yoga-layout",s.setAttribute("text-value","SAVE"),s.setAttribute("color","#ffffff"),s.setAttribute("wrap-count","9"),s.setAttribute("ripple-color","#009688"),s.setAttribute("font-color","#009688"),s.setAttribute("ripple-size","0.5 0.18"),s.setAttribute("width",.5),s.setAttribute("height",.18),this.data.targetEl&&this.data.targetEl.addEventListener("mousedown",()=>{this.el.open()}),this.el.appendChild(s),s.addEventListener("mousedown",t=>{let e=this.getHex();this.el.emit("color-selected",e),this.el.close(),n.Utils.preventDefault(t),this.data.targetEl&&this.data.targetEl.setAttribute("color",e),this.selectCallback&&"function"==typeof this.selectCallback&&this.selectCallback(e)});let a=document.createElement("a-ui-button");a.setAttribute("position","-0.315 -1.17 0.001"),a.className="intersectable no-yoga-layout",a.setAttribute("text-value","CANCEL"),a.setAttribute("color","#ffffff"),a.setAttribute("wrap-count","9"),a.setAttribute("ripple-color","#ff9800"),a.setAttribute("font-color","#ff9800"),a.setAttribute("ripple-size","0.5 0.18"),a.setAttribute("width",.5),a.setAttribute("height",.18),this.el.appendChild(a),a.addEventListener("mousedown",t=>{this.el.emit("color-cancelled"),this.el.close(),n.Utils.preventDefault(t)}),this.hexValue=document.createElement("a-text"),this.hexValue.setAttribute("value","#ffffff"),this.hexValue.setAttribute("align","center"),this.hexValue.setAttribute("position","0 -0.9 0.001"),this.hexValue.setAttribute("wrap-count",15),this.hexValue.setAttribute("width",1.3),this.el.appendChild(this.hexValue)},setupColorPreview(){this.colorPreview=document.createElement("a-circle"),this.colorPreview.setAttribute("position","-0.45 -0.9 0"),this.colorPreview.setAttribute("material",{color:"#ffffff",flatShading:!0,transparent:!0,shader:"flat",fog:!1,side:"double"}),this.colorPreview.setAttribute("radius",.05),this.el.appendChild(this.colorPreview)},setupColorWheel(){this.hsv={h:0,s:0,v:1},this.colorWheel=document.createElement("a-circle"),this.colorWheel.setAttribute("material",{color:"#ffffff",flatShading:!0,transparent:!0,shader:"flat",fog:!1,side:"double"}),this.colorWheel.setAttribute("radius",.5),this.el.appendChild(this.colorWheel),this.colorWheel.className="intersectable no-yoga-layout",this.colorWheel.addEventListener("loaded",()=>{let t=this.colorWheel.getObject3D("mesh");t.material=new a.ShaderMaterial({uniforms:{brightness:{type:"f",value:this.hsv.v}},vertexShader:"\n\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n        gl_Position = projectionMatrix * mvPosition;\n      }\n    ",fragmentShader:"\n      #define M_PI2 6.28318530718\n      uniform float brightness;\n      varying vec2 vUv;\n      vec3 hsb2rgb(in vec3 c){\n          vec3 rgb = clamp(abs(mod(c.x * 6.0 + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0, 0.0, 1.0 );\n          rgb = rgb * rgb * (3.0 - 2.0 * rgb);\n          return c.z * mix( vec3(1.0), rgb, c.y);\n      }\n\n      void main() {\n        vec2 toCenter = vec2(0.5) - vUv;\n        float angle = atan(toCenter.y, toCenter.x);\n        float radius = length(toCenter) * 2.0;\n        vec3 color = hsb2rgb(vec3((angle / M_PI2) + 0.5, radius, brightness));\n        gl_FragColor = vec4(color, 1.0);\n      }\n      "}),t.material.needsUpdate=!0})},setupBrightnessSlider(){this.brightnessSlider=document.createElement("a-plane"),this.brightnessSlider.setAttribute("height",.1),this.brightnessSlider.setAttribute("width",.8),this.brightnessSlider.setAttribute("position","0 -0.6 0"),this.brightnessSlider.className="intersectable no-yoga-layout",this.el.appendChild(this.brightnessSlider),this.brightnessSlider.addEventListener("loaded",()=>{this.brightnessSlider.getObject3D("mesh").material=new a.ShaderMaterial({uniforms:{color1:{type:"c",value:new a.Color(16777215)},color2:{type:"c",value:new a.Color(0)}},vertexShader:"\n      varying vec2 vUv;\n      void main(){\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n      }\n    ",fragmentShader:"\n      uniform vec3 color1;\n      uniform vec3 color2;\n      varying vec2 vUv;\n\n      void main(){\n        vec4 c1 = vec4(color1, 1.0);\n  \t    vec4 c2 = vec4(color2, 1.0);\n\n        vec4 color = mix(c2, c1, smoothstep(0.0, 1.0, vUv.x));\n        gl_FragColor = color;\n      }\n    "}),this.brightnessSlider.getObject3D("mesh").material.needsUpdate=!0});let t=document.createElement("a-triangle");t.setAttribute("vertex-a","0 0.05 0"),t.setAttribute("vertex-b","-0.05 -0.05 0"),t.setAttribute("vertex-c","0.05 -0.05 0"),t.setAttribute("position","-0.475 -0.6 0"),t.setAttribute("rotation","0 0 90"),t.setAttribute("shader","flat"),t.setAttribute("color","#009688"),t.setAttribute("ui-btn",""),t.className="intersectable",this.el.appendChild(t);let e=document.createElement("a-triangle");e.setAttribute("vertex-a","0 0.05 0"),e.setAttribute("vertex-b","-0.05 -0.05 0"),e.setAttribute("vertex-c","0.05 -0.05 0"),e.setAttribute("position","0.475 -0.6 0"),e.setAttribute("rotation","0 0 -90"),e.setAttribute("color","#009688"),e.setAttribute("shader","flat"),e.setAttribute("ui-btn",""),e.className="intersectable",this.el.appendChild(e),t.addEventListener("mousedown",()=>{n.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),this.colorWheel.getObject3D("mesh").material.uniforms.brightness.value=0,this.hsv.v=0,this.hsv.h=0,this.hsv.s=0,this.updateColor(),n.Utils.stoppedChanging(this.el.object3D.uuid)}),e.addEventListener("mousedown",()=>{n.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),this.colorWheel.getObject3D("mesh").material.uniforms.brightness.value=1,this.hsv.v=1,this.hsv.h=0,this.hsv.s=0,this.updateColor(),n.Utils.stoppedChanging(this.el.object3D.uuid)})},getHex(){let t=this.hsvToRgb(this.hsv),e="rgb("+t.r+", "+t.g+", "+t.b+")";return"#"+new a.Color(e).getHexString()},updateColor(){let t=this.getHex();this.colorPreview.setAttribute("color",t),this.hexValue.setAttribute("value",t)},setupEvents(){this.colorWheel.addEventListener("mousedown",t=>{this.isMouseDown=!0,n.Utils.preventDefault(t)}),this.colorWheel.addEventListener("mouseup",t=>{console.log("mouseup on color picker"),this.isMouseDown=!1,n.Utils.preventDefault(t)}),this.colorWheel.addEventListener("ui-mousemove",t=>{if(!this.isMouseDown)return;n.Utils.preventDefault(t),n.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);let e=this.colorWheel.getObject3D("mesh"),i=t.detail.intersection.point;e.updateMatrixWorld(),e.worldToLocal(i);let s=Math.sqrt(i.x*i.x+i.y*i.y),a=((Math.PI+Math.atan2(i.y,i.x))*(180/Math.PI)+180)%360;this.hsv.h=a/360,this.hsv.s=s/.5,this.updateColor(),n.Utils.stoppedChanging(this.el.object3D.uuid)}),this.brightnessSlider.addEventListener("mousedown",t=>{this.isMouseDown=!0,n.Utils.preventDefault(t)}),this.brightnessSlider.addEventListener("mouseup",t=>{this.isMouseDown=!1,n.Utils.preventDefault(t)}),this.brightnessSlider.addEventListener("ui-mousemove",t=>{if(n.Utils.preventDefault(t),n.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),!this.isMouseDown)return;let e=this.brightnessSlider.getObject3D("mesh"),i=this.colorWheel.getObject3D("mesh"),s=t.detail.intersection.point;e.updateMatrixWorld(),e.worldToLocal(s);let a=(s.x+.4)/.8;i.material.uniforms.brightness.value=a,this.hsv.v=a,this.updateColor(),n.Utils.stoppedChanging(this.el.object3D.uuid)})},hsvToRgb(t){let e,i,s,n,l,o,r,h,d=a.Math.clamp(t.h,0,1),u=a.Math.clamp(t.s,0,1),c=t.v;switch(o=c*(1-u),r=c*(1-(l=6*d-(n=Math.floor(6*d)))*u),h=c*(1-(1-l)*u),n%6){case 0:e=c,i=h,s=o;break;case 1:e=r,i=c,s=o;break;case 2:e=o,i=c,s=h;break;case 3:e=o,i=r,s=c;break;case 4:e=h,i=o,s=c;break;case 5:e=c,i=o,s=r}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*s)}}})},function(t,e,i){"use strict";const s=i(0);t.exports=s.registerComponent("ui-modal",{modalPanel:void 0,mainComponents:{},modalComponents:{},openModal:()=>{},modalTween:void 0,schema:{modal:{type:"selector"},main:{type:"selector"}},init(){if(this.data.modal&&this.data.main){this.modalPanel=document.querySelector(this.data.modal.getAttribute("ui-panel")),this.mainComponents=this.data.main.components,this.modalComponents=this.data.modal.components,this.modalComponents&&this.modalComponents["ui-renderer"]&&this.modalComponents["ui-renderer"].pause();let t=this.data.modal.querySelectorAll(".close-modal");for(let e=0;e<t.length;e++){t[e].addEventListener("mousedown",()=>{this.close()})}this.openModal=this.open.bind(this),this.el.addEventListener("mousedown",this.openModal),this.data.main.modal=this,this.el.open=this.open.bind(this),this.el.close=this.close.bind(this)}},remove(){this.el.removeEventListener("mousedown",this.openModal)},open(){this.mainComponents&&this.mainComponents["ui-renderer"]&&(this.mainComponents["ui-renderer"].pauseRender(),this.tweenModalScale(1e-7,1),this.modalComponents["ui-renderer"].play())},close(){this.modalComponents["ui-renderer"].pause(),this.mainComponents["ui-renderer"].play(),this.mainComponents["ui-renderer"].playRender(),this.tweenModalScale(1,1e-7).then(()=>{this.el.sceneEl.emit("modal-closed")})},tweenModalScale(t,e){return new Promise(i=>{let s=this;this.modalTween&&this.modalTween.stop(),this.modalTween=new TWEEN.Tween({x:t}).to({x:e},250).onUpdate(function(){s.modalPanel&&s.modalPanel.setAttribute("scale",this.x+" "+this.x+" "+this.x)}).onComplete(i).easing(TWEEN.Easing.Exponential.Out).start()})}})},function(t,e,i){"use strict";const s=i(2),a=i(0),n=i(1);t.exports=a.registerComponent("ui-renderer",{schema:{uiPanel:{type:"selector"},lookControlsEl:{type:"selector"},lookControlsComponent:{default:"look-controls"},panelPosition:{type:"vec3",default:{x:0,y:1.6,z:-1}},panelSize:{type:"vec2",default:{x:6,y:3}},renderResolution:{type:"vec2",default:{x:1024,y:512}},debugRaycaster:{type:"boolean",default:!1},fps:{type:"number",default:45},intersectableClass:{default:"intersectable"},debug:{type:"boolean",default:!1},initDelay:{type:"int",default:500}},init(){this.setupBackDrop(),this.data.uiPanel?this.meshEl=this.data.uiPanel:this.meshEl=this.setupUIPanel(),this.el.object3D.parent.remove(this.el.object3D),this.camera=new s.PerspectiveCamera(100,2,.1,1e3),this.renderTarget=new s.WebGLRenderTarget(this.data.renderResolution.x,this.data.renderResolution.y),this.meshEl.getObject3D("mesh").material.map=this.renderTarget.texture,this.meshEl.emit("texture-ready",this.renderTarget.texture),this.stoppedRendering=!1,this.isRendering=!0,this.el.sceneEl.addEventListener("ui-changing",()=>{this.stoppedRendering=!1,this.isRendering=!0}),this.el.sceneEl.addEventListener("ui-changing-stopped",()=>{this.isRendering=!1}),this.raycaster=new s.Raycaster,this.helper=new s.Mesh(new s.SphereGeometry(.01),new s.MeshBasicMaterial({color:"#ff0000"})),this.data.debugRaycaster&&this.el.object3D.add(this.helper),this.lastRenderTime=0,this.isFrozen=!1,this.el.pauseRender=this.pauseRender.bind(this),this.el.playRender=this.playRender.bind(this),this.isReady=!1,setTimeout(()=>{this.isReady=!0,n.Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid),setTimeout(()=>{n.Utils.stoppedChanging(this.el.object3D.uuid)},250)},this.data.initDelay)},pauseRender(t){return this.playRender(t,!0)},playRender(t,e){let i=this;return new Promise(s=>{if(i.isFrozen===e||i.isAnimatingBackground)return s();i.isAnimatingBackground=!0,i.isFrozen||this.backdrop.setAttribute("scale","1 1 1");let a=i.isFrozen?.9:1e-6,l=i.isFrozen?1e-6:.9,o=i.isFrozen?t||350:t||500;i.isFrozen&&(i.isFrozen=e,i.play()),n.Utils.isChanging(i.el.sceneEl,i.backdrop.uuid),i.renderTween&&i.renderTween.stop(),i.renderTween=new TWEEN.Tween({x:a}).to({x:l},o).onUpdate(function(){i.backdrop.setAttribute("opacity",this.x)}).onComplete(()=>{i.isFrozen=e,i.isAnimatingBackground=!1,i.isFrozen?i.pause():this.backdrop.setAttribute("scale","0.000001 0.000001 0.000001"),n.Utils.stoppedChanging(this.backdrop.uuid),s()}).easing(TWEEN.Easing.Exponential.Out).start()})},setupBackDrop(){this.backdrop=document.createElement("a-plane"),this.backdrop.setAttribute("transparent",!0),this.backdrop.setAttribute("opacity",1e-6),this.backdrop.setAttribute("color","#000"),this.backdrop.setAttribute("shader","flat"),this.backdrop.setAttribute("position",{x:0,y:0,z:-.2}),this.backdrop.setAttribute("width",1),this.backdrop.setAttribute("height",1),this.backdrop.setAttribute("scale","0.000001 0.000001 0.000001"),this.el.appendChild(this.backdrop)},play(){this.lastMouseMoveTime=0,this.click=(t=>this.mouseEvent("click",this.lastMoveEvent||t)),this.mousedown=(t=>this.mouseEvent("mousedown",this.lastMoveEvent||t)),this.mouseup=(t=>this.mouseEvent("mouseup",this.lastMoveEvent||t)),this.mousewheel=(t=>this.mouseEvent("ui-mousewheel",t.detail.evt)),this.mousemove=(t=>{this.lastMoveEvent=t,this.mouseEvent("ui-mousemove",t)}),this.meshEl.addEventListener("mousedown",this.mousedown),this.meshEl.addEventListener("mouseup",this.mouseup),this.meshEl.addEventListener("click",this.click),this.meshEl.addEventListener("ui-mousemove",this.mousemove),this.meshEl.addEventListener("ui-mousewheel",this.mousewheel)},pause(){this.meshEl.removeEventListener("mousedown",this.mousedown),this.meshEl.removeEventListener("mouseup",this.mouseup),this.meshEl.removeEventListener("click",this.click),this.meshEl.removeEventListener("ui-mousemove",this.mousemove),this.meshEl.removeEventListener("ui-mousewheel",this.mousewheel)},setupUIPanel(){let t=document.createElement("a-plane");return t.setAttribute("position",this.data.panelPosition),t.setAttribute("width",this.data.panelSize.x),t.setAttribute("height",this.data.panelSize.y),this.el.sceneEl.appendChild(t),t},mouseEvent(t,e){let i={x:0,y:0};if(e.detail&&e.detail.intersection){let t=this.meshEl.object3D.worldToLocal(e.detail.intersection.point.clone());i={x:t.x/this.meshEl.getAttribute("width")*2,y:t.y/this.meshEl.getAttribute("height")*2}}"ui-mousewheel"===t&&(e.detail||e.deltaX||e.deltaY)&&(i.deltaX=e.detail?e.detail.deltaX:e.deltaX,i.deltaY=e.detail?e.detail.deltaY:e.deltaY),"mousedown"===t&&this.lookControlsEl&&this.lookControlsEl.components["look-controls"]&&this.lookControlsEl.components[this.data.lookControlsComponent].pause(),"mouseup"===t&&this.lookControlsEl&&this.lookControlsEl.components["look-controls"]&&this.lookControlsEl.components[this.data.lookControlsComponent].play(),this.raycastIntersections(e,i,t)},raycastIntersections(t,e,i){if(!this.camera||this.isFrozen||this.isAnimatingBackground)return;this.raycaster.setFromCamera(e,this.camera);let s=this.raycaster.intersectObjects(this.el.object3D.children,!0);this.prevIntersectionEls=this.prevIntersectionEls||[];let a=new Array;if(s.length&&this.data.debugRaycaster){let t=s[0].point;s[0].object===this.helper&&s.length>1&&(t=s[1].point),this.helper.position.copy(t),this.helper.position.x-=.03}let n=!1;for(let e=0;e<s.length;e++){let l=s[e];if(l.object.el&&l.object.el.classList.contains(this.data.intersectableClass)){let e={intersection:l,evt:t,preventDefault:()=>{n=!0}};-1!==this.prevIntersectionEls.indexOf(l.object.el)||n||l.object.el.emit("mouseenter",e),n&&"ui-mousewheel"!==i||l.object.el.emit(i,e),l.object.el.intersection=l,a.push(l.object.el)}}for(let t=0;t<this.prevIntersectionEls.length;t++){let e=this.prevIntersectionEls[t];-1===a.indexOf(e)&&e.emit("mouseleave",{intersection:e.intersection})}this.prevIntersectionEls=a},tick(t){if(this.isFrozen||this.stoppedRendering||!this.isReady)return;if(t-this.lastRenderTime<1e3/this.data.fps&&this.isRendering)return;this.el.object3D.traverse(t=>{t.updateMatrixWorld()});let e=this.el.sceneEl.renderer,i=e.vr.enabled;e.vr.enabled=!1,e.render(this.el.object3D,this.camera,this.renderTarget),e.vr.enabled=i,this.lastRenderTime=t,this.isRendering||(this.stoppedRendering=!0)}})}]);
//# sourceMappingURL=aframe-material-collection.js.map