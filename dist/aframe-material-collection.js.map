{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"AFRAME\"","webpack:///./src/utils.ts","webpack:///external \"THREE\"","webpack:///./src/components/yoga.ts","webpack:///./src/index.ts","webpack:///./src/ui.ts","webpack:///./src/primitives/button.ts","webpack:///./src/primitives/fab_button.ts","webpack:///./src/primitives/switch.ts","webpack:///./src/primitives/slider.ts","webpack:///./src/primitives/number.ts","webpack:///./src/primitives/toast.ts","webpack:///./src/primitives/checkbox.ts","webpack:///./src/primitives/radio.ts","webpack:///./src/primitives/input-text.ts","webpack:///./src/primitives/text-input.ts","webpack:///./src/primitives/number-input.ts","webpack:///./src/primitives/int-input.ts","webpack:///./src/primitives/password-input.ts","webpack:///./src/primitives/scroll-pane.ts","webpack:///./src/primitives/renderer.ts","webpack:///./src/components/text.ts","webpack:///./src/components/input-text.ts","webpack:///./src/components/btn.ts","webpack:///./src/components/icon.ts","webpack:///./src/components/rounded.ts","webpack:///./src/components/ripple.ts","webpack:///./src/components/slider.ts","webpack:///./src/components/number.ts","webpack:///./src/components/switch.ts","webpack:///./src/components/toast.ts","webpack:///./src/components/scroll-pane.ts","webpack:///./src/yoga-worker.ts","webpack:///./src/components/mouse-shim.ts","webpack:///./src/components/double-click.ts","webpack:///./src/components/checkbox.ts","webpack:///./src/components/radio.ts","webpack:///./src/components/border.ts","webpack:///./src/components/curved-plane.ts","webpack:///./src/components/color-picker.ts","webpack:///./src/components/modal.ts","webpack:///./src/components/renderer.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","AFRAME","Utils","[object Object]","empty","this","changesDetected","is_changeing","scene","emit","e","detail","preventDefault","string","length","substr","ref","Date","getTime","now","Error","stack","isFirstOrLastChange","traverse","child","material","map","dispose","geometry","THREE","yoga_layout_1","registerComponent","schema","alignContent","default","alignItems","alignSelf","display","flex","type","flexDirection","flexWrap","aspectRatio","overflow","justifyContent","border","borderLeft","borderRight","borderTop","borderBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","margin","marginLeft","marginRight","marginTop","marginBottom","marginAuto","marginAutoLeft","marginAutoRight","marginAutoTop","marginAutoBottom","marginPercent","marginPercentLeft","marginPercentRight","marginPercentTop","marginPercentBottom","flexBasis","flexBasisPercent","flexGrow","flexShrink","maxHeight","minHeight","maxWidth","minWidth","maxHeightPercent","minHeightPercent","maxWidthPercent","minWidthPercent","position","positionLeft","positionRight","positionTop","positionBottom","positionPercent","positionPercentLeft","positionPercentRight","positionPercentTop","positionPercentBottom","width","height","widthAuto","heightAuto","widthPercent","heightPercent","el","getYogaProperties","getProperties","setProperties","properties","data","mapPropertyToEnum","push","method","charAt","toUpperCase","propertiesObj","indexOf","enums","align","edge","count","ALIGN_COUNT","auto","ALIGN_AUTO","flex-start","ALIGN_FLEX_START","center","ALIGN_CENTER","flex-end","ALIGN_FLEX_END","stretch","ALIGN_STRETCH","baseline","ALIGN_BASELINE","space-between","ALIGN_SPACE_BETWEEN","space-around","ALIGN_SPACE_AROUND","dimension","DIMENSION_COUNT","DIMENSION_WIDTH","DIMENSION_HEIGHT","direction","DIRECTION_COUNT","inherit","DIRECTION_INHERIT","ltr","DIRECTION_LTR","rtl","DIRECTION_RTL","DISPLAY_COUNT","DISPLAY_FLEX","none","DISPLAY_NONE","EDGE_COUNT","left","EDGE_LEFT","top","EDGE_TOP","right","EDGE_RIGHT","bottom","EDGE_BOTTOM","start","EDGE_START","end","EDGE_END","horizontal","EDGE_HORIZONTAL","vertical","EDGE_VERTICAL","all","EDGE_ALL","experimental","EXPERIMENTAL_FEATURE_COUNT","flex-basis","EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS","FLEX_DIRECTION_COUNT","column","FLEX_DIRECTION_COLUMN","column-reverse","FLEX_DIRECTION_COLUMN_REVERSE","row","FLEX_DIRECTION_ROW","reverse","FLEX_DIRECTION_ROW_REVERSE","JUSTIFY_COUNT","JUSTIFY_FLEX_START","JUSTIFY_CENTER","JUSTIFY_FLEX_END","between","JUSTIFY_SPACE_BETWEEN","around","JUSTIFY_SPACE_AROUND","evenly","JUSTIFY_SPACE_EVENLY","logLevel","LOG_LEVEL_COUNT","error","LOG_LEVEL_ERROR","warn","LOG_LEVEL_WARN","info","LOG_LEVEL_INFO","debug","LOG_LEVEL_DEBUG","verbose","LOG_LEVEL_VERBOSE","fatal","LOG_LEVEL_FATAL","measureMode","MEASURE_MODE_COUNT","undefined","MEASURE_MODE_UNDEFINED","exactly","MEASURE_MODE_EXACTLY","at-most","MEASURE_MODE_AT_MOST","nodeType","NODE_TYPE_COUNT","NODE_TYPE_DEFAULT","text","NODE_TYPE_TEXT","OVERFLOW_COUNT","visible","OVERFLOW_VISIBLE","hidden","OVERFLOW_HIDDEN","scroll","OVERFLOW_SCROLL","positionType","POSITION_TYPE_COUNT","relative","POSITION_TYPE_RELATIVE","absolute","POSITION_TYPE_ABSOLUTE","printOptions","PRINT_OPTIONS_COUNT","layout","PRINT_OPTIONS_LAYOUT","style","PRINT_OPTIONS_STYLE","children","PRINT_OPTIONS_CHILDREN","unit","UNIT_COUNT","UNIT_UNDEFINED","point","UNIT_POINT","percent","UNIT_PERCENT","UNIT_AUTO","WRAP_COUNT","no-wrap","WRAP_NO_WRAP","wrap","WRAP_WRAP","wrap-reverse","WRAP_WRAP_REVERSE","version","__importStar","console","log","UI","Promise","resolve","then","window","utils_1","utils","aframe_1","registerPrimitive","extendDeep","primitives","getMeshMixin","defaultComponents","primitive","color","shader","ui-btn","ui-rounded","borderRadius","ui-ripple","size","x","y","clampToSquare","zIndex","font","zOffset","wrapCount","alphaTest","mappings","transparent","font-color","ripple-color","ripple-size","ripple-z-index","text-value","wrap-count","border-radius","curve-segments","disabled","hover-height","active-height","prevent-updates","radius","segments","fadeDelay","duration","ui-icon","icon-color","src","coords","ui-switch","ui-slider","camera-el","ui-number","opacity","curveSegments","ui-checkbox","indeterminate","ui-radio","radiusInner","radiusOuter","segmentsTheta","selected","ui-input-text","placeHolder","ui-double-click","background-color","place-holder","rig-el","tab-next","look-controls-component","wasd-controls-component","ui-text","ui-scroll-pane","scroll-z-offset","handle-color","scroll-padding","look-controls-el","ui-renderer","ui-panel","panel-position","panel-size","render-resolution","debug-raycaster","fps","intersectable-class","render-debug","init-delay","lineFocusColor","lineBlurColor","disabledColor","fontFamily","fontColor","intersectableClass","three_1","container","backing","underline","selectionHighlight","carret","alphabet","startSelection","scrollOffset","scrollIndex","carretInterval","shiftStartPos","chars","Array","charsAllowed","blurHandler","isMoving","isFocused","mousemove","keydown","keySelectAll","keyCut","keyCopy","keyPaste","positions","depends","content_clips","Plane","Vector3","cameraEl","rigEl","tabNext","backgroundColor","lookControlsComponent","wasdControlsComponent","setupElements","setupScrollClips","addEventListener","selectionStart","selectionLength","split","char","sceneEl","defaultKeypressPrevented","blur","onMousemove","handleKeyboardEvent","selectAll","cutText","copyText","pasteText","focus","removeEventListener","setSelection","setAttribute","setValue","setTimeout","setScrollClips","getValue","object3D","_linesTotal","getAttribute","increaseWrap","set","applyMatrix4","matrixWorld","clippingPlanes","_content_clips","concat","selectionHeight","getObject3D","clipShadows","needsUpdate","is_float","keyCode","ctrlKey","metaKey","output","test","numberOnly","setupCarret","playPauseCamera","pop","clearInterval","stoppedChanging","uuid","navigator","clipboard","readText","splice","apply","slice","join","writeText","stopPropagation","code","check","floatOnly","shiftKey","Math","abs","setScrolledValue","setCharacters","currentSelection","getSelectionPosition","selection","getNearestGlyph","document","createElement","className","appendChild","setInterval","isChanging","updateMatrixWorld","worldToLocal","intersection","clone","components","glyphs","scale","lastPosition","glyph","currentWidth","current","id","startPosition","endPosition","Number","parentWidth","tempPosition","startDiff","POSITIVE_INFINITY","endDiff","currentPosition","carretPosition","defaultZ","is_clicked","hoverHeight","activeHeight","preventUpdates","z","mouseEnter","mouseDown","mouseUp","mouseLeave","_this","tween","resetAnimation","start_z","from","to","callback","complete","TWEEN","Tween","onUpdate","onComplete","easing","Easing","Exponential","Out","icon","spriteCoords","w","mesh","roundedRectShape","Shape","ctx","moveTo","lineTo","quadraticCurveTo","metadata","parameters","ShapeBufferGeometry","rippleGeometry","ripple","isRippling","fadeDuration","CircleGeometry","max","Mesh","MeshBasicMaterial","add","click","setRippleClips","tweenSize","tweenOpacity","delay","progressColor","handleColor","handleDisabledColor","railColor","handleZIndex","handleRadius","scrollZOffset","scroll_perc","backgroundPanel","handleEl","railEl","getRailObject","slide","lookControls","mouseMove","isDragging","handlePos","relatedTarget","endScroll","positionX","isPerc","min","scroll_pos","clamp","progress","pos","increment","numberText","toFixed","upButton","downButton","switchDuration","setDisabled","handle","insertAdjacentHTML","lastChild","rail","clickHandler","tweenHandle","tweenProgress","toastEl","message","originalPosition","closeTween","stop","shorten","__importDefault","yoga_worker_ts_1","workerResolves","yogaWorker","onmessage","event","sendMessage","parentUuid","generateUUID","postMessage","scrollPadding","scrollHandleColor","querySelector","scrollBarWidth","renderer","localClippingEnabled","updateContent","setupMouseWheelScroll","setContent","body","noAutoReload","firstChild","clearObject","removeChild","loadedWrapper","yoga_uuid","__awaiter","should_not_scroll","updateContentClips","currentUuid","setChildClips","initialiseYoga","content_height","updateYoga","handleSize","positionY","evt","deltaY","node","parent","geo","tagName","componentName","toLowerCase","promise","setJustifyContent","setFlexDirection","setAlignContent","setFlexWrap","parentElement","setMarginRight","setMarginBottom","setPadding","setWidth","setHeight","resp","promises","childNodes","classList","contains","isRawShaderMaterial","onBeforeCompile","vertexParts","vertexShader","vertexMainIndex","fragmentParts","fragmentShader","fragmentMainIndex","clipping","clearTimeout","fontRenderTimeout","Worker","onmousewheele","lastMouseMoveTime","raycaster","onMouseWheel","domElement","emitMouseEvent","eventType","cursorPoint","intersections","vr","enabled","copy","hasSceneCursor","forEach","cursorEl","timeout","last_click","topLine","bottomLine","leftLine","rightLine","selectedColor","unselectedColor","setupLines","setSelected","setTransform","animateSelected","line","is_vertical","filled_circle","isSelecting","selectedRadius","Color","parentNode","querySelectorAll","filter","ring","deselect","borderWidth","numberOfPoints","roundedRect","setObject3D","ShapeGeometry","isHole","shapeCtx","Path","holes","depth","browser_pane","PlaneGeometry","planePoints","CubicBezierCurve3","vertices","getPoints","edgeI","pointI","backingColor","backingColorBottom","targetEl","setupColorWheel","setupBrightnessSlider","setupColorPreview","setupBacking","setupEvents","open","close","selectCallback","tweenPickerScale","circleBacking","flatShading","fog","side","planeBacking","planeBackingBottom","buttonConfirm","hex","getHex","buttonCancel","hexValue","colorPreview","hsv","h","v","colorWheel","ShaderMaterial","uniforms","brightness","brightnessSlider","color1","color2","brightnessResetLeft","brightnessResetRight","updateColor","rgb","hsvToRgb","g","b","getHexString","isMouseDown","polarPosition","sqrt","angle","PI","atan2","f","q","floor","round","modalPanel","mainComponents","modalComponents","openModal","modalTween","modal","main","pause","close_buttons","pauseRender","tweenModalScale","play","playRender","uiPanel","lookControlsEl","panelPosition","panelSize","renderResolution","debugRaycaster","initDelay","setupBackDrop","meshEl","setupUIPanel","remove","camera","PerspectiveCamera","renderTarget","WebGLRenderTarget","texture","stoppedRendering","isRendering","Raycaster","helper","SphereGeometry","lastRenderTime","isFrozen","isReady","time","isPaused","isAnimatingBackground","backdrop","fromScale","toScale","renderTween","mouseEvent","lastMoveEvent","mousedown","mouseup","mousewheel","mouse","localPoint","deltaX","raycastIntersections","setFromCamera","intersectObjects","prevIntersectionEls","intersectionEls","intersectionPoint","defaultPrevented","currentEvent","intersectionEl","delta","vrModeEnabled","render"],"mappings":"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","file":"aframe-material-collection.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = AFRAME;","import {Scene} from \"aframe\";\nimport {Mesh, Object3D} from \"three\";\n\nexport class Utils{\n    static changesDetected: any = {};\n    static is_changeing: boolean = false;\n    static scene: Scene | undefined;\n\n\n    constructor(){\n        // setInterval(()=>{\n        //     let now = new Date().getTime();\n        //     for(let key in this.changesDetected){\n        //         let change = this.changesDetected[key];\n        //         if(change.t&&now-change.t>2000){\n        //             this.stoppedChanging(key);\n        //         }\n        //     }\n        // },2000);\n    }\n    static isFirstOrLastChange(){\n        let empty = true;\n\n        for(let key in this.changesDetected) {\n            empty = false;\n            break;\n        }\n\n        if(!this.is_changeing&&!empty){\n            this.scene!!.emit('ui-changing');\n            this.is_changeing = true;\n        }else if(this.is_changeing&&empty){\n            if(this.is_changeing){\n                this.scene!!.emit('ui-changing-stopped');\n                this.is_changeing = false;\n            }\n        }\n    }\n    /*getPointInBetweenByPerc(pointA, pointB, percentage) {\n\n        var dir = pointB.clone().sub(pointA);\n        var len = dir.length();\n        dir = dir.normalize().multiplyScalar(len*percentage);\n        return pointA.clone().add(dir);\n\n    }*/\n    static preventDefault(e: any){\n        if(e.detail && e.detail.preventDefault && typeof e.detail.preventDefault === \"function\"){\n            e.detail.preventDefault();\n        }\n    }\n    static shorten(string: string, length: number){\n        return string.length>length?string.substr(0,length)+\"...\":string;\n    }\n    /*uniqueNumberedName(newName: string,names: Array<string>, key: string){\n        let currentNumber = 0;\n        let nameLessNumber = newName;\n        for(let i = 0; i < names.length; i++){\n            let name;\n            if(key){\n                name = names[i][key].split('~#');\n            }else{\n                name = names[i].split('~#');\n            }\n            let existingNumber = name.length>1?Number(name.pop()):0;\n            existingNumber = existingNumber || 0;\n            nameLessNumber = name.join('');\n            if(newName===nameLessNumber&&existingNumber>currentNumber){\n                currentNumber = existingNumber;\n            }\n        }\n        if(currentNumber>0){\n            newName+=\"~# \"+(currentNumber+1)\n        }\n        return newName;\n    }*/\n    /*ucFirst(string: string) {\n        return string.charAt(0).toUpperCase() + string.slice(1);\n    }\n    zeroPad(number,length){\n        return (\"0000000\"+number).slice(-length);\n    }*/\n    static isChanging(scene: Scene | undefined, ref: string){\n        let index = this.changesDetected[ref];\n        if(!index){\n            this.scene = this.scene||scene;\n            let now = new Date().getTime();\n            this.changesDetected[ref] = {t:now,e:new Error().stack};\n            this.isFirstOrLastChange();\n        }else{\n            this.changesDetected[ref].t = new Date().getTime();\n        }\n    }\n    static stoppedChanging(ref: string){\n        delete this.changesDetected[ref];\n        this.isFirstOrLastChange();\n    }\n    /*copyToClipboard(text: string){\n        navigator.clipboard.writeText(text).then(()=>{\n        },(err: Error)=> {\n            console.error('copy to clipboard failed:', err);\n        });\n    }*/\n    static clearObject(object: any){\n        object.traverse((child: any) =>{\n            if(child.material) {\n                if(child.material.length){\n                    for(let i =0; i < child.material.length; i++){\n                        if(child.material[i].map){\n                            child.material[i].map.dispose();\n                        }\n                        child.material[i].dispose();\n                    }\n                }else{\n                    if(child.material.map){\n                        child.material.map.dispose();\n                    }\n                    child.material.dispose();\n                }\n            }\n            if(child.geometry){\n                child.geometry.dispose();\n            }\n        });\n    }\n}","module.exports = THREE;","/* global Yoga */\n\nimport UI from '../ui';\nimport Yoga from \"yoga-layout\";\n\n/**\n * Yogo Layout Engine mapped to a Component for aframe-material-collection - https://yogalayout.com\n * @namespace aframe-material-collection\n * @component ui-yoga\n * @author Shane Harris\n */\n\n// if (typeof Yoga === 'undefined') {\n//     throw 'ui-yoga component requires the Yoga Layout Engine to be loaded - https://yogalayout.com';\n// }\n// Map yoga enums to frendly names.\n// TODO: Need to expose the padding/border/margin side as seperate options to allow for combinations.\nexport = AFRAME.registerComponent('ui-yoga', {\n    schema: {\n        alignContent: {default: 'flex-start'},\n        alignItems: {default: 'auto'},\n        alignSelf: {default: 'auto'},\n        display: {default: 'default'},\n        flex: {type:'number',default: 1},\n        flexDirection: {default: 'row'},\n        flexWrap:{default: 'default'},\n        aspectRatio: {default: 'default'},\n        overflow:{default:'default'},\n        justifyContent:{default:'start'},\n        border: {type:'int',default: 0},\n        borderLeft: {type:'int',default: 0},\n        borderRight: {type:'int',default: 0},\n        borderTop: {type:'int',default: 0},\n        borderBottom: {type:'int',default: 0},\n        padding: {type:'int',default: 0},\n        paddingLeft: {type:'int',default: 0},\n        paddingRight: {type:'int',default: 0},\n        paddingTop: {type:'int',default: 0},\n        paddingBottom: {type:'int',default: 0},\n        margin: {type:'int',default: 0},\n        marginLeft: {type:'int',default: 0},\n        marginRight: {type:'int',default: 0},\n        marginTop: {type:'int',default: 0},\n        marginBottom: {type:'int',default: 0},\n        marginAuto: {type:'boolean',default: false},\n        marginAutoLeft: {type:'boolean',default: false},\n        marginAutoRight: {type:'boolean',default: false},\n        marginAutoTop: {type:'boolean',default: false},\n        marginAutoBottom: {type:'boolean',default: false},\n        marginPercent:{type:'number',default: 0},\n        marginPercentLeft: {type:'int',default: 0},\n        marginPercentRight: {type:'int',default: 0},\n        marginPercentTop: {type:'int',default: 0},\n        marginPercentBottom: {type:'int',default: 0},\n        flexBasis: {default: 'default'},\n        flexBasisPercent: {type:'number',default: 0},\n        flexGrow:{type:'number',default: 0},\n        flexShrink:{type:'number',default: 1},\n        maxHeight:{default: 'default'},\n        minHeight:{default: 'default'},\n        maxWidth:{default: 'default'},\n        minWidth:{default: 'default'},\n        maxHeightPercent:{default: 'default'},\n        minHeightPercent:{default: 'default'},\n        maxWidthPercent:{default: 'default'},\n        minWidthPercent:{default: 'default'},\n        position:{default: 'default'},\n        positionLeft: {type:'int',default: 0},\n        positionRight: {type:'int',default: 0},\n        positionTop: {type:'int',default: 0},\n        positionBottom: {type:'int',default: 0},\n        positionPercent:{default: 'default'},\n        positionPercentLeft: {type:'int',default: 0},\n        positionPercentRight: {type:'int',default: 0},\n        positionPercentTop: {type:'int',default: 0},\n        positionPercentBottom: {type:'int',default: 0},\n        width:{default: 'default'},\n        height:{default: 'default'},\n        widthAuto:{type:'boolean',default: false},\n        heightAuto:{type:'boolean',default: false},\n        widthPercent:{default: 'default'},\n        heightPercent:{default: 'default'},\n    },\n    init(){\n        this.el.getYogaProperties = this.getProperties.bind(this);\n        this.setProperties();\n    },\n    updateSchema(){\n        this.setProperties();\n    },\n    setProperties(){\n        this.properties = this.properties||[];\n        this.properties.length = 0;\n        // Store the current valid yoga properties;\n        for(let name in this.data){\n            if(this.data.hasOwnProperty(name)&&\n                this.data[name]!=='default'&&this.data[name]){\n                let value = this.mapPropertyToEnum(name);\n                if(value)this.properties.push({method:'set'+name.charAt(0).toUpperCase() + name.substr(1),value:this.mapPropertyToEnum(name)});\n            }\n        }\n    },\n    getProperties(){\n        // Get the current yoga properties array as an object\n        let propertiesObj = {};\n        for(let i = 0;i < this.properties.length;i++){\n            propertiesObj[this.properties[i].method] = this.properties[i];\n        }\n        return propertiesObj;\n    },\n    mapPropertyToEnum(name){\n        // Get the yoga enum for the friendly name.\n        switch(true){\n            case name.indexOf('align') > -1:\n                return this.enums.align[this.data[name]];\n            case name.indexOf('Edge') > -1:\n                return this.enums.edge[this.data[name]];\n            case name === 'flexDirection':\n            case name === 'flexWrap':\n            case name === 'positionType':\n            case name === 'overflow':\n            case name === 'display':\n            case name === 'justifyContent':\n                return this.enums[name][this.data[name]];\n            default:\n                return this.data[name];\n        }\n    },\n    enums:{\n        align:{\n            count:Yoga.ALIGN_COUNT,\n            auto:Yoga.ALIGN_AUTO,\n            \"flex-start\":Yoga.ALIGN_FLEX_START,\n            center:Yoga.ALIGN_CENTER,\n            \"flex-end\":Yoga.ALIGN_FLEX_END,\n            stretch:Yoga.ALIGN_STRETCH,\n            baseline:Yoga.ALIGN_BASELINE,\n            \"space-between\":Yoga.ALIGN_SPACE_BETWEEN,\n            \"space-around\":Yoga.ALIGN_SPACE_AROUND,\n        },\n        dimension:{\n            count:Yoga.DIMENSION_COUNT,\n            width:Yoga.DIMENSION_WIDTH,\n            height:Yoga.DIMENSION_HEIGHT,\n        },\n        direction:{\n            count:Yoga.DIRECTION_COUNT,\n            inherit:Yoga.DIRECTION_INHERIT,\n            ltr:Yoga.DIRECTION_LTR,\n            rtl:Yoga.DIRECTION_RTL,\n        },\n        display:{\n            count:Yoga.DISPLAY_COUNT,\n            flex:Yoga.DISPLAY_FLEX,\n            none:Yoga.DISPLAY_NONE,\n        },\n        edge:{\n            count:Yoga.EDGE_COUNT,\n            left:Yoga.EDGE_LEFT,\n            top:Yoga.EDGE_TOP,\n            right:Yoga.EDGE_RIGHT,\n            bottom:Yoga.EDGE_BOTTOM,\n            start:Yoga.EDGE_START,\n            end:Yoga.EDGE_END,\n            horizontal:Yoga.EDGE_HORIZONTAL,\n            vertical:Yoga.EDGE_VERTICAL,\n            all:Yoga.EDGE_ALL,\n        },\n        experimental:{\n            count:Yoga.EXPERIMENTAL_FEATURE_COUNT,\n            \"flex-basis\":Yoga.EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS,\n        },\n        flexDirection:{\n            count:Yoga.FLEX_DIRECTION_COUNT,\n            column:Yoga.FLEX_DIRECTION_COLUMN,\n            \"column-reverse\":Yoga.FLEX_DIRECTION_COLUMN_REVERSE,\n            row:Yoga.FLEX_DIRECTION_ROW,\n            reverse:Yoga.FLEX_DIRECTION_ROW_REVERSE,\n        },\n        justifyContent:{\n            count:Yoga.JUSTIFY_COUNT,\n            start:Yoga.JUSTIFY_FLEX_START,\n            center:Yoga.JUSTIFY_CENTER,\n            end:Yoga.JUSTIFY_FLEX_END,\n            between:Yoga.JUSTIFY_SPACE_BETWEEN,\n            around:Yoga.JUSTIFY_SPACE_AROUND,\n            evenly:Yoga.JUSTIFY_SPACE_EVENLY,\n        },\n        logLevel:{\n            count:Yoga.LOG_LEVEL_COUNT,\n            error:Yoga.LOG_LEVEL_ERROR,\n            warn:Yoga.LOG_LEVEL_WARN,\n            info:Yoga.LOG_LEVEL_INFO,\n            debug:Yoga.LOG_LEVEL_DEBUG,\n            verbose:Yoga.LOG_LEVEL_VERBOSE,\n            fatal:Yoga.LOG_LEVEL_FATAL,\n        },\n        measureMode:{\n            count:Yoga.MEASURE_MODE_COUNT,\n            undefined:Yoga.MEASURE_MODE_UNDEFINED,\n            exactly:Yoga.MEASURE_MODE_EXACTLY,\n            \"at-most\":Yoga.MEASURE_MODE_AT_MOST,\n        },\n        nodeType:{\n            count:Yoga.NODE_TYPE_COUNT,\n            default:Yoga.NODE_TYPE_DEFAULT,\n            text:Yoga.NODE_TYPE_TEXT,\n        },\n        overflow:{\n            count:Yoga.OVERFLOW_COUNT,\n            visible:Yoga.OVERFLOW_VISIBLE,\n            hidden:Yoga.OVERFLOW_HIDDEN,\n            scroll:Yoga.OVERFLOW_SCROLL,\n        },\n        positionType:{\n            count:Yoga.POSITION_TYPE_COUNT,\n            relative:Yoga.POSITION_TYPE_RELATIVE,\n            absolute:Yoga.POSITION_TYPE_ABSOLUTE,\n        },\n        printOptions:{\n            count:Yoga.PRINT_OPTIONS_COUNT,\n            layout:Yoga.PRINT_OPTIONS_LAYOUT,\n            style:Yoga.PRINT_OPTIONS_STYLE,\n            children:Yoga.PRINT_OPTIONS_CHILDREN,\n        },\n        unit:{\n            count:Yoga.UNIT_COUNT,\n            undefined:Yoga.UNIT_UNDEFINED,\n            point:Yoga.UNIT_POINT,\n            percent:Yoga.UNIT_PERCENT,\n            auto:Yoga.UNIT_AUTO,\n        },\n        flexWrap:{\n            count:Yoga.WRAP_COUNT,\n            \"no-wrap\":Yoga.WRAP_NO_WRAP,\n            wrap:Yoga.WRAP_WRAP,\n            \"wrap-reverse\":Yoga.WRAP_WRAP_REVERSE,\n        }\n    }\n});","/* global AFRAME */\n/**\n * Application entry point\n * @author Shane Harris\n */\n\nimport * as Package from '../package.json';\nimport Yoga from \"yoga-layout\";\n\nlet version = Package.version;\nconsole.log('aframe-material-collection version '+version);\n\nif (typeof AFRAME === 'undefined') {\n    throw 'aframe-material-collection requires AFRAME to be loaded first. - <script src=\"https://aframe.io/releases/0.8.2/aframe.min.js\"></script>';\n}\n\nlet UI = import('./ui');\n\n(window as any).UI = UI;\n\n\n","\nimport {Utils} from \"./utils\";\n\n// Primitives\nimport './primitives/button';\nimport './primitives/fab_button';\nimport './primitives/switch';\nimport './primitives/slider';\nimport './primitives/number';\nimport './primitives/toast';\nimport './primitives/checkbox';\nimport './primitives/radio';\nimport './primitives/input-text';\nimport './primitives/text-input';\nimport './primitives/number-input';\nimport './primitives/int-input';\nimport './primitives/password-input';\nimport './primitives/scroll-pane';\nimport './primitives/renderer';\n\n// Components\nimport './components/text';\nimport './components/input-text';\nimport './components/btn';\nimport './components/icon';\nimport './components/rounded';\nimport './components/ripple';\nimport './components/slider';\nimport './components/number';\nimport './components/switch';\nimport './components/toast';\nimport './components/scroll-pane';\nimport './components/mouse-shim';\nimport './components/double-click';\nimport './components/checkbox';\nimport './components/radio';\nimport './components/border';\nimport './components/curved-plane';\nimport './components/color-picker';\nimport './components/modal';\nimport './components/renderer';\nimport './components/yoga';\n\nexport = {\n    // Utils\n    utils: new Utils(),\n    // Primitives\n    /*a_ui_button: import('./primitives/button'),\n    a_ui_fab_button: import('./primitives/fab_button'),\n    a_ui_fab_button_small: import('./primitives/fab_button_small'),\n    a_ui_switch: import('./primitives/switch'),\n    a_ui_slider: import('./primitives/slider'),\n    a_ui_number: import('./primitives/number'),\n    a_ui_toast: import('./primitives/toast'),\n    a_ui_checkbox: import('./primitives/checkbox'),\n    a_ui_radio: import('./primitives/radio'),\n    a_ui_input_text: import('./primitives/input-text'),\n    a_ui_text_input: import('./primitives/text-input'),\n    a_ui_number_input: import('./primitives/number-input'),\n    a_ui_int_input: import('./primitives/int-input'),\n    a_ui_password_input: import('./primitives/password-input'),\n    a_ui_scroll_pane: import('./primitives/scroll-pane'),\n    a_ui_renderer: import('./primitives/renderer'),\n\n    // Components\n    text: import('./components/text'),\n    input_text: import('./components/input-text'),\n    btn: import('./components/btn'),\n    icon: import('./components/icon'),\n    rounded: import('./components/rounded'),\n    ripple: import('./components/ripple'),\n    slider: import('./components/slider'),\n    number: import('./components/number'),\n    switch: import('./components/switch'),\n    toast: import('./components/toast'),\n    scroll_pane: import('./components/scroll-pane'),\n    mouse_shim: import('./components/mouse-shim'),\n    double_click: import('./components/double-click'),\n    checkbox: import('./components/checkbox'),\n    radio: import('./components/radio'),\n    border: import('./components/border'),\n    curvedPlane: import('./components/curved-plane'),\n    colorPicker: import('./components/color-picker'),\n    modal: import('./components/modal'),\n    renderer: import('./components/renderer'),\n    yoga_properties: import('./components/yoga'),*/\n};","import AFRAME from \"aframe\";\n\n/**\n * Button Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-button\n * @author Shane Harris\n */\n\nexport = AFRAME.registerPrimitive('a-ui-button', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        geometry: {\n            primitive: 'plane',\n            width: 0.5,\n            height: 0.175\n        },\n        material: {\n            color: '#009688',\n            shader: 'flat',\n        },\n        \"ui-btn\":{},\n        \"ui-rounded\":{borderRadius:0.0025},\n        \"ui-ripple\":{size:{x:0.5,y:0.175},clampToSquare:true,zIndex:0.001},\n        text:{\n            font:'roboto',\n            align:'center',\n            zOffset:0.002,\n            wrapCount:10,\n            alphaTest:0.4\n        }\n    },\n    mappings: {\n        height: 'geometry.height',\n        width: 'geometry.width',\n        color: 'material.color',\n        transparent: 'material.transparent',\n        \"font-color\":'text.color',\n        \"ripple-color\":'ui-ripple.color',\n        \"ripple-size\":'ui-ripple.size',\n        \"ripple-z-index\":'ui-ripple.zIndex',\n        \"text-value\": 'text.value',\n        \"wrap-count\":'text.wrapCount',\n        \"border-radius\":\"ui-rounded.borderRadius\",\n        \"curve-segments\":\"ui-rounded.curveSegments\",\n        disabled:'ui-btn.disabled',\n        \"hover-height\":'ui-btn.hoverHeight',\n        \"active-height\":'ui-btn.activeHeight',\n        \"prevent-updates\":'ui-btn.preventUpdates'\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Floating Action Button Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-fab-button\n * @author Shane Harris\n */\n\nexport = AFRAME.registerPrimitive('a-ui-fab-button', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        geometry: {\n            primitive: 'circle',\n            radius: 0.1,\n            segments:6\n        },\n        material: {\n            color: '#009688',\n            shader: 'flat',\n        },\n        \"ui-btn\":{},\n        \"ui-ripple\":{size:{x:0.1,y:0.1},zIndex:0.002,fadeDelay:300,duration:500},\n        \"ui-icon\":{size:{x:0.105,y:0.105}}\n    },\n    mappings: {\n        radius: 'geometry.radius',\n        color: 'material.color',\n        \"icon-color\": 'ui-icon.color',\n        transparent: 'material.transparent',\n        src: 'ui-icon.src',\n        \"ripple-color\":'ui-ripple.color',\n        \"ripple-size\":'ui-ripple.size',\n        \"ripple-z-index\":'ui-ripple.zIndex',\n        disabled:'ui-btn.disabled',\n        coords:'ui-icon.spriteCoords'\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Switch Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-switch\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-switch', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-switch\":{}\n    },\n    mappings: {\n        value: 'ui-switch.value',\n        disabled: 'ui-switch.disabled',\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Slider Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-slider\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-slider', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-slider\":{}\n    },\n    mappings: {\n        value: 'ui-slider.value',\n        disabled: 'ui-slider.disabled',\n        \"camera-el\": 'ui-slider.cameraEl'\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Number Widget Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-number\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-number', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-number\":{}\n    },\n    mappings: {\n\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Toast Message Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-toast\n * @author Shane Harris\n */\n\nexport = AFRAME.registerPrimitive('a-ui-toast', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        geometry: {\n            primitive: 'plane',\n            width: 0.5,\n            height: 0.2\n        },\n        material: {\n            color: '#010e0f',\n            shader: 'flat',\n            transparent:true,\n            opacity: 0.8\n        },\n        \"ui-rounded\":{borderRadius:0.01,curveSegments:3},\n        text:{\n            font:'roboto',\n            value:'Toast Message!',\n            align:'center',\n            zOffset:0.002,\n            wrapCount:20,\n        }\n    },\n    mappings: {\n        height: 'geometry.height',\n        width: 'geometry.width',\n        color: 'material.color',\n        transparent: 'material.transparent',\n        \"font-color\":'text.color',\n        \"text-value\": 'text.value',\n        \"wrap-count\":'text.wrapCount',\n        \"border-radius\":\"ui-rounded.borderRadius\",\n        \"curve-segments\":\"ui-rounded.curveSegments\"\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Checkbox Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-checkbox\n * @author Shane Harris\n */\n\nexport = AFRAME.registerPrimitive('a-ui-checkbox', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-checkbox\":{\n\n        },\n        \"ui-ripple\":{\n            size:{x:0.1,y:0.1},\n            zIndex:-0.001,\n            color:'#afafaf'\n        }\n    },\n    mappings: {\n        value: 'ui-checkbox.value',\n        disabled: 'ui-checkbox.disabled',\n        indeterminate:'ui-checkbox.indeterminate'\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Radio Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-radio\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-radio', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-radio\":{},\n        \"geometry\":{\n            primitive:'ring',\n            radiusInner:0.0575,\n            radiusOuter:0.0675,\n            segmentsTheta:6\n        },\n        \"material\":{\n            shader:'flat',\n            color:'#afafaf'\n        },\n        \"ui-ripple\":{\n            size:{x:0.1,y:0.1},\n            zIndex:-0.001,\n            color:'#afafaf'\n        }\n    },\n    mappings: {\n        color:'ui-radio.selectedColor',\n        value: 'ui-radio.value',\n        selected: 'ui-radio.selected',\n        disabled: 'ui-radio.disabled',\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Text Input Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-input-text\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-input-text', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-input-text\":{\n            placeHolder:'Text...',\n            width:1,\n            height:0.2,\n            value:''\n        },\n        \"ui-double-click\":{}\n    },\n    mappings: {\n        width:\"ui-input-text.width\",\n        height:\"ui-input-text.height\",\n        type:\"ui-input-text.type\",\n        value:\"ui-input-text.value\",\n        \"background-color\":\"ui-input-text.backgroundColor\",\n        \"place-holder\":\"ui-input-text.placeHolder\",\n        \"camera-el\":\"ui-input-text.cameraEl\",\n        \"rig-el\":\"ui-input-text.rigEl\",\n        \"tab-next\":\"ui-input-text.tabNext\",\n        \"look-controls-component\":\"ui-input-text.lookControlsComponent\",\n        \"wasd-controls-component\":\"ui-input-text.wasdControlsComponent\",\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Text Input Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-text-input\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-text-input', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-text\":{\n            placeHolder:'Text...'\n        },\n        \"ui-double-click\":{}\n    },\n    mappings: {\n        width:\"ui-text.width\",\n        height:\"ui-text.height\",\n        value:\"ui-text.value\",\n        \"place-holder\":\"ui-text.placeHolder\"\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Number Input Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-number-input\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-number-input', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-text\":{\n            type:'number',\n            placeHolder:'Number...'\n        },\n        \"ui-double-click\":{}\n    },\n    mappings: {\n        width:\"ui-text.width\",\n        height:\"ui-text.height\",\n        value:\"ui-text.value\",\n        \"place-holder\":\"ui-text.placeHolder\"\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Integer Input Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-int-input\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-int-input', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-text\":{\n            type:'int',\n            placeHolder:'Whole Number...'\n        },\n        \"ui-double-click\":{}\n    },\n    mappings: {\n        width:\"ui-text.width\",\n        height:\"ui-text.height\",\n        value:\"ui-text.value\",\n        \"place-holder\":\"ui-text.placeHolder\"\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n *  Password Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-password-input\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-password-input', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-text\":{\n            type:'password',\n            placeHolder:''\n        },\n        \"ui-double-click\":{}\n    },\n    mappings: {\n        width:\"ui-text.width\",\n        height:\"ui-text.height\",\n        value:\"ui-text.value\",\n        \"place-holder\":\"ui-text.placeHolder\"\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Scroll Pane Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-scroll-pane\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-scroll-pane', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-scroll-pane\":{\n\n        }\n    },\n    mappings: {\n        width:\"ui-scroll-pane.width\",\n        height:\"ui-scroll-pane.height\",\n        \"scroll-z-offset\":\"ui-scroll-pane.scrollZOffset\",\n        \"handle-color\":\"ui-scroll-pane.scrollHandleColor\",\n        \"scroll-padding\":\"ui-scroll-pane.scrollPadding\",\n        \"look-controls-el\":\"ui-scroll-pane.cameraEl\",\n        \"look-controls-component\":\"ui-scroll-pane.lookControlsComponent\"\n    }\n}));","import AFRAME from \"aframe\";\n\n/**\n * Renderer Primitive for aframe-material-collection.\n * @namespace aframe-material-collection\n * @primitive a-ui-renderer\n * @author Shane Harris\n */\nexport = AFRAME.registerPrimitive('a-ui-renderer', AFRAME.utils.extendDeep({}, AFRAME.primitives.getMeshMixin(), {\n    defaultComponents: {\n        \"ui-renderer\":{}\n    },\n    mappings: {\n        \"ui-panel\":\"ui-renderer.uiPanel\",\n        \"look-controls-el\":\"ui-renderer.lookControlsEl\",\n        \"look-controls-component\":\"ui-renderer.lookControlsComponent\",\n        \"panel-position\":\"ui-renderer.panelPosition\",\n        \"panel-size\":\"ui-renderer.panelSize\",\n        \"render-resolution\":\"ui-renderer.renderResolution\",\n        \"debug-raycaster\":\"ui-renderer.debugRaycaster\",\n        \"fps\":\"ui-renderer.fps\",\n        \"intersectable-class\":\"ui-renderer.intersectableClass\",\n        \"render-debug\":\"ui-renderer.debug\",\n        \"init-delay\":\"ui-renderer.initDelay\"\n    }\n}));","import UI from '../ui';\n\n/**\n * Text input component Component for aframe-material-collection. Includes support for number/int only input.\n * @namespace aframe-material-collection\n * @component ui-text\n * @author Shane Harris\n */\nexport = AFRAME.registerComponent('ui-text', {\n    schema: {\n        width:{type:'number',default:0.5},\n        height:{type:'number',default:0.1},\n        value: {default: ''},\n        type: {default: 'text'},\n        lineFocusColor: {default: '#009688'},\n        lineBlurColor: {default: '#cfcfcf'},\n        disabledColor: {default: '#afafaf'},\n        disabled: {type: 'boolean', default: false},\n        fontFamily: {default: 'Roboto'},\n        fontColor: {default: '#4f4f4f'},\n        placeHolder: {default: 'Text...'},\n        intersectableClass: {default: 'intersectable'},\n    },\n    init(){\n\n        // if (typeof CanvasInput === 'undefined') {\n        //     throw 'aframe-material-collection requires CanvasInput to be loaded first - <script src=\"https://cdn.rawgit.com/shaneharris/CanvasInput/master/CanvasInput.js\"></script>';\n        // }\n        console.warn('ui-text is deprecated. please use ui-input-text instead. Thanks!');\n    }\n});","/* global TWEEN */\n\nimport {Entity, registerComponent} from \"aframe\";\nimport {Mesh, MeshLambertMaterial, Plane, Vector3} from \"three\";\nimport {Utils} from \"../utils\";\n\n/**\n * Text input component Component for aframe-material-collection. Includes support for number/int only input.\n * @namespace aframe-material-collection\n * @component ui-text-input\n * @author Shane Harris\n */\n\nexport = registerComponent('ui-input-text', {\n    container: undefined as any as Entity,\n    backing: undefined as any as Entity,\n    underline: undefined as any as Entity,\n    selectionHighlight: undefined as any as Entity,\n    carret: undefined as any as Entity,\n    text: {} as any,\n    alphabet: {},\n    startSelection: 0,\n    scrollOffset: 0,\n    scrollIndex: 0,\n    carretInterval: 0,\n    shiftStartPos: undefined as number | undefined,\n    chars: new Array<any>(),\n    charsAllowed: new Array<string>(),\n    blurHandler: ()=>{},\n    isMoving: false,\n    isFocused: false,\n    mousemove: (e: any) => {},\n    keydown: (e: any) => {},\n    keySelectAll: () => {},\n    keyCut: () => {},\n    keyCopy: () => {},\n    keyPaste: () => {},\n    positions: new Array<number>(),\n    depends:['text'],\n    content_clips: [\n        new Plane( new Vector3( -1, 0, 0 ), 0 ),\n        new Plane( new Vector3( 1, 0, 0 ), 0 )\n    ],\n    schema: {\n        value: {default: ''},\n        disabled: {type: 'boolean', default: false},\n        type: {default: 'text'},\n        cameraEl:{type:'selector'},\n        rigEl:{type:'selector'},\n        tabNext:{type:'selector'},\n        width:{type:'number',default:1},\n        height:{type:'number',default:0.2},\n        backgroundColor:{default:'white'},\n        lookControlsComponent:{default:'look-controls'},\n        wasdControlsComponent:{default:'wasd-controls'},\n        placeHolder:{default:'Text...'}\n    },\n    init(){\n        this.setupElements();\n        this.setupScrollClips();\n        this.text.addEventListener('textfontset',()=>{\n            this.text.selectionStart = 0;\n            this.text.selectionLength = 0;\n            this.startSelection = 0;\n            this.scrollOffset = 0;\n            this.alphabet = {};\n            this.scrollIndex = 0;\n            let chars = this.data.value.split('');\n            this.chars = [];\n            this.charsAllowed = ['-','_','+','=','{','}','[',']',':',';','\\'','@','~','#','<','>',',','.','?','/','|','\\\\','`','¬'];\n            for(let i = 0; i < chars.length; i++){\n                this.chars.push({char:chars[i]});\n            }\n            this.blurHandler = ()=>{\n                if(!(this.el.sceneEl as any).defaultKeypressPrevented){\n                    this.blur();\n                }else{\n                    (this.el.sceneEl as any).defaultKeypressPrevented = false;\n                }\n            };\n            this.isMoving = false;\n            this.mousemove = this.onMousemove.bind(this);\n\n            this.keydown = e=>this.handleKeyboardEvent(e);\n            this.keySelectAll = ()=>this.selectAll();\n            this.keyCut = ()=>this.cutText();\n            this.keyCopy = ()=>this.copyText();\n            this.keyPaste = ()=>this.pasteText();\n            this.backing.addEventListener('mousedown',()=>{\n                this.focus();\n            });\n            this.el.sceneEl!!.addEventListener('mouseup',()=>{\n                this.backing.removeEventListener('ui-mousemove',this.mousemove);\n                this.isMoving = false;\n                this.setSelection(this.text.selectionStart,this.text.selectionLength)\n            });\n            this.el.setAttribute('visible',false);\n            this.setValue();\n           // Utils.isChanging(this.el.sceneEl,this.text.object3D.uuid);\n            setTimeout(()=> {\n                this.setScrollClips();\n                this.el.setAttribute('visible',true);\n                //Utils.stoppedChanging(this.text.object3D.uuid);\n            },200);\n        });\n        (this.el as any).getValue = this.getValue.bind(this);\n        (this.el as any).value = this.value.bind(this);\n        this.el.focus = this.focus.bind(this);\n    },\n    setupScrollClips(){\n        this.content_clips = [\n            new Plane( new Vector3( -1, 0, 0 ), 0 ),\n            new Plane( new Vector3( 1, 0, 0 ), 0 )\n        ];\n        //this.setScrollClips();\n    },\n    selectAll(){\n        this.text.selectionStart = 0;\n        this.text.selectionLength = this.chars.length;\n        this.setValue();\n    },\n    increaseWrap(){\n        let child = this.text.object3D.children[this.text.object3D.children.length-1];\n        if(!child)return;\n        if(child.geometry.layout&&child.geometry.layout._linesTotal>1){\n            this.text.setAttribute('visible',false);\n            this.text.setAttribute('width',this.text.getAttribute('width')*1.2);\n            this.text.setAttribute('wrap-pixels',this.text.getAttribute('width')*500);\n            this.text.setAttribute('x-offset',((this.text.getAttribute('width')-this.data.width)/2));\n            setTimeout(()=>this.increaseWrap());\n        }else{\n            this.text.setAttribute('visible',true);\n        }\n    },\n    setScrollClips(){\n        //this.text.object3D.updateMatrixWorld();\n        //this.backing.object3D.parent.updateMatrixWorld();\n        this.content_clips[0].set(new Vector3( -1, 0, 0 ), (this.data.width/2)+0.005);\n        this.content_clips[1].set(new Vector3( 1, 0, 0 ), (this.data.width/2)+0.005);\n        this.content_clips[0].applyMatrix4(this.backing.object3D.matrixWorld);\n        this.content_clips[1].applyMatrix4(this.backing.object3D.matrixWorld);\n        setTimeout(()=>{\n            let child = this.text.object3D.children[this.text.object3D.children.length-1];\n            if(child)child.material.clippingPlanes = this.text._content_clips?this.text._content_clips.concat(this.content_clips):this.content_clips;\n        },0);\n        let selectionHeight = this.selectionHighlight.getObject3D('mesh') as Mesh;\n        if(selectionHeight){\n            (selectionHeight.material as any).clippingPlanes = this.text._content_clips?this.text._content_clips.concat(this.content_clips):this.content_clips;\n        }\n        let carret = this.carret.getObject3D('mesh') as Mesh;\n        if(carret){\n            (carret.material as any).clipShadows = true;\n            (carret.material as any).needsUpdate = true;\n            (carret.material as any).clippingPlanes = this.text._content_clips?this.text._content_clips.concat(this.content_clips):this.content_clips;\n        }\n    },\n    numberOnly(e,is_float){\n        // Stolen from stack overflow.\n        if ([46, 8, 9, 27, 13, 110].indexOf(e.keyCode) !== -1 ||\n            // Allow: Ctrl/cmd+A\n            (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) ||\n            // Allow: Ctrl/cmd+C\n            (e.keyCode === 67 && (e.ctrlKey === true || e.metaKey === true)) ||\n            // Allow: Ctrl/cmd+X\n            (e.keyCode === 88 && (e.ctrlKey === true || e.metaKey === true)) ||\n            // Allow: home, end, left, right\n            (e.keyCode >= 35 && e.keyCode <= 39)) {\n            // let it happen, don't do anything\n            return true;\n        }\n        // Regex to allow float/int input - float inpit allows \"0.\" for as you type numbers - need to remove on blur.\n        // TODO: Need to remove trailing dot on blur to make a valid number.\n        let output = this.getValue();\n        if(e){\n            return ((is_float?/^\\d*((\\.)|(\\.\\d+))?$/g:/^\\d*?$/g).test(output+e.key));\n        }\n\n    },\n    floatOnly(e){\n        return this.numberOnly(e,true);\n    },\n    focus(){\n        if(this.isFocused)return;\n        this.isFocused = true;\n        this.setupCarret();\n        this.setScrollClips();\n        setTimeout(()=>{\n            this.setValue();\n            this.el.sceneEl!!.addEventListener('mousedown',this.blurHandler);\n            this.playPauseCamera('pause');\n        });\n        this.backing.addEventListener('ui-mousemove',this.mousemove);\n        window.addEventListener('keydown', this.keydown);\n        this.el.sceneEl!!.addEventListener('key-select',this.keySelectAll);\n        this.el.sceneEl!!.addEventListener('key-cut',this.keyCut);\n        this.el.sceneEl!!.addEventListener('key-copy',this.keyCopy);\n        this.el.sceneEl!!.addEventListener('key-paste',this.keyPaste);\n        this.underline.setAttribute('height',0.008);\n        this.underline.setAttribute('color','#009688');\n    },\n    blur(){\n        if(this.chars.length&&this.chars[this.chars.length-1].char==='.'&&this.data.type===\"number\"){\n            this.chars.pop();\n            this.setValue();\n        }\n        this.setSelection(0,0);\n        setTimeout(()=>{\n            clearInterval(this.carretInterval);\n            ((this.carret.getObject3D('mesh')as Mesh).material as MeshLambertMaterial).opacity = 0;\n            this.isFocused = false;\n        });\n        this.el.sceneEl!!.removeEventListener('mousedown',this.blurHandler);\n        this.playPauseCamera('play');\n        window.removeEventListener('keydown', this.keydown);\n        this.el.sceneEl!!.removeEventListener('key-select',this.keySelectAll);\n        this.el.sceneEl!!.removeEventListener('key-cut',this.keyCut);\n        this.el.sceneEl!!.removeEventListener('key-copy',this.keyCopy);\n        this.el.sceneEl!!.removeEventListener('key-paste',this.keyPaste);\n        Utils.stoppedChanging(this.text.object3D.uuid);\n        this.underline.setAttribute('height',0.005);\n        this.underline.setAttribute('color','#bfbfbf');\n    },\n    pasteText(){\n        (navigator as any).clipboard.readText()\n            .then(text => {\n                let chars = [this.text.selectionStart, this.text.selectionLength].concat(text.split('').map(char=>({char:char})));\n                Array.prototype.splice.apply(this.chars, chars as any);\n                this.text.selectionStart = this.text.selectionStart+chars.length-2;\n                this.text.selectionLength = 0;\n                this.setValue();\n            });\n    },\n    cutText(){\n        this.copyText();\n        this.chars.splice(this.text.selectionStart,this.text.selectionLength);\n        this.setValue();\n    },\n    copyText(){\n        let value = this.chars.slice(this.text.selectionStart,this.text.selectionStart+this.text.selectionLength).map(c=>c.char).join(\"\");\n        (navigator as any).clipboard.writeText(value);\n    },\n    handleKeyboardEvent(e){\n        if(e.keyCode===13){\n            this.el.emit('submit');\n        }else if(e.keyCode===9){\n            if(this.data.tabNext){\n                ((this.carret.getObject3D('mesh') as Mesh).material as MeshLambertMaterial).opacity = 1;\n                this.blur();\n                setTimeout(()=>this.data.tabNext.focus());\n            }\n        }else if(e.keyCode===88&&e.ctrlKey) { //CTRL + X\n           this.cutText();\n        }else if(e.keyCode===67&&e.ctrlKey) { //CTRL + C\n            this.copyText();\n        }else if(e.keyCode===86&&e.ctrlKey) { //CTRL + V\n            this.pasteText();\n        }else if(e.keyCode===65&&e.ctrlKey) { //CTRL + A\n            this.text.selectionStart = 0;\n            this.text.selectionLength = this.chars.length;\n            e.preventDefault();\n            e.stopPropagation();\n        }else if(e.code.indexOf('Key')>-1||e.code.indexOf('Digit')>-1||this.charsAllowed.indexOf(e.key)>-1){\n            let check: boolean | undefined = true;\n            switch(this.data.type){\n                case \"number\":\n                    check = this.floatOnly(e);\n                    break;\n                case \"int\":\n                    console.log(this.numberOnly(e, false));\n                    check = this.numberOnly(e, false);\n                    break;\n            }\n            if(check){\n                this.chars.splice(this.text.selectionStart,this.text.selectionLength,{char:e.key});\n                this.text.selectionStart++;\n                this.text.selectionLength = 0;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n        }else if(e.keyCode===46){// Delete\n            this.chars.splice(this.text.selectionStart,this.text.selectionLength||1);\n            this.text.selectionStart = this.text.selectionStart>this.chars.length?this.chars.length:this.text.selectionStart;\n            this.text.selectionLength = 0;\n            e.preventDefault();\n            e.stopPropagation();\n        }else if(e.keyCode===39){\n            if(!e.shiftKey){\n                if(this.text.selectionLength){\n                    this.text.selectionStart+=this.text.selectionLength;\n                }else{\n                    this.text.selectionStart++;\n                }\n                this.text.selectionLength = 0;\n                if(this.text.selectionStart>this.chars.length)this.text.selectionStart = this.chars.length;\n                delete this.shiftStartPos\n            }else{\n                if(!this.shiftStartPos){\n                    this.shiftStartPos = this.text.selectionStart;\n                }\n                if(this.text.selectionStart<this.shiftStartPos!!){\n                    this.text.selectionStart++;\n                    this.text.selectionLength=Math.abs(this.shiftStartPos!!-this.text.selectionStart);\n                }else{\n                    this.text.selectionLength++;\n                }\n\n            }\n            e.preventDefault();\n            e.stopPropagation();\n        }else if(e.keyCode===37){\n            if(!e.shiftKey) {\n                if (!this.text.selectionLength) {\n                    this.text.selectionStart--;\n                }\n                this.text.selectionLength = 0;\n                if (this.text.selectionStart < 0) this.text.selectionStart = 0;\n                delete this.shiftStartPos\n            }else{\n                if(!this.shiftStartPos){\n                    this.shiftStartPos = this.text.selectionStart;\n                }\n                if(this.text.selectionStart+this.text.selectionLength>this.shiftStartPos!!){\n                    this.text.selectionLength--;\n                }else{\n                    this.text.selectionStart--;\n                    this.text.selectionLength=Math.abs(this.shiftStartPos!!-this.text.selectionStart);\n                }\n            }\n            e.preventDefault();\n            e.stopPropagation();\n        }else{\n            if(this.text.selectionLength) {\n                if(e.keyCode===8) {// Backspace\n                    this.chars.splice(this.text.selectionStart, this.text.selectionLength  );\n                    this.text.selectionLength = 0;\n                }\n            }else{\n                if(e.keyCode===8){// Backspace\n                    if(this.text.selectionStart){\n                        this.chars.splice(this.text.selectionStart-1,this.text.selectionLength||1 );\n                        this.text.selectionStart = this.text.selectionStart-1;\n                    }\n                }else if(e.keyCode===32){ // Space\n                    this.chars.splice(this.text.selectionStart,0,{char:' '});\n                    this.text.selectionStart++;\n                }\n            }\n\n            e.preventDefault();\n            e.stopPropagation();\n        }\n\n        this.el.emit('ui-keypress',e);\n        this.setValue();\n        ((this.carret.getObject3D('mesh')as Mesh).material as MeshLambertMaterial).opacity = 1;\n    },\n    setValue(){\n        this.setScrolledValue();\n        setTimeout(()=>{\n            this.setCharacters();\n            this.setSelection(this.text.selectionStart,this.text.selectionLength);\n            this.increaseWrap();\n        })\n    },\n    setScrolledValue(){\n        let output = this.getValue();\n        this.text.setAttribute('value',output);\n        if(!this.chars.length){\n            this.text.setAttribute('color','#bfbfbf');\n            this.text.setAttribute('value',this.data.placeHolder);\n        }else{\n            this.text.setAttribute('value',output);\n            this.text.setAttribute('color','#2f2f2f');\n        }\n    },\n    onMousemove(e){\n        let currentSelection = this.getSelectionPosition(e);\n        if(!this.isMoving){\n            this.isMoving = true;\n            this.startSelection = currentSelection;\n        }\n        let selection = this.getNearestGlyph(this.startSelection,currentSelection);\n        this.selectionHighlight.setAttribute('scale',(selection.end-selection.start)+' 1 1');\n        this.selectionHighlight.setAttribute('position',(selection.start+((selection.end-selection.start)/2))+' 0 0.0005');\n        this.carret.setAttribute('position',selection.end+' 0 0.001');\n\n    },\n    setupElements(){\n\n\n        this.container = document.createElement('a-entity');\n        this.container.setAttribute('position',(this.data.width/2)+' 0 0');\n\n        this.text = document.createElement('a-text');\n        this.text.setAttribute('color','#2f2f2f');\n        this.text.setAttribute('anchor','center');\n        this.text.setAttribute('align','left');\n        this.text.setAttribute('position','0 0 0.003');\n        this.text.setAttribute('width',this.data.width);\n        this.text.setAttribute('wrap-pixels',this.data.width*500);\n        this.text.className = 'no-yoga-layout';\n        this.text.setAttribute('height',this.data.height);\n        this.text.setAttribute('value',this.data.value);\n        this.container.appendChild(this.text);\n\n        this.selectionHighlight = document.createElement('a-box');\n        this.selectionHighlight.setAttribute('width',1);\n        this.selectionHighlight.setAttribute('scale','0 1 1');\n        this.selectionHighlight.setAttribute('height',0.16);\n        this.selectionHighlight.setAttribute('depth',0.00001);\n        this.selectionHighlight.setAttribute('transparent',true);\n        this.selectionHighlight.className = 'no-yoga-layout';\n        this.selectionHighlight.setAttribute('color','#009688');\n        this.selectionHighlight.setAttribute('shader','flat');\n        this.selectionHighlight.setAttribute('opacity',0.3);\n        this.selectionHighlight.setAttribute('position','0 0 0.0005');\n        this.text.appendChild(this.selectionHighlight);\n\n        this.carret = document.createElement('a-box');\n        this.carret.setAttribute('width',0.01);\n        this.carret.setAttribute('height',0.12);\n        this.carret.setAttribute('depth',0.00001);\n        this.carret.setAttribute('transparent',true);\n        this.carret.setAttribute('opacity',0);\n        this.carret.setAttribute('shader','flat');\n        this.carret.className = 'no-yoga-layout';\n        this.carret.setAttribute('color','#009688');\n        this.carret.setAttribute('position',-(this.data.width/2)+' 0 0.001');\n        this.text.appendChild(this.carret);\n\n\n        this.backing = document.createElement('a-box');\n        this.backing.className = 'intersectable no-yoga-layout text-backing';\n        this.backing.setAttribute('width',this.data.width+0.1);\n        this.backing.setAttribute('height',this.data.height);\n        this.backing.setAttribute('depth',0.00001);\n        this.backing.setAttribute('color',this.data.backgroundColor);\n        this.backing.setAttribute('shader','flat');\n        this.container.appendChild(this.backing);\n\n\n\n        this.underline = document.createElement('a-box');\n        this.underline.setAttribute('width',this.data.width);\n        this.underline.setAttribute('height',0.005);\n        this.underline.setAttribute('depth',0.00001);\n        this.underline.className = 'no-yoga-layout';\n        this.underline.setAttribute('shader','flat');\n        this.underline.setAttribute('color','#bfbfbf');\n        this.underline.setAttribute('position','0 -0.072 0.001');\n        this.container.appendChild(this.underline);\n\n        this.el.appendChild(this.container);\n\n\n    },\n    setupCarret(){\n        let material = ((this.carret.getObject3D('mesh') as Mesh).material as MeshLambertMaterial);\n        this.carretInterval = setInterval(()=>{\n            material.opacity = material.opacity?0:1;\n            Utils.isChanging(this.el.sceneEl,this.text.object3D.uuid);\n        },350);\n    },\n    value(text){\n        if(text||text===\"\"){\n            this.chars = text.split('').map(char=>({char:char}));\n            this.text.selectionStart = this.chars.length;\n            this.setValue();\n            // set value\n        }else{\n            return this.chars.map(c=>c.char).join('');\n        }\n    },\n    getValue(){\n        let output = '';\n        for(let i = 0; i < this.chars.length; i++){\n            output+=this.data.type===\"password\"?'*':this.chars[i].char;\n        }\n        return output;\n    },\n    getSelectionPosition(e){\n        this.el.object3D.updateMatrixWorld(false);\n        return this.text.object3D.worldToLocal(e.detail.intersection.point.clone()).x\n    },\n    playPauseCamera(method){\n        let el = this.data.cameraEl;\n        if (el&&el.components[this.data.lookControlsComponent]) {\n            el.components[this.data.lookControlsComponent][method]();\n        }\n\n        if(this.data.rigEl){\n            el = this.data.rigEl\n        }\n\n        if(el&&el.components[this.data.wasdControlsComponent]) {\n            el.components[this.data.wasdControlsComponent][method]();\n        }\n    },\n    setCharacters(){\n        this.positions = new Array<number>();\n        let child = this.text.object3D.children[this.text.object3D.children.length-1];\n        if(!this.chars.length||!child)return;\n        let glyphs = child.geometry.layout.glyphs;\n        let scale = child.scale.x;\n        let lastPosition = 0;\n        for(let i = 0; i < glyphs.length; i++){\n            let glyph = glyphs[i];\n            if(!this.chars[i]){\n                console.log(glyphs.length,this.chars.length);\n            }\n            let currentWidth = (this.chars[i].char===' '?20:glyph.data.width);\n            let current = (((glyph.position[0]+currentWidth+glyph.position[1])*scale)+0.08);\n            if(i===0){\n                lastPosition = (((glyph.position[0]+glyph.position[1])*scale)+0.08)\n            }\n            if(!this.chars[i].id){\n                this.chars[i].id=glyph.data.id;\n                this.chars[i].width = current-lastPosition;\n            }\n            this.chars[i].left = lastPosition;\n            lastPosition = current;\n        }\n    },\n    getNearestGlyph(startPosition,endPosition){\n        let width = Number(this.text.getAttribute('width'));\n        let parentWidth = this.data.width;\n        if(endPosition<startPosition){\n            let tempPosition = endPosition;\n            endPosition = startPosition;\n            startPosition = tempPosition;\n        }\n        if(startPosition<-parentWidth/2){\n            startPosition = -parentWidth/2;\n        }\n        if(endPosition>width-parentWidth/2){\n            endPosition = width-parentWidth/2;\n        }\n        let startDiff = Number.POSITIVE_INFINITY;\n        let endDiff = Number.POSITIVE_INFINITY;\n        let output = {start:0,end:0};\n        if(this.chars.length){\n            for(let i = 0; i <= this.chars.length; i++){\n                let position = this.chars[i===this.chars.length?i-1:i];\n                let currentPosition = (i===this.chars.length?position.left+position.width:position.left)-(parentWidth)/2;\n                if(Math.abs(startPosition-currentPosition)<startDiff){\n                    startDiff = Math.abs(startPosition-currentPosition);\n                    output.start = currentPosition;\n                    this.text.selectionStart = i;\n                }\n                if(Math.abs(endPosition-currentPosition)<endDiff){\n                    endDiff = Math.abs(endPosition-currentPosition);\n                    output.end = currentPosition;\n                    this.text.selectionLength = i-this.text.selectionStart;\n                }\n            }\n        }\n        return output;\n    },\n    setSelection(start,length){\n        this.text.selectionStart = start;\n        this.text.selectionLength = length;\n        let right = 0,left = 0;\n        for(let i = 0; i < this.chars.length; i++){\n            let position = this.chars[i];\n            if(i>=start&&i<start+length+1){\n                let current = position.left;\n                if(i===start){\n                    left = current\n                }\n                right = current;\n            }\n        }\n        let end = this.chars.length?this.chars[this.chars.length-1].left+this.chars[this.chars.length-1].width:0;\n        if(start+length===this.chars.length){\n            right = end\n        }\n        if(start===this.chars.length){\n            left = right = end\n        }\n        let parentWidth = this.data.width;\n        this.selectionHighlight.setAttribute('scale',(right-left)+' 1 1');\n        this.selectionHighlight.setAttribute('position',(left+((right-left)/2)-((parentWidth)/2))+' 0 0.0005');\n        let carretPosition = (right-((parentWidth)/2));\n        this.carret.setAttribute('position',carretPosition+' 0 0.001');\n\n        if(carretPosition>(parentWidth/2)-this.scrollOffset){\n            this.scrollOffset = -(carretPosition-(parentWidth/2));\n            this.text.setAttribute('position',this.scrollOffset+' 0 0.003');\n        }\n\n        if((carretPosition+parentWidth/2)<-this.scrollOffset){\n            this.scrollOffset+=(-this.scrollOffset-(carretPosition+parentWidth/2));\n            if(this.scrollOffset>0)this.scrollOffset=0;\n            this.text.setAttribute('position',this.scrollOffset+' 0 0.003');\n        }\n    },\n    updateSchema() {\n\n    }\n});","/* global TWEEN */\n\nimport {registerComponent} from \"aframe\";\nimport {Utils} from \"../utils\";\n\n/**\n * Button base Component for aframe-material-collection. This is used as the base component for all the button primitives.\n * @namespace aframe-material-collection\n * @component ui-btn\n * @author Shane Harris\n */\n\nexport = registerComponent('ui-btn', {\n    defaultZ: 0,\n    is_clicked: false,\n    schema: {\n        duration: {type: 'int', default: 250},\n        hoverHeight: {type: 'number', default: 0.01},\n        activeHeight: {type: 'number', default: -0.001},\n        disabled: {type: 'boolean', default: false},\n        preventUpdates: {type: 'boolean', default: false}\n    },\n    updateSchema() {\n        // TODO: handle updates to the button state, disabled flag here.\n    },\n    init() {\n        // Store the current button z value for animating mouse events\n        this.defaultZ = this.el.object3D.position.z;\n        // register input events for interaction\n        if (!this.data.disabled) {\n            this.el.addEventListener('mouseenter', e => this.mouseEnter(e as MouseEvent));\n            this.el.addEventListener('mousedown', e => this.mouseDown(e as MouseEvent));\n            this.el.addEventListener('mouseup', e => this.mouseUp(e as MouseEvent));\n            this.el.addEventListener('mouseleave', e => this.mouseLeave(e as MouseEvent));\n        }\n    },\n    mouseEnter(e: MouseEvent) {\n        const _this = this;\n        // Lift the button up for hover animation\n        this.tween(this.defaultZ, this.defaultZ + this.data.hoverHeight,  function () {\n            _this.el.object3D.position.z = this.x;\n        }, function () {\n            _this.el.object3D.position.z = _this.defaultZ + _this.data.hoverHeight;\n        });\n        //Utils.preventDefault(e)\n    },\n    mouseLeave(e: MouseEvent) {\n        // Ignore mouse leave event if the button was clicked - mouse up already resets to default state.\n        if (this.is_clicked) {\n            return this.is_clicked = false;\n        }\n        // Reset button state from hover\n        this.resetAnimation(this.defaultZ + this.data.hoverHeight);\n        //Utils.preventDefault(e)\n    },\n    mouseUp(e: MouseEvent) {\n        this.is_clicked = true;\n        // Reset button state from pressed\n        this.resetAnimation(this.defaultZ + this.data.activeHeight);\n        Utils.preventDefault(e)\n    },\n    mouseDown(e: MouseEvent) {\n        const _this = this;\n        // Press state animation from hovered\n        this.tween(this.defaultZ + this.data.hoverHeight, this.defaultZ + this.data.activeHeight, function () {\n            _this.el.object3D.position.z = this.x;\n        }, function () {\n            _this.el.object3D.position.z = _this.defaultZ + _this.data.activeHeight;\n        });\n        Utils.preventDefault(e)\n    },\n    resetAnimation(start_z: number) {\n        let _this = this;\n        this.tween(start_z, this.defaultZ, function () {\n            _this.el.object3D.position.z = this.x;\n        }, function () {\n            _this.el.object3D.position.z = _this.defaultZ;\n        })\n    },\n    tween(from: number, to: number, callback: any, complete: any) {\n        let _this = this;\n        // Start changes\n        if (!this.data.preventUpdates) Utils.isChanging(this.el.sceneEl, this.el.object3D.uuid);\n        return new TWEEN.Tween({x: from})\n            .to({x: to}, this.data.duration)\n            .onUpdate(callback)\n            .onComplete( () => {\n                // Stop changes\n                if (!_this.data.preventUpdates) Utils.stoppedChanging(_this.el.object3D.uuid);\n                return complete.call(this);\n            })\n            .easing(TWEEN.Easing.Exponential.Out).start();\n    }\n});","import {Entity, registerComponent} from \"aframe\";\n\n/**\n * A component to load an icon and set some defaults for positioning and transparency.\n * @namespace aframe-material-collection\n * @component ui-icon\n * @author Shane Harris\n */\nexport = registerComponent('ui-icon', {\n    icon: undefined as any as Entity,\n    schema: {\n        src: {default: 'icons/send_white_64dp.png'},\n        spriteCoords:{type:'vec4'},\n        size:{type:'vec2',default:{x:0.1,y:0.1}},\n        zIndex:{type:'number',default:0.003},\n        color:{default:'#fff'}\n    },\n    init() {\n        this.icon = document.createElement('a-entity');\n        this.icon.className = 'no-yoga-layout';\n        this.icon.setAttribute('geometry','primitive:plane; width: '+this.data.size.x+'; height: '+this.data.size.y+';skipCache: true;');\n        this.icon.setAttribute('material','shader: flat; color:'+this.data.color+';alpha-test:0.4; transparent:true;src:'+this.data.src);\n        if(this.data.spriteCoords){\n            this.icon.setAttribute('sprite-sheet','coords:'+this.data.spriteCoords.x+' '+this.data.spriteCoords.y+' '+this.data.spriteCoords.z+' '+this.data.spriteCoords.w+';shape:square');\n        }\n        this.icon.setAttribute('position',\"0 0 \"+this.data.zIndex);\n        this.el.appendChild(this.icon);\n    }\n});","import  {registerComponent} from \"aframe\";\nimport UI from '../ui';\nimport {Mesh, Shape, ShapeBufferGeometry} from \"three\";\n\n/**\n * Rounded corners Component for aframe-material-collection. Expects an a-plane entity.\n * @namespace aframe-material-collection\n * @component ui-rounded\n * @author Shane Harris\n */\n\nexport = registerComponent('ui-rounded', {\n    schema: {\n        borderRadius: {type: 'number', default: 0.01},\n        curveSegments:{type: 'int', default: 1},\n    },\n    init() {\n        let mesh = this.el.getObject3D('mesh') as Mesh;\n        let roundedRectShape = new Shape();\n        // Draw the Rounded rectangle shape centered in the object - from three.js shapes example.\n        ( function roundedRect( ctx, x, y, width, height, radius ) {\n            ctx.moveTo( x, y + radius );\n            ctx.lineTo( x, y + height - radius );\n            ctx.quadraticCurveTo( x, y + height, x + radius, y + height );\n            ctx.lineTo( x + width - radius, y + height );\n            ctx.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );\n            ctx.lineTo( x + width, y + radius );\n            ctx.quadraticCurveTo( x + width, y, x + width - radius, y );\n            ctx.lineTo( x + radius, y );\n            ctx.quadraticCurveTo( x, y, x, y + radius );\n        } )( roundedRectShape, -(mesh.geometry as any).metadata.parameters.width/2, -(mesh.geometry as any).metadata.parameters.height/2, (mesh.geometry as any).metadata.parameters.width, (mesh.geometry as any).metadata.parameters.height, this.data.borderRadius );\n        // Update the geometry.\n        mesh.geometry = new ShapeBufferGeometry(roundedRectShape,this.data.curveSegments);\n        // Emit rounded-loaded event once the geometry has been updated.\n        this.el.emit('rounded-loaded', null, false);\n    }\n});","/* global TWEEN */\n\nimport {CircleGeometry, Mesh, MeshBasicMaterial, Plane, Vector3} from \"three\";\nimport {registerComponent} from \"aframe\";\nimport {Utils} from \"../utils\";\n\n/**\n * Ripple Component for aframe-material-collection. Add a ripple to an entity with options for controlling\n * clamping the animation and offsetting the ripple z position to place on top or bottom\n * @namespace aframe-material-collection\n * @component ui-ripple\n * @author Shane Harris\n */\n\nexport = registerComponent('ui-ripple',{\n    rippleGeometry: undefined as any as CircleGeometry,\n    ripple: undefined as any as Mesh,\n    content_clips: new Array<Plane>(),\n    isRippling: false,\n    schema:{\n        color: {default: '#fff'},\n        duration:{type:'int',default:1000},\n        fadeDuration:{type:'int',default:750},\n        fadeDelay:{type:'int',default:250},\n        clampToSquare:{type:'boolean',default:false},\n        size:{type:'vec2',default:{x:1,y:1}},\n        zIndex:{type:'number',default:-0.001},\n        segments:{type:'int',default:6}\n    },\n    init(){\n        // Setup circle geometry for ripple effect\n        this.rippleGeometry = new CircleGeometry(Math.max(this.data.size.x,this.data.size.y),this.data.segments);\n        this.ripple = new Mesh(this.rippleGeometry.clone(),new MeshBasicMaterial({color:this.data.color,transparent:true, opacity:0.4,alphaTest:0.1}));\n        this.ripple.scale.set(0.00001,0.00001,0.00001);\n        this.el.object3D.add(this.ripple);\n        this.el.addEventListener('mousedown',this.click.bind(this));\n        this.ripple.position.set(0,0,this.data.zIndex);\n        // Set clipping planes if clamping to square\n        if(this.data.clampToSquare){\n\n            this.content_clips = [\n                new Plane( new Vector3( 0, 1, 0 ), (this.data.size.y/2) ),\n                new Plane( new Vector3( 0, -1, 0 ), (this.data.size.y/2) ),\n                new Plane( new Vector3( -1, 0, 0 ), (this.data.size.x/2) ),\n                new Plane( new Vector3( 1, 0, 0 ), (this.data.size.x/2) )\n            ];\n        }\n    },\n    click(e){\n        if(this.isRippling){\n            // Throttle clicks.\n            return e.preventDefault();\n        }\n        this.isRippling = true;\n        // Set clipping planes if clamping to square\n        if(this.data.clampToSquare){\n            this.setRippleClips();\n        }\n        // Animate the size of the circle ripple from the center of the entity.\n        this.tweenSize(this.ripple.geometry);\n        // Fade the circle out as it ripples.\n        this.tweenOpacity(this.ripple.material);\n    },\n    setRippleClips(){\n        // update content clips world positions from this current element.\n        this.content_clips[0].set(new Vector3( 0, 1, 0 ), (this.data.size.y/2));\n        this.content_clips[1].set(new Vector3( 0, -1, 0 ), (this.data.size.y/2));\n        this.content_clips[2].set(new Vector3( -1, 0, 0 ), (this.data.size.x/2));\n        this.content_clips[3].set(new Vector3( 1, 0, 0 ), (this.data.size.x/2));\n        //this.el.sceneEl.object3D.updateMatrixWorld();\n        this.content_clips[0].applyMatrix4(this.el.object3D.matrixWorld);\n        this.content_clips[1].applyMatrix4(this.el.object3D.matrixWorld);\n        this.content_clips[2].applyMatrix4(this.el.object3D.matrixWorld);\n        this.content_clips[3].applyMatrix4(this.el.object3D.matrixWorld);\n        (this.ripple.material as any).clippingPlanes = (this.el as any)._content_clips?(this.el as any)._content_clips.concat(this.content_clips):this.content_clips;\n        (this.ripple.material as any).clipShadows = true;\n        (this.ripple.material as any).needsUpdate = true;\n    },\n    tweenSize(geometry){\n        let _this = this;\n        // Start changes\n        Utils.isChanging(this.el.sceneEl,_this.ripple.uuid);\n        new TWEEN.Tween({x:0.00001})\n            .to({ x: 1}, this.data.duration)\n            .onUpdate(function(){\n                _this.ripple.scale.set(this.x,this.x,this.x);\n            })\n            .onComplete(()=>{\n                _this.ripple.scale.set(0.00001,0.00001,0.00001);\n                // Reset throttle flag.\n                this.isRippling = false;\n                // Stop changes\n                Utils.stoppedChanging(_this.ripple.uuid);\n            })\n            .easing(TWEEN.Easing.Exponential.Out).start();\n    },\n    tweenOpacity(material){\n        new TWEEN.Tween({x:0.4})\n            .to({ x: 0}, this.data.fadeDuration)\n            .delay(this.data.fadeDelay)\n            .onUpdate(function(){\n                material.opacity = this.x;\n            })\n            .onComplete(()=>{\n                material.opacity = 0.4;\n            })\n            .easing(TWEEN.Easing.Exponential.Out).start();\n    }\n});","/* global TWEEN */\n\nimport {registerComponent} from \"aframe\";\nimport {Math, Mesh, MeshBasicMaterial} from \"three\";\nimport {Utils} from \"../utils\";\n\n/**\n * Slider Component for aframe-material-collection. Includes a disabled state.\n * @namespace aframe-material-collection\n * @component ui-slider\n * @author Shane Harris\n */\nexport = registerComponent('ui-slider', {\n    schema: {\n        value: {type:'number',default: 0},\n        disabled:{type:'boolean',default: false},\n        progressColor:{default:'#4db6ac'},\n        handleColor:{default:'#009688'},\n        handleDisabledColor:{default:'#afafaf'},\n        railColor:{default:'#fff'},\n        handleZIndex:{type:'number',default:0.001},\n        intersectableClass: {default: 'intersectable'},\n        width:{type:'number',default: 0.5},\n        height:{type:'number',default: 0.1},\n        lookControlsComponent:{default:'look-controls'},\n        handleRadius:{type:'number',default:0.055},\n        scrollZOffset:{type:'number',default:0},\n        cameraEl:{type:'selector'},\n    },\n    getValue(){\n        return this.scroll_perc;\n    },\n    init(){\n        this.scroll_perc = this.data.value;\n        this.width = this.data.width;\n        this.height = this.data.height;\n        // Setup background with mouse input to catch mouse move events when not exactly over the scroll bar.\n        this.backgroundPanel = document.createElement('a-plane');\n        this.backgroundPanel.setAttribute('class','no-yoga-layout background '+this.data.intersectableClass);\n        this.backgroundPanel.setAttribute('width',this.data.width+1);\n        this.backgroundPanel.setAttribute('height',this.data.height+1);\n        this.backgroundPanel.setAttribute('position','0 0 -0.02');\n        this.backgroundPanel.setAttribute('opacity',0.0001);//\n        this.backgroundPanel.setAttribute('transparent',true);\n        this.el.appendChild(this.backgroundPanel);\n        // Setup handle circle entity.\n        this.handleEl = document.createElement('a-circle');\n        this.handleEl.setAttribute('radius',this.data.handleRadius);\n        this.handleEl.setAttribute('color',this.data.handleColor);\n        this.handleEl.setAttribute('shader','flat');\n        this.handleEl.setAttribute('ui-ripple','size:0.1 0.1;color:#999;fadeDelay:300;duration:500');\n        this.handleEl.setAttribute('class',this.data.intersectableClass+' no-yoga-layout');\n        this.handleEl.setAttribute('position',((-(this.data.width)/2)+this.data.handleRadius)+' 0 '+this.data.handleZIndex);\n        this.handleEl.setAttribute('segments',6);\n        this.el.appendChild(this.handleEl);\n\n        // Setup rail entity.\n        this.railEl = document.createElement('a-plane');\n        this.railEl.setAttribute('width',(this.data.width-0.1));\n        this.railEl.setAttribute('height','0.05');\n        this.railEl.setAttribute('shader','flat');\n        this.railEl.setAttribute('ui-rounded','borderRadius:0.025');\n        this.railEl.setAttribute('color',this.data.railColor);\n        this.railEl.setAttribute('class',this.data.intersectableClass+' no-yoga-layout');\n        this.el.appendChild(this.railEl);\n        // Wait for the rounded edge on the rail to load to clone the geometry for the\n        // selected progress bar part of the rail\n        this.railEl.addEventListener('rounded-loaded',()=>{\n            this.getRailObject(this.railEl.object3D);\n            this.slide(this.scroll_perc,true);\n        });\n        // Pause/play camera look controls\n        const playPauseCamera = method=>{\n            if(this.data.cameraEl) {\n                let lookControls = this.data.cameraEl.components[this.data.lookControlsComponent];\n                if(lookControls){\n                    lookControls[method]();\n                }\n            }\n        };\n        // Setup mouse move handler for scrolling and updating scroll handle.\n        const mousemove = e=>this.mouseMove(e);\n        // Start scroll\n        this.handleEl.addEventListener('mousedown',e=>{\n            // Pause look controls to allow scrolling\n            playPauseCamera('pause');\n            this.isDragging = true;\n            // Store the start point offset\n            this.el.emit('slide-start',this.scroll_perc);\n            this.handlePos = this.handleEl.object3D.worldToLocal(e.detail.intersection?e.detail.intersection.point:e.relatedTarget.object3D.position).x;\n            this.backgroundPanel.addEventListener('ui-mousemove',mousemove);\n            // Start changes\n            Utils.isChanging(this.el.sceneEl,this.handleEl.object3D.uuid);\n            // Prevent default behaviour of event\n            Utils.preventDefault(e);\n        });\n        // End scroll\n        const endScroll = e=>{\n            if(this.isDragging){\n                this.backgroundPanel.removeEventListener('ui-mousemove',mousemove);\n                // Play look controls once scrolling is finished\n                playPauseCamera('play');\n                this.isDragging = false;\n                // Stop changes\n                this.el.emit('slide-end',this.scroll_perc);\n                Utils.stoppedChanging(this.handleEl.object3D.uuid);\n                // Prevent default behaviour of event\n                Utils.preventDefault(e);\n            }\n        };\n        this.backgroundPanel.addEventListener('mouseup',endScroll);\n        this.backgroundPanel.addEventListener('mouseleave',endScroll);\n        // // Handle clicks on rail to scroll\n        this.railEl.addEventListener('mousedown',e=>{\n\n            Utils.isChanging(this.el.sceneEl,this.handleEl.object3D.uuid);\n            // Pause look controls\n            this.isDragging = true;\n            // Reset handle pos to center of handle\n            this.handlePos = 0;\n            // Scroll immediately and register mouse move events.\n            this.slide(this.railEl.object3D.worldToLocal(e.detail.intersection?e.detail.intersection.point:e.relatedTarget.object3D.position).x);\n            this.backgroundPanel.addEventListener('ui-mousemove',mousemove);\n            this.el.emit('slide-end',this.scroll_perc);\n            // Prevent default behaviour of event\n            Utils.preventDefault(e);\n        });\n        this.el.slide = this.slide.bind(this);\n        this.el.getValue = this.getValue.bind(this);\n        this.el.railEl = this.railEl;\n    },\n    slide(positionX,isPerc){\n        let min = (-(this.data.width)/2)+this.data.handleRadius;\n        let max = ((this.data.width)/2)-this.data.handleRadius;\n        // Set scroll position with start point offset.\n        let scroll_pos = isPerc?(min+((max-min)*positionX)):Math.clamp(positionX,min,max);\n        this.scroll_perc = isPerc?positionX:((scroll_pos-min)/(max-min));\n        this.el.emit('slide',this.scroll_perc);\n        this.progress.scale.set(this.scroll_perc||0.0001,1,1);\n        this.progress.position.set((-(this.data.width-this.data.handleRadius)/2)+(this.scroll_perc*((this.data.width-this.data.handleRadius)/2)),0,0.0001);\n        this.handleEl.setAttribute('position',/*((this.data.width/2)+this.data.scrollPadding)+' '+*/scroll_pos+' 0 '+(this.data.scrollZOffset+0.0005));\n    },\n    mouseMove(e){\n        if(this.isDragging){\n            let pos = this.railEl.object3D.worldToLocal(e.detail.intersection.point);\n            this.slide(pos.x-this.handlePos+this.data.handleRadius);\n        }\n    },\n    getRailObject(object){\n        // Get the rounded shape geomtery.\n        object.traverse(child=>{\n            if(child.geometry&&child.geometry.type===\"ShapeBufferGeometry\"){\n                this.progress = new Mesh(child.geometry.clone(),new MeshBasicMaterial({color:this.data.progressColor}));\n                this.progress.position.set(-this.data.width/2,0,0.0001);\n                this.progress.scale.set(0.00001,1,1);\n                this.el.object3D.add(this.progress);\n            }\n        });\n    },\n});","/* global TWEEN */\nimport UI from '../ui';\nimport {registerComponent} from \"aframe\";\n\n/**\n * NUmber widget Component for aframe-material-collection. Includes up/down buttons\n * @namespace aframe-material-collection\n * @component ui-number\n * @author Shane Harris\n */\n\nexport = registerComponent('ui-number', {\n    schema: {\n        value: {type: 'number', default: 0},\n        increment: {type: 'number', default: 0.001},\n        width:{type: 'number',default: 0.65},\n        height:{type: 'number',default: 0.2},\n        intersectableClass: {default: 'intersectable'},\n    },\n    init(){\n        this.setupElements();\n    },\n    setupElements(){\n        let numberText = document.createElement('a-plane');\n        numberText.setAttribute('width',\"0.55\");\n        numberText.setAttribute('height',\"0.2\");\n        numberText.className = 'no-yoga-layout';\n        numberText.setAttribute('color',\"#212121\");\n        numberText.setAttribute('text',\"value:\"+this.data.value.toFixed(3)+\";color:#212121;wrapCount:12;align:center\");\n        numberText.setAttribute('ui-border',\"borderRadius:0.1;borderWidth:0.008\");\n\n        let upButton = document.createElement('a-ui-fab-button-small');\n        upButton.setAttribute('scale','0.75 0.75 0.75');\n        upButton.className = 'no-yoga-layout '+this.data.intersectableClass;\n        upButton.setAttribute('color','#009688');\n        upButton.setAttribute('position','0.33 0.055 0.001');\n        upButton.setAttribute('color','#009688');\n        upButton.setAttribute('icon-color','#fff');\n        upButton.setAttribute('ripple-color','#009688');\n        upButton.setAttribute('src','https://cdn.theexpanse.app/images/icons/baseline_keyboard_arrow_up_white_18dp.png');\n        upButton.addEventListener('click',()=>{\n            this.data.value+=this.data.increment;\n            numberText.setAttribute('text',\"value:\"+(this.data.value).toFixed(3)+\";color:#212121;wrapCount:12;align:center\");\n            this.el.emit('change',this.data.value);\n        });\n        let downButton = document.createElement('a-ui-fab-button-small');\n        downButton.setAttribute('scale','0.75 0.75 0.75');\n        downButton.className = 'no-yoga-layout '+this.data.intersectableClass;\n        downButton.setAttribute('color','#009688');\n        downButton.setAttribute('position','0.33 -0.055 0.001');\n        downButton.setAttribute('color','#009688');\n        downButton.setAttribute('icon-color','#fff');\n        downButton.setAttribute('ripple-color','#009688');\n        downButton.setAttribute('src','https://cdn.theexpanse.app/images/icons/down_arrow.png');\n        downButton.addEventListener('click',()=>{\n            this.data.value-=this.data.increment;\n            numberText.setAttribute('text',\"value:\"+(this.data.value).toFixed(3)+\";color:#212121;wrapCount:12;align:center\");\n            this.el.emit('change',this.data.value);\n        });\n        numberText.appendChild(upButton);\n        numberText.appendChild(downButton);\n        this.el.appendChild(numberText);\n    }\n});\n\n/*\n<a-plane class=\"zInput\" width=\"0.55\" ui-border=\"borderRadius:0.1;borderWidth:0.008\" height=\"0.2\" color=\"#212121\" text=\"value:{{to-fixed vector.z 3}};color:#212121;wrapCount:12;align:center\">\n        <a-ui-fab-button-small scale=\"0.75 0.75 0.75\" class=\"zInputUp intersectable no-yoga-layout\" color=\"#009688\" position=\"0.33 0.055 0.001\" icon-color=\"#fff\" ripple-color=\"#009688\" src=\"https://cdn.theexpanse.app/images/icons/baseline_keyboard_arrow_up_white_18dp.png\"></a-ui-fab-button-small>\n        <a-ui-fab-button-small scale=\"0.75 0.75 0.75\" class=\"zInputDown intersectable no-yoga-layout\" color=\"#009688\" position=\"0.33 -0.055 0.001\" icon-color=\"#fff\" ripple-color=\"#009688\" src=\"https://cdn.theexpanse.app/images/icons/down_arrow.png\"></a-ui-fab-button-small>\n    </a-plane>\n */","/* global TWEEN */\n\nimport {Mesh, MeshBasicMaterial, Vector3} from \"three\";\nimport {Utils} from \"../utils\";\n\n/**\n * Switch Component for aframe-material-collection. Includes a disabled state.\n * @namespace aframe-material-collection\n * @component ui-switch\n * @author Shane Harris\n */\nexport = AFRAME.registerComponent('ui-switch', {\n    schema: {\n        value: {type:'boolean',default: false},\n        disabled:{type:'boolean',default: false},\n        progressColor:{default:'#4db6ac'},\n        handleColor:{default:'#009688'},\n        handleDisabledColor:{default:'#afafaf'},\n        railColor:{default:'#fff'},\n        switchDuration:{type:'int',default: 350},\n        handleZIndex:{type:'number',default:0.01},\n        intersectableClass: {default: 'intersectable'},\n        width:{type:'number',default: 0.3},\n        height:{type:'number',default: 0.1},\n    },\n    updateSchema(){\n        if(this.data){\n            if(this.data.disabled){\n                if(this.data.value){\n                    this.data.value=false;\n                    this.click();\n                }\n            }else{\n                this.click();\n            }\n            this.setDisabled();\n        }\n    },\n    init() {\n        this.width = 0.3;\n        this.height = 0.1;\n        // Setup handle circle entity.\n        let handle = `\n            <a-circle radius=\"0.055\" shader=\"flat\" color=\"`+this.data.handleColor+`\" \n            ui-ripple=\"size:0.1 0.1;color:#999;fadeDelay:300;duration:500\" class=\"`+this.data.intersectableClass+` no-yoga-layout\"\n            position=\"-0.05 0 `+this.data.handleZIndex+`\" segments=\"6\"></a-circle>`;\n        this.el.insertAdjacentHTML('beforeend',handle);\n        this.handleEl = this.el.lastChild;\n\n        // Setup rail entity.\n        let rail = `<a-plane width=\"0.15\" shader=\"flat\" height=\"0.05\" \n            ui-rounded=\"borderRadius:0.025\" class=\"`+this.data.intersectableClass+` no-yoga-layout\"\n            color=\"`+this.data.railColor+`\" segments=\"6\"></a-plane>`;\n        this.el.insertAdjacentHTML('beforeend',rail);\n        this.railEl = this.el.lastChild;\n        // Wait for the rounded edge on the rail to load to clone the geometry for the\n        // selected progress bar part of the rail\n        this.railEl.addEventListener('rounded-loaded',()=>{\n            this.getRailObject(this.railEl.object3D);\n            this.setDisabled();\n            this.click();\n        });\n        this.el.getValue = this.getValue.bind(this);\n        this.clickHandler = e=>{\n            this.data.value = !this.data.value;\n            this.click();\n            // Prevent default behaviour of event\n            if(e.detail.preventDefault){\n                e.detail.preventDefault();\n            }\n        };\n    },\n    getValue(){\n        return this.data.value;\n    },\n    setDisabled(){\n        // Add / Remove click handlers based on disabled state.\n        if(this.data.disabled){\n            this.handleEl.removeEventListener('mousedown',this.clickHandler);\n            this.handleEl.setAttribute('color',this.data.handleDisabledColor);\n        }else{\n            this.handleEl.addEventListener('mousedown',this.clickHandler);\n            this.handleEl.setAttribute('color',this.data.handleColor);\n        }\n    },\n    click(){\n        // Emit the current selected value\n        this.el.emit('ui-switch-changed',this.data.value);\n        // Animate the switch handle and the progress bar.\n        this.tweenHandle();\n        this.tweenProgress();\n    },\n    getRailObject(object){\n        // Get the rounded shape geomtery.\n        object.traverse(child=>{\n            if(child.geometry&&child.geometry.type===\"ShapeBufferGeometry\"){\n                this.progress = new Mesh(child.geometry.clone(),new MeshBasicMaterial({color:this.data.progressColor}));\n                this.progress.position.set(-0.075,0,0.001);\n                this.progress.scale.set(0.00001,1,1);\n                this.el.object3D.add(this.progress);\n            }\n        });\n    },\n    tweenProgress(){\n        if(this.progress){\n            new TWEEN.Tween(this.progress.position)\n                .to(new Vector3(this.data.value?0:-0.075,0,0.001), this.data.switchDuration)\n                .easing(TWEEN.Easing.Exponential.Out).start();\n            new TWEEN.Tween(this.progress.scale)\n                .to(new Vector3(this.data.value?1:0.00001,1,1), this.data.switchDuration)\n                .easing(TWEEN.Easing.Exponential.Out).start();\n        }\n    },\n    tweenHandle(){\n        if(this.handleEl){\n            // Start changes\n            Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n            new TWEEN.Tween(this.handleEl.object3D.position)\n                .to(new Vector3(this.data.value?0.05:-0.05,0,this.data.handleZIndex), this.data.switchDuration)\n                .onComplete(()=>{\n                    // Stop changes\n                    Utils.stoppedChanging(this.el.object3D.uuid);\n                })\n                .easing(TWEEN.Easing.Exponential.Out).start();\n        }\n    }\n});","/* global TWEEN */\n\nimport {Utils} from \"../utils\";\n\n/**\n * Toast Component for aframe-material-collection.\n * @namespace aframe-material-collection\n * @component ui-toast\n * @author Shane Harris\n */\nexport = AFRAME.registerComponent('ui-toast', {\n    schema: {\n        toastEl:{type:'selector'},\n        message:{default:'Hello from toast!'}\n    },\n    init() {\n        this.originalPosition = this.data.toastEl.getAttribute('position').clone();\n        this.el.addEventListener('mousedown',()=>{\n            if(this.closeTween)this.closeTween.stop();\n            Utils.isChanging(this.el.sceneEl,this.data.toastEl.object3D.uuid);\n            this.data.toastEl.setAttribute('visible',true);\n            this.data.toastEl.setAttribute('text-value',Utils.shorten(this.data.message,85));\n            let _this = this;\n            new TWEEN.Tween({x:this.originalPosition.x,y:this.originalPosition.y-0.1,z:this.originalPosition.z})\n                .to(this.originalPosition, 350)\n                .onUpdate(function(){\n                    _this.data.toastEl.setAttribute('position',this);\n                })\n                .onComplete(()=>{\n                    // Stop changes\n                    this.closeTween = new TWEEN.Tween({x:0.8})\n                        .delay(2000)\n                        .to({x:0.0001}, 350)\n                        .onUpdate(function(){\n                            _this.data.toastEl.setAttribute('opacity',this.x);\n                        })\n                        .onComplete(()=>{\n                            this.data.toastEl.setAttribute('visible',false);\n                            Utils.stoppedChanging(this.data.toastEl.object3D.uuid);\n                        })\n                        .easing(TWEEN.Easing.Exponential.Out).start();\n                })\n                .easing(TWEEN.Easing.Exponential.Out).start();\n            new TWEEN.Tween({x:0.0001})\n                .to({x:0.8}, 350)\n                .onUpdate(function(){\n                    _this.data.toastEl.setAttribute('opacity',this.x);\n                })\n                .easing(TWEEN.Easing.Exponential.Out).start();\n        });\n    }\n});","import {Math, Plane, Vector3} from 'three';\nimport Yoga from \"yoga-layout\";\n\n/**\n * Scroll Pane for aframe-material-collection. Expects\n * @namespace aframe-material-collection\n * @component ui-scroll-pane\n * @author Shane Harris\n */\nimport YogaWorker from 'worker-loader!../yoga-worker.ts';\nimport {registerComponent} from \"aframe\";\nimport {Utils} from \"../utils\";\nlet workerResolves = {};\nlet yogaWorker = new YogaWorker();\nyogaWorker.onmessage = event=>{\n    if(workerResolves.hasOwnProperty(event.data.uuid)){\n        workerResolves[event.data.uuid](event.data);\n    }\n};\nlet sendMessage = (type,properties,parentUuid,width)=>{\n    return new Promise(resolve=>{\n        let uuid = Math.generateUUID();\n        workerResolves[uuid] = resolve;\n        yogaWorker.postMessage({ type, properties, uuid, parentUuid, width});\n    });\n};\nexport = registerComponent('ui-scroll-pane', {\n    schema: {\n        height:{type:'number',default:1.2},\n        width:{type:'number',default:2.9},\n        scrollPadding:{type:'number',default:0.05},\n        scrollZOffset:{type:'number',default:0},\n        scrollHandleColor:{default:'#009688'},\n        intersectableClass:{default:'intersectable'},\n        cameraEl:{type:'selector'},\n        lookControlsComponent:{default:'look-controls'},\n    },\n    init() {\n        // Setup scroll bar and panel backing.\n        this.setupElements();\n        // Grab content container.\n        this.container = this.el.querySelector('.container');\n        if(typeof this.container === 'undefined'){\n            throw 'ui-scroll-pane needs an entity inside it with the class \"container\" - <a-entity class=\"container\"></a-entity>';\n        }\n        // Setup scroll bar.\n        this.scrollBarWidth = this.rail.getAttribute('width');\n        this.container.setAttribute('position',(-this.data.width/2)+' '+((this.data.height/2))+' 0');\n        this.rail.setAttribute('position',((this.data.width/2)+this.data.scrollPadding)+' 0 '+(this.data.scrollZOffset+0.0002));\n        this.handle.setAttribute('position',((this.data.width/2)+this.data.scrollPadding)+' 0 '+(this.data.scrollZOffset+0.0005));\n        this.el.sceneEl.renderer.localClippingEnabled = true;\n        // Setup content clips.\n        this.content_clips = [\n            new Plane( new Vector3( 0, 1, 0 ), (this.data.height/2) ),\n            new Plane( new Vector3( 0, -1, 0 ), (this.data.height/2) ),\n            new Plane( new Vector3( -1, 0, 0 ), (this.data.width/2) ),\n            new Plane( new Vector3( 1, 0, 0 ), (this.data.width/2) )\n        ];\n        // Pause/play camera look controls\n        const playPauseCamera = method=>{\n            if(this.data.cameraEl) {\n                let lookControls = this.data.cameraEl.components[this.data.lookControlsComponent];\n                if(lookControls){\n                    lookControls[method]();\n                }\n            }\n        };\n        // Setup mouse move handler for scrolling and updating scroll handle.\n        const mousemove = e=>this.mouseMove(e);\n        // Start scroll\n        this.handle.addEventListener('mousedown',e=>{\n            // Pause look controls to allow scrolling\n            playPauseCamera('pause');\n            this.isDragging = true;\n            // Store the start point offset\n            this.handlePos = this.handle.object3D.worldToLocal(e.detail.intersection.point).y;\n            this.backgroundPanel.addEventListener('ui-mousemove',mousemove);\n            // Start changes\n            Utils.isChanging(this.el.sceneEl,this.handle.object3D.uuid);\n            // Prevent default behaviour of event\n            Utils.preventDefault(e);\n        });\n        // End scroll\n        const endScroll = e=>{\n            if(this.isDragging){\n                this.backgroundPanel.removeEventListener('ui-mousemove',mousemove);\n                // Play look controls once scrolling is finished\n                playPauseCamera('play');\n                this.isDragging = false;\n                // Stop changes\n                Utils.stoppedChanging(this.handle.object3D.uuid);\n                // Prevent default behaviour of event\n                Utils.preventDefault(e);\n            }\n        };\n        this.backgroundPanel.addEventListener('mouseup',endScroll);\n        this.backgroundPanel.addEventListener('mouseleave',endScroll);\n        // // Handle clicks on rail to scroll\n        this.rail.addEventListener('mousedown',e=>{\n\n            Utils.isChanging(this.el.sceneEl,this.handle.object3D.uuid);\n            // Pause look controls\n            this.isDragging = true;\n            // Reset handle pos to center of handle\n            this.handlePos = 0;\n            // Scroll immediately and register mouse move events.\n            this.scroll(this.rail.object3D.worldToLocal(e.detail.intersection.point).y);\n            this.backgroundPanel.addEventListener('ui-mousemove',mousemove);\n            // Prevent default behaviour of event\n            Utils.preventDefault(e);\n        });\n\n        // Setup content clips after the scene is loaded to be able to access all entity materials\n\n        // update content clips world positions from this current element.\n\n        this.updateContent();\n        this.el.emit('scroll-pane-loaded');\n        this.setupMouseWheelScroll();\n\n        // Expose methods to the element to update/set the content of the scroll pane.\n        this.el.setContent = this.setContent.bind(this);\n        this.el.updateContent = this.updateContent.bind(this);\n        this.el.scroll = this.scroll.bind(this);\n    },\n    updateContentClips(){\n        this.el.sceneEl.object3D.updateMatrixWorld();\n        // update content clips world positions from this current element.\n        this.content_clips[0].set(new Vector3( 0, 1, 0 ), (this.data.height/2));\n        this.content_clips[1].set(new Vector3( 0, -1, 0 ), (this.data.height/2));\n        this.content_clips[2].set(new Vector3( -1, 0, 0 ), (this.data.width/2));\n        this.content_clips[3].set(new Vector3( 1, 0, 0 ), (this.data.width/2));\n        //this.el.sceneEl.object3D.updateMatrixWorld();\n        this.content_clips[0].applyMatrix4(this.el.object3D.matrixWorld);\n        this.content_clips[1].applyMatrix4(this.el.object3D.matrixWorld);\n        this.content_clips[2].applyMatrix4(this.el.object3D.matrixWorld);\n        this.content_clips[3].applyMatrix4(this.el.object3D.matrixWorld);\n\n    },\n    async setContent(body,noAutoReload){\n        if(this.container) {\n            // Remove all children in the container and all yoga nodes\n            while (this.container.firstChild) {\n                let child = this.container.firstChild;\n                if(child.object3D){\n                    Utils.clearObject(child.object3D);\n                }\n                this.container.removeChild(child);\n                this.container.firstChild = null;\n            }\n            // Set the content in the scroll pane.\n            return new Promise(resolve=>{\n                let loadedWrapper = document.createElement('a-entity');\n                loadedWrapper.setAttribute('visible',false);\n                loadedWrapper.insertAdjacentHTML('afterbegin',body);\n                loadedWrapper.addEventListener('loaded',e=>{\n                    // Trigger an update to redraw scrollbars and fire change events.\n                    sendMessage('reset-layout',null,this.container.yoga_uuid, undefined)\n                        .then(async ()=>{\n                            loadedWrapper.setAttribute('visible',true);\n                            if(!noAutoReload){\n                                return this.updateContent();\n                            }\n                        })\n                        .then(()=>resolve(loadedWrapper));\n                });\n                this.container.appendChild(loadedWrapper);\n            })\n        }\n    },\n    async updateContent(should_not_scroll){\n        this.updateContentClips();\n        this.currentUuid = Math.generateUUID();\n        Utils.isChanging(this.el.sceneEl,this.currentUuid);\n        this.setChildClips();\n        await this.initialiseYoga(this.container);\n        await sendMessage('get-layout',null,this.container.yoga_uuid, undefined)\n            .then(layout=>{\n                this.content_height = (layout as any).data.content_height/100;\n                //console.log(layout.data.content_height/100);\n                this.updateYoga(this.container,(layout as any).data);\n\n                this.handleSize = Math.clamp((this.data.height/this.content_height),0.1,1);\n\n                this.handle.setAttribute('visible',this.handleSize!==1);\n                this.rail.setAttribute('visible',this.handleSize!==1);\n                this.rail.setAttribute('color',this.handleSize===1?'#efefef':'#fff');\n                this.handle.setAttribute('height',this.data.height*this.handleSize);\n                if(!should_not_scroll){\n                    this.container.object3D.position.y = this.data.height/2;\n                    this.handle.setAttribute('position',((this.data.width/2)+this.data.scrollPadding)+' '+(this.data.height-(this.data.height*this.handleSize))/2+' '+(this.data.scrollZOffset+0.0005));\n                }\n                setTimeout(()=>Utils.stoppedChanging(this.currentUuid),3000);\n            });\n    },\n    mouseMove(e){\n        if(this.isDragging){\n            let pos = this.rail.object3D.worldToLocal(e.detail.intersection.point);\n            this.scroll(pos.y-this.handlePos);\n        }\n    },\n    scroll(positionY){\n        let min = (-this.data.height/2)+(this.data.height*this.handleSize)/2;\n        let max = (this.data.height/2)-(this.data.height*this.handleSize)/2;\n        // Set scroll position with start point offset.\n        let scroll_pos = Math.clamp(positionY,min,max);\n        let scroll_perc = this.handleSize===1?0:1-((scroll_pos-min)/(max-min));\n        this.container.object3D.position.y = ((this.content_height-this.data.height)*scroll_perc)+(this.data.height/2);\n        this.handle.setAttribute('position',((this.data.width/2)+this.data.scrollPadding)+' '+scroll_pos+' '+(this.data.scrollZOffset+0.0005));\n    },\n    setupMouseWheelScroll(){\n        this.backgroundPanel.addEventListener('ui-mousewheel',e=>{\n            if(this.handleSize!==1){\n                // Start changes\n                Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n                this.scroll(this.handle.getAttribute('position').y+(e.detail.evt.deltaY<0?0.1:-0.1));\n                // Stop changes\n                Utils.stoppedChanging(this.el.object3D.uuid);\n                Utils.preventDefault(e);\n            }\n        });\n    },\n    setupElements(){\n        // Setup background with mouse input to catch mouse move events when not exactly over the scroll bar.\n        this.backgroundPanel = document.createElement('a-plane');\n        this.backgroundPanel.setAttribute('class','background '+this.data.intersectableClass);\n        this.backgroundPanel.setAttribute('width',this.data.width+1);\n        this.backgroundPanel.setAttribute('height',this.data.height+1);\n        this.backgroundPanel.setAttribute('position','0 0 -0.013');\n        this.backgroundPanel.setAttribute('opacity',0.0001);\n        this.backgroundPanel.setAttribute('transparent',true);\n\n        this.el.appendChild(this.backgroundPanel);\n\n        // Add scroll bar rail.\n        this.rail = document.createElement('a-plane');\n        this.rail.setAttribute('class','rail '+this.data.intersectableClass);\n        this.rail.setAttribute('width',0.1);\n        this.rail.setAttribute('height',this.data.height);\n        this.rail.setAttribute('shader','flat');\n        this.el.appendChild(this.rail);\n\n        // Add scroll bar handle.\n        this.handle = document.createElement('a-plane');\n        this.handle.setAttribute('class','handle '+this.data.intersectableClass);\n        this.handle.setAttribute('width',0.1);\n        this.handle.setAttribute('height',this.data.height);\n        this.handle.setAttribute('color',this.data.scrollHandleColor);\n        this.handle.setAttribute('shader','flat');\n        this.el.appendChild(this.handle);\n    },\n    setupYogaNode(node,width,height,properties){\n        // Parse yoga properties and call the yoga methods to setup this layout node.\n        // for(let method in properties){\n        //     if(properties.hasOwnProperty(method)&&method.indexOf('Edge')===-1){\n        //         if([\"setMarginLeft\",\"setMarginPercentLeft\",\"setPaddingLeft\",\"setBorderLeft\",\"setPositionLeft\",\"setPositionPercentLeft\"]\n        //             .indexOf(method)>-1){\n        //             node[method.replace('Left','')](Yoga.EDGE_LEFT,properties[method]);\n        //         }else if([\"setMarginRight\",\"setMarginPercentRight\",\"setPaddingRight\",\"setBorderRight\",\"setPositionRight\",\"setPositionPercentRight\"]\n        //             .indexOf(method)>-1){\n        //             node[method.replace('Right','')](Yoga.EDGE_RIGHT,properties[method]);\n        //         }else if([\"setMarginTop\",\"setMarginPercentTop\",\"setPaddingTop\",\"setBorderTop\",\"setPositionTop\",\"setPositionPercentTop\"]\n        //             .indexOf(method)>-1){\n        //             node[method.replace('Top','')](Yoga.EDGE_TOP,properties[method]);\n        //         }else if([\"setMarginBottom\",\"setMarginPercentBottom\",\"setPaddingBottom\",\"setBorderBottom\",\"setPositionBottom\",\"setPositionPercentBottom\"]\n        //             .indexOf(method)>-1){\n        //             node[method.replace('Bottom','')](Yoga.EDGE_BOTTOM,properties[method]);\n        //         }else if([\"setMargin\",\"setMarginPercent\",\"setPadding\",\"setBorder\",\"setPosition\",\"setPositionPercent\"]\n        //             .indexOf(method)>-1){\n        //             node[method](Yoga.EDGE_ALL,properties[method]);\n        //         }else if(method.indexOf('setMarginAuto')>-1){\n        //             let side = method.replace('setMarginAuto','');\n        //             let _method = method.replace(side,'');\n        //             switch(side){\n        //                 case \"\":\n        //                     node[_method](Yoga.EDGE_ALL);\n        //                     break;\n        //                 case \"Left\":\n        //                     node[_method](Yoga.EDGE_LEFT);\n        //                     break;\n        //                 case \"Right\":\n        //                     node[_method](Yoga.EDGE_RIGHT);\n        //                     break;\n        //                 case \"Top\":\n        //                     node[_method](Yoga.EDGE_TOP);\n        //                     break;\n        //                 case \"Bottom\":\n        //                     node[_method](Yoga.EDGE_BOTTOM);\n        //                     break;\n        //             }\n        //         }else if([\"setWidthAuto\",\"setHeightAuto\"]\n        //             .indexOf(method)>-1) {\n        //             node[method]();\n        //         }else{\n        //             node[method](properties[method]);\n        //         }\n        //     }\n        // }\n    },\n\n    async initialiseYoga(parent){\n        // Traverse the tree and setup Yoga layout nodes with default settings\n        // or settings specified in the elements yoga properties component.\n        parent = parent||this.container;\n        // Automatically detect the entity width / height by the element tagname.\n        let width = 0,height = 0;\n        let geo = parent.getAttribute('geometry');\n        switch(parent.tagName){\n            case \"A-TEXT\":\n            case \"A-TRIANGLE\":\n            case \"A-UI-TEXT-INPUT\":\n            case \"A-UI-NUMBER-INPUT\":\n            case \"A-UI-INT-INPUT\":\n            case \"A-UI-INPUT-TEXT\":\n            case \"A-UI-PASSWORD-INPUT\":\n                width = parent.getAttribute('width');\n                height = parent.getAttribute('height');\n                break;\n            case \"A-UI-BUTTON\":\n            case \"A-PLANE\":\n            case \"A-ENTITY\":\n                width = Number(geo?geo.width:parent.getAttribute('width'));\n                height = Number(geo?geo.height:parent.getAttribute('height'));\n                break;\n            case \"A-UI-FAB-BUTTON\":\n            case \"A-UI-FAB-BUTTON-SMALL\":\n            case \"A-CIRCLE\":\n                width = Number(geo?geo.radius*2:(parent.getAttribute('radius')||0)*2);\n                height = width;\n                break;\n            case \"A-RING\":\n                width = Number(geo?geo[\"radius-outer\"]*2:(parent.getAttribute('radius-outer')||0)*2);\n                height = width;\n                break;\n            case \"A-UI-SLIDER\":\n            case \"A-UI-NUMBER\":\n            case \"A-UI-SWITCH\":\n            case \"A-UI-CHECKBOX\":\n            case \"A-UI-RADIO\":\n                let componentName = parent.tagName.substr(2).toLowerCase();\n                width = parent.getAttribute(componentName).width;\n                height = parent.getAttribute(componentName).height;\n                break;\n        }\n        // width = Math.round(width);\n        // height = Math.round(height);\n        //parent.yoga_node = Yoga.Node.create();\n        let ui_yoga = parent.getAttribute(\"ui-yoga\");\n        let properties = {} as any;\n        if(ui_yoga&&parent.getYogaProperties){\n            properties = parent.getYogaProperties();\n        }else{\n            properties.setJustifyContent = Yoga.JUSTIFY_FLEX_START;\n            properties.setFlexDirection = Yoga.FLEX_DIRECTION_ROW;\n            properties.setAlignContent = Yoga.ALIGN_AUTO;\n            properties.setFlexWrap = Yoga.WRAP_WRAP;\n            if(parent.parentElement&&parent.parentElement.yoga_uuid){\n                // Default margin if none set;\n                properties.setMarginRight = 5;\n                properties.setMarginBottom = 5;\n            }else{\n                // Default root padding if none set;\n                properties.setPadding = 2;\n            }\n        }\n        if(!properties.hasOwnProperty('setWidth')){\n            properties.setWidth = width ? width * 100 : 'auto';\n        }\n        if(!properties.hasOwnProperty('setHeight')){\n            properties.setHeight = height ? height * 100 : 'auto';\n        }\n        //this.setupYogaNode(parent.yoga_node,width ? width * 100 : 'auto',height ? height * 100 : 'auto',properties);\n        // if(parent.parentElement&&parent.parentElement.yoga_node){\n        //     parent.parentElement.yoga_node.insertChild(parent.yoga_node,parent.parentElement.yoga_node.getChildCount());\n        // }\n        let promise;\n        if(parent.parentElement&&parent.parentElement.yoga_uuid){\n            promise = sendMessage('add-node',properties,parent.parentElement.yoga_uuid, undefined);\n        }else{\n            promise = sendMessage('add-node',properties,null,this.data.width*100);\n        }\n        await promise.then(resp=>{\n            parent.yoga_uuid = resp.uuid;\n            let promises = new Array<any>();\n            for(let i = 0; i < parent.childNodes.length; i++) {\n                let child = parent.childNodes[i];\n                if (child.nodeType === 1) {\n                    if(!child.classList.contains('no-yoga-layout')){\n                        promises.push(this.initialiseYoga(child));\n                    }\n                }\n            }\n            return Promise.all(promises);\n        });\n    },\n\n    updateYoga(parent,layout){\n        // Update the entity positions from the Yoga layout.\n        for(let i = 0; i < parent.childNodes.length; i++){\n            let child = parent.childNodes[i];\n            if(child.nodeType === 1){\n                if(child.classList.contains('no-yoga-layout')){\n                    return;\n                }\n                let position;\n\n                if(!layout[child.yoga_uuid]){\n                    console.log(child,layout);\n                }\n                if(child.tagName===\"A-ENTITY\"){\n                    position = {\n                        x:(layout[child.yoga_uuid].left/100),\n                        y:(layout[child.yoga_uuid].top/100),\n                    };\n                }else{\n                    position = {\n                        x:(layout[child.yoga_uuid].left/100)+(layout[child.yoga_uuid].width/200),\n                        y:(layout[child.yoga_uuid].top/100)+(layout[child.yoga_uuid].height/200),\n                    };\n                }\n                child.setAttribute('position',position.x+' '+(-position.y)+' 0.0001');\n            }\n            this.updateYoga(child,layout);\n        }\n    },\n\n    setChildClips(parent){\n        // Traverse the entity tree inside the content container and add content clips to each material found.\n        parent = parent||this.container;\n        for(let i = 0; i < parent.childNodes.length; i++) {\n            let child = parent.childNodes[i];\n            //if (child.nodeType === 1) {\n            child._content_clips = this.content_clips;\n            let traverse = ()=>{\n                if(child.object3D){\n                    child.object3D.traverse(object=>{\n                        if(object.material){\n                            // Add shader chunks to be able to clip shader materials - needed for <a-text> entities.\n                            if(object.material.isRawShaderMaterial){\n                                object.material.onBeforeCompile = function ( shader ) {\n                                    let vertexParts = shader.vertexShader.split('\\n');\n                                    let vertexMainIndex = vertexParts.indexOf('void main(void) {');\n                                    vertexParts.splice(vertexMainIndex,0,'#include <clipping_planes_pars_vertex>');\n                                    vertexParts.splice(vertexMainIndex+2,0,'#include <begin_vertex>');\n                                    vertexParts.splice(vertexParts.length-2,0,'#include <project_vertex>');\n                                    vertexParts.splice(vertexParts.length-2,0,'#include <clipping_planes_vertex>');\n                                    shader.vertexShader = vertexParts.join('\\n');\n                                    let fragmentParts = shader.fragmentShader.split('\\n');\n                                    let fragmentMainIndex = fragmentParts.indexOf('void main() {');\n                                    fragmentParts.splice(fragmentMainIndex,0,'#include <clipping_planes_pars_fragment>');\n                                    fragmentParts.splice(fragmentMainIndex+2,0,'#include <clipping_planes_fragment>');\n                                    shader.fragmentShader = fragmentParts.join('\\n');\n                                };\n                                object.material.clipping = true;\n                            }\n                            // Set the content clipping planes.\n                            object.material.clippingPlanes = this.content_clips;\n                            object.material.clipShadows = true;\n                            object.material.needsUpdate = true;\n                        }\n                    });\n                }\n            };\n            // Wait for next tick - exokit required this.\n            setTimeout(()=>{\n                if(child.getAttribute){\n                    let text = child.getAttribute('text');\n\n                    if(text){\n                        // Wait for the font to load first.\n                        child.addEventListener('textfontset',()=>{\n                            clearTimeout(this.fontRenderTimeout);\n                            this.fontRenderTimeout = setTimeout(()=>Utils.stoppedChanging(this.currentUuid),500);\n                            traverse();\n                        })\n                    }else{\n                        traverse();\n                    }\n                }\n            },0);\n            // }\n            // Recurse\n            this.setChildClips(child);\n        }\n    }\n});","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"96036ce9552ce5ece7aa.worker.js\");\n};","import {registerComponent} from \"aframe\";\n\n/**\n * A component shim the mouse move event for the AFRAME cursor raycaster.\n * @namespace aframe-material-collection\n * @component ui-mouse-shim\n * @author Shane Harris\n */\nexport = registerComponent('ui-mouse-shim', {\n    onmousewheele: (e: any) => {},\n    lastMouseMoveTime: 0,\n    schema:{\n        fps:{type:'number',default:45}\n    },\n    init(){\n        if (!this.el.components.raycaster) {\n            throw 'ui-mouse-move component needs the raycaster component to be added.'\n        }\n        // Add support for mouse wheel\n        this.onmousewheele = this.onMouseWheel.bind(this);\n        (this.el.sceneEl as any).raycaster = this.el.components.raycaster;\n    },\n    pause(){\n        this.el.sceneEl!!.renderer.domElement.removeEventListener( 'wheel',this.onmousewheele , false);\n    },\n    play(){\n        this.el.sceneEl!!.renderer.domElement.addEventListener( 'wheel',this.onmousewheele , false);\n    },\n    onMouseWheel(e){\n        this.emitMouseEvent('ui-mousewheel',e);\n    },\n    tick() {\n        if(new Date().getTime()-this.lastMouseMoveTime<(1000/this.data.fps))return;\n        this.emitMouseEvent('ui-mousemove', undefined);\n        this.lastMouseMoveTime = new Date().getTime();\n    },\n    emitMouseEvent(eventType,event){\n        if((this.el.sceneEl as any).cursorPoint&&(this.el.components.raycaster as any).intersections.length&&this.el.sceneEl!!.renderer.vr.enabled){\n            (this.el.sceneEl as any).cursorPoint.position.copy((this.el.components.raycaster as any).intersections[0].point);\n            (this.el.sceneEl as any).cursorPoint.scale.set(1,1,1);\n        }else{\n            if((this.el.sceneEl as any).cursorPoint&&!(this.el.sceneEl as any).hasSceneCursor){\n                (this.el.sceneEl as any).cursorPoint.scale.set(0.00001,0.00001,0.00001);\n            }\n        }\n        // Get current intersections from raycaster component.\n        (this.el.components.raycaster as any).intersections.forEach(intersection=>{\n            if(intersection.object.el){\n                // Emit custom mouse move event ont he intersected element.\n                intersection.object.el.emit(eventType,{cursorEl:this.el,intersection:intersection,evt:event})\n            }\n        });\n    }\n});","import {registerComponent} from \"aframe\";\n\n/**\n * Checkbox A simple component to listen for two click events in quick succession.\n * @namespace aframe-material-collection\n * @component ui-double-click\n * @author Shane Harris\n */\nexport = registerComponent('ui-double-click', {\n    schema:{\n        timeout:{type:'int',default:200}\n    },\n    init() {\n        let last_click = 0;\n        // Add click event for listening for two clicks within the specified timespan.\n        this.el.addEventListener('mousedown',e=>{\n            let now = new Date().getTime();\n            if(now-last_click<this.data.timeout){\n                this.el.emit('dblclick',e);\n                // Reset last click\n                last_click = 0;\n                e.preventDefault();\n            }\n            last_click = now;\n        });\n    }\n});","/* global TWEEN */\n\nimport {Entity, registerComponent} from \"aframe\";\nimport {Utils} from \"../utils\";\n\n/**\n * Checkbox Component for aframe-material-collection. Includes animation and disabled state.\n * @namespace aframe-material-collection\n * @component ui-checkbox\n * @author Shane Harris\n */\n\nexport = registerComponent('ui-checkbox', {\n    width: 0,\n    height: 0,\n    container: undefined as any as Entity,\n    topLine: undefined as any as Entity,\n    bottomLine: undefined as any as Entity,\n    leftLine: undefined as any as Entity,\n    rightLine: undefined as any as Entity,\n    clickHandler: () => {},\n    schema: {\n        value: {type:'boolean',default: false},\n        selectedColor: {default: '#009688'},\n        unselectedColor: {default: '#7f7f7f'},\n        disabledColor: {default: '#afafaf'},\n        indeterminate: {type:'boolean',default: false},\n        disabled:{type:'boolean',default: false},\n        intersectableClass: {default: 'intersectable'},\n        width:{type:'number',default: 0.15},\n        height:{type:'number',default: 0.15},\n    },\n    init() {\n        this.width = 0.15;\n        this.height = 0.15;\n        this.container = document.createElement('a-entity');\n        this.container.setAttribute('class','no-yoga-layout');\n        this.el.appendChild(this.container);\n        this.setupLines();\n        // Add backing element to make the whole object clickable.\n        let backing = document.createElement('a-plane');\n        backing.setAttribute('width',0.105);\n        backing.setAttribute('height',0.105);\n        backing.setAttribute('position','0 0 -0.002');\n        backing.setAttribute('shader','flat');\n        backing.setAttribute('class',this.data.intersectableClass+' no-yoga-layout');\n        backing.setAttribute('opacity',0.0001);\n        backing.setAttribute('transparent',true);\n        this.el.appendChild(backing);\n        this.clickHandler = ()=>{\n            this.data.value = !this.data.value;\n            this.click();\n        };\n        // Setup initial state\n        this.setSelected();\n        this.setDisabled();\n        this.setTransform(1);\n    },\n    updateSchema(){\n        if(this.data){\n            this.setDisabled();\n            if(this.data.disabled){\n                if(this.data.value){\n                    this.data.value=false;\n                    this.data.indeterminate=false;\n                    this.click();\n                }\n            }else{\n                this.click();\n            }\n        }\n    },\n    setTransform(x: number){\n        // Adjust position and rotation based on the interpolated value x between 0 and 1.\n        // Used to offset the checkbox when in a checked state\n        if(this.data.value){\n            this.container.setAttribute('rotation',{x:0,y:0,z:-45*x});\n            this.container.setAttribute('position',{x:-0.025*x,y:0.05*x,z:0});\n        }else{\n            this.container.setAttribute('rotation',{x:0,y:0,z:-45+(45*x)});\n            this.container.setAttribute('position',{x:0.025-(0.025*x),y:0.05-(0.05*x),z:0});\n        }\n    },\n    click(){\n        // Reset indeterminate state on click\n        this.data.indeterminate = false;\n        // Hide / Show left and top lines for checked state, or right line aswell for intermediate state.\n        this.setSelected();\n        // run animation\n        this.animateSelected()\n    },\n    animateSelected(){\n        let _this = this;\n        // Start changes\n        Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n        new TWEEN.Tween({x:0})\n            .to({ x: 1}, 200)\n            .onUpdate(function () {\n                _this.setTransform(this.x);\n            })\n            .onComplete(function(){\n                // Stop changes\n                Utils.stoppedChanging(_this.el.object3D.uuid);\n            })\n            .easing(TWEEN.Easing.Exponential.Out).start();\n    },\n    setSelected(){\n        // Hide / Show lines that make up checkbox based on the current state.\n        if(this.data.value){\n            this.topLine.setAttribute('scale','0.000001 0.000001 0.000001');\n            this.leftLine.setAttribute('scale','0.000001 0.000001 0.000001');\n            this.bottomLine.setAttribute('scale','1 1 1');\n            this.rightLine.setAttribute('scale','1 1 1');\n            this.bottomLine.setAttribute('position','0.025 -0.05 0');\n            this.rightLine.setAttribute('position','0.05 0 0');\n            this.bottomLine.setAttribute('rotation','0 0 90');\n            this.bottomLine.setAttribute('height',0.05);\n            this.bottomLine.setAttribute('color',this.data.selectedColor);\n            this.rightLine.setAttribute('color',this.data.selectedColor);\n        }else if(this.data.indeterminate){\n            this.topLine.setAttribute('scale','0.000001 0.000001 0.000001');\n            this.leftLine.setAttribute('scale','0.000001 0.000001 0.000001');\n            this.bottomLine.setAttribute('scale','1 1 1');\n            this.rightLine.setAttribute('scale','0.000001 0.000001 0.000001');\n            this.bottomLine.setAttribute('position','0 0 0');\n            this.bottomLine.setAttribute('rotation','0 0 90');\n            this.bottomLine.setAttribute('height',0.1);\n            this.bottomLine.setAttribute('color',this.data.unselectedColor);\n            this.rightLine.setAttribute('color',this.data.unselectedColor);\n        }else{\n            this.topLine.setAttribute('scale','1 1 1');\n            this.leftLine.setAttribute('scale','1 1 1');\n            this.bottomLine.setAttribute('scale','1 1 1');\n            this.rightLine.setAttribute('scale','1 1 1');\n            this.bottomLine.setAttribute('height',0.1);\n            this.leftLine.setAttribute('position','-0.05 0 0');\n            this.rightLine.setAttribute('position','0.05 0 0');\n            this.topLine.setAttribute('position','0 0.05 0');\n            this.bottomLine.setAttribute('position','0 -0.05 0');\n            this.topLine.setAttribute('rotation','0 0 90');\n            this.bottomLine.setAttribute('rotation','0 0 90');\n            this.bottomLine.setAttribute('color',this.data.unselectedColor);\n            this.rightLine.setAttribute('color',this.data.unselectedColor);\n        }\n    },\n    setupLines(){\n        // Add four lines to make a square wireframe\n        this.leftLine = this.line(true);\n        this.rightLine = this.line(true);\n        this.topLine = this.line(true);\n        this.bottomLine = this.line(true);\n        this.container.appendChild(this.topLine);\n        this.container.appendChild(this.leftLine);\n        this.container.appendChild(this.bottomLine);\n        this.container.appendChild(this.rightLine);\n    },\n    setDisabled(){\n        // Check and set the disabled state of the checkbox - add / remove click handler.\n        if(this.data.disabled){\n            this.el.removeEventListener('mousedown',this.clickHandler);\n            this.topLine.setAttribute('color',this.data.disabledColor);\n            this.leftLine.setAttribute('color',this.data.disabledColor);\n            this.rightLine.setAttribute('color',this.data.disabledColor);\n            this.bottomLine.setAttribute('color',this.data.disabledColor);\n        }else{\n            this.el.addEventListener('mousedown',this.clickHandler);\n            this.topLine.setAttribute('color',this.data.unselectedColor);\n            this.leftLine.setAttribute('color',this.data.unselectedColor);\n            this.rightLine.setAttribute('color',this.data.value?this.data.selectedColor:this.data.unselectedColor);\n            this.bottomLine.setAttribute('color',this.data.value?this.data.selectedColor:this.data.unselectedColor);\n        }\n    },\n    line(is_vertical){\n        // Create horizontal/vertical line.\n        let line = document.createElement('a-plane');\n        line.setAttribute('width',is_vertical?0.01:0.105);\n        line.setAttribute('height',is_vertical?0.105:0.01);\n        line.setAttribute('class','no-yoga-layout');\n        line.setAttribute('shader','flat');\n        return line;\n    }\n});","/* global AFRAME,TWEEN */\n/**\n * Radio Component for aframe-material-collection. Resets other radio buttons siblings and includes a disabled state.\n * @namespace aframe-material-collection\n * @component ui-radio\n * @author Shane Harris\n */\nimport {Entity, registerComponent} from \"aframe\";\nimport {Color} from \"three\";\nimport {Utils} from \"../utils\";\n\nexport = registerComponent('ui-radio', {\n    width: 0,\n    height: 0,\n    filled_circle: undefined as any as Entity | null,\n    isRippling: false,\n    isSelecting: false,\n    schema: {\n        value: {default: ''},\n        selected:{type: 'boolean', default: false},\n        selectedColor: {default: '#009688'},\n        selectedRadius: {type:'number',default: 0.045},\n        unselectedColor: {default: '#5f5f5f'},\n        disabledColor: {default: '#afafaf'},\n        disabled: {type: 'boolean', default: false},\n        intersectableClass: {default: 'intersectable'},\n        width:{type:'number',default: 0.15},\n        height:{type:'number',default: 0.15},\n    },\n    init() {\n        this.width = 0.15;\n        this.height = 0.15;\n        // Create center circle for checked state.\n        this.el.addEventListener('loaded',()=>{\n\n            let handle = `\n            <a-circle radius=\"`+this.data.selectedRadius+`\" color=\"`+(this.data.disabled?this.data.disabledColor:this.data.selectedColor)+`\" \n            position=\"0 0 0\" scale=\"0 0 0\" shader=\"flat\" class=\"no-yoga-layout\" segments=\"6\"></a-circle>`;\n            this.el.insertAdjacentHTML('beforeend',handle);\n            this.filled_circle = this.el.lastChild as Entity | null;\n            (this.el.components.material as any).material.color = new Color(this.data.disabled?this.data.disabledColor:this.data.unselectedColor);\n\n            // Create backing for getting click events.\n            let backing = `\n            <a-circle radius=\"`+this.data.selectedRadius+`\" position=\"0 0 -0.002\" opacity=\"0.0001\" transparent=\"true\" \n            shader=\"flat\" class=\"`+this.data.intersectableClass+` no-yoga-layout\" segments=\"6\"></a-circle>`;\n            this.el.insertAdjacentHTML('beforeend',backing);\n            // Set this if it is checked.\n            if(this.data.selected){\n                this.filled_circle!!.addEventListener('loaded',()=>{\n                    this.click();\n                });\n            }\n            // TODO: need to add play/pause methods for registering/unregistering events.\n            if(!this.data.disabled){\n                this.el.addEventListener('mousedown',e => (this.click as any)(e));\n            }\n        });\n    },\n    deselect(){\n        // Deselect this radio with a scale animation on the circle.\n        this.el.setAttribute('selected',false);\n        let _this = this;\n        // Start changes\n        Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n        new TWEEN.Tween({x:1})\n            .to({ x: 0.000001}, 200)\n            .onUpdate(function(){\n                _this.filled_circle!!.object3D.scale.set(this.x,this.x,this.x);\n            })\n            .onComplete(()=>{\n                // Stop changes\n                Utils.stoppedChanging(_this.el.object3D.uuid);\n                this.isRippling = false;\n            })\n            .easing(TWEEN.Easing.Exponential.Out).start();\n    },\n    click(){\n        // Get all other radio siblings and reset their state if they are selected.\n        [].slice.call(this.el.parentNode!!.querySelectorAll('a-ring,a-ui-radio')).filter(el=>el!==this.el).forEach((ring: Entity)=>{\n            if(ring.components['ui-radio']&&ring.getAttribute('selected')===\"true\"){\n                (ring.components['ui-radio'] as any).deselect();\n            }\n        });\n        // Emit the current selected value\n        this.el.emit('ui-radio-changed',this.data.value);\n        // Set this radio's selected state.\n        this.el.setAttribute('selected',true);\n        // Throttle animations.\n        if(this.isSelecting)return;\n        this.isSelecting = true;\n        let _this = this;\n        // Start changes\n        Utils.isChanging(this.el.sceneEl,this.filled_circle!!.object3D.uuid);\n        new TWEEN.Tween({x:0.000001})\n            .to({ x: 1}, 250)\n            .onUpdate(function(){\n                _this.filled_circle!!.object3D.scale.set(this.x,this.x,this.x);\n            })\n            .onComplete(()=>{\n                // Stop changes\n                Utils.stoppedChanging(this.filled_circle!!.object3D.uuid);\n                this.isSelecting = false;\n            })\n            .easing(TWEEN.Easing.Exponential.Out).start();\n    }\n});","/**\n * Rounded borders Component for aframe-material-collection. Expects an a-plane entity.\n * @namespace aframe-material-collection\n * @component ui-border\n * @author Shane Harris\n */\nimport {Mesh, MeshBasicMaterial, Path, Shape, ShapeGeometry} from \"three\";\nimport {registerComponent} from \"aframe\";\n\nexport = registerComponent('ui-border', {\n    schema: {\n        borderRadius: {type: 'number', default: 0.01},\n        curveSegments:{type: 'int', default: 5},\n        borderWidth:{type: 'number', default: 0.008},\n        color:{default:\"#5f5f5f\"},\n        numberOfPoints:{type:'int',default:180}\n    },\n    init() {\n        let mesh = this.el.getObject3D('mesh') as Mesh;\n        let metadata = (mesh.geometry as any).metadata;\n        let roundedRectShape = new Shape();\n        this.roundedRect(roundedRectShape,\n            metadata.parameters.width,\n            metadata.parameters.height,\n            this.data.borderRadius, false);\n        this.roundedRect(roundedRectShape,\n            metadata.parameters.width-this.data.borderWidth*2,\n            metadata.parameters.height-this.data.borderWidth*2,\n            this.data.borderRadius,true);\n\n        this.el.setObject3D('mesh',new Mesh( new ShapeGeometry(roundedRectShape,this.data.curveSegments), new MeshBasicMaterial( { color: this.data.color } ) ));\n    \n    },\n    roundedRect( ctx, width, height, radius, isHole) {\n        let x = -width/2, y = -height/2;\n        // Draw the Rounded rectangle shape centered in the object - from js shapes example.\n        let shapeCtx;\n        if(isHole){\n            shapeCtx = ctx;\n            ctx = new Path()\n        }\n        ctx.moveTo( x, y + radius );\n        ctx.lineTo( x, y + height - radius );\n        ctx.quadraticCurveTo( x, y + height, x + radius, y + height );\n        ctx.lineTo( x + width - radius, y + height );\n        ctx.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );\n        ctx.lineTo( x + width, y + radius );\n        ctx.quadraticCurveTo( x + width, y, x + width - radius, y );\n        ctx.lineTo( x + radius, y );\n        ctx.quadraticCurveTo( x, y, x, y + radius );\n        if(isHole){\n            shapeCtx.holes.push(ctx);\n        }\n    }\n});","import {registerComponent} from \"aframe\";\nimport {CubicBezierCurve3, Mesh, PlaneGeometry, Vector3} from \"three\";\n\n/**\n * A curved-plane component to curve a plane primitive.\n * @namespace aframe-material-collection\n * @component ui-curved-plane\n * @author Shane Harris\n */\n\nexport = registerComponent('ui-curved-plane', {\n    schema: {\n        depth:{type:'number',default:0.03}\n    },\n    init(){\n        let mesh = this.el.getObject3D('mesh') as Mesh;\n        let width = this.el.getAttribute('width');\n        let height = this.el.getAttribute('height');\n        let browser_pane = new PlaneGeometry(width, height, 5, 1);\n        let curve = new CubicBezierCurve3(\n            browser_pane.vertices[0],\n            new Vector3(0.375*width, 0, -this.data.depth*width ),\n            new Vector3(0.625*width, 0, -this.data.depth*width ),\n            browser_pane.vertices[(browser_pane.vertices.length/2) - 1]\n        );\n        let planePoints = curve.getPoints(Math.abs(browser_pane.vertices.length/2)-1);\n        for (let edgeI = 1; edgeI < 3; edgeI++) {\n            for (let pointI = 0; pointI < planePoints.length; pointI++) {\n                browser_pane.vertices[(edgeI === 2 ? planePoints.length + pointI : pointI)].z = planePoints[pointI].z;\n            }\n        }\n        mesh.geometry = browser_pane;\n    }\n});","import UI from '../ui';\nimport {registerComponent} from \"aframe\";\nimport {Math as ThreeMath, Color, ShaderMaterial} from \"three\";\nimport {Utils} from \"../utils\";\n\n/**\n * A component to pick a color - based on https://github.com/mokargas/aframe-colorwheel-component\n * @namespace aframe-material-collection\n * @component ui-renderer\n * @author Shane Harris\n */\n\nexport = registerComponent('ui-color-picker', {\n    schema: {\n        backingColor:{default:\"#dfdfdf\"},\n        backingColorBottom:{default:\"#4db6ac\"},\n        targetEl:{type:'selector'}\n    },\n    init() {\n        this.setupColorWheel();\n        this.setupBrightnessSlider();\n        this.setupColorPreview();\n        this.setupBacking();\n        this.setupEvents();\n        this.el.setAttribute('visible',false);\n        this.el.setAttribute('scale','0.00001 0.00001 0.00001');\n        // Expose methods to open/close the color picker.\n        (this.el as any).open = this.open.bind(this);\n        (this.el as any).close = this.close.bind(this);\n    },\n    open(){\n        return new Promise(resolve=>{\n            this.selectCallback = resolve;\n            this.el.setAttribute('visible',true);\n            this.tweenPickerScale(0.00001,0.5);\n        });\n    },\n    close(){\n        this.tweenPickerScale(0.5,0.00001)\n            .then(()=>this.el.setAttribute('visible',false));\n    },\n    tweenPickerScale(from,to){\n        Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n        return new Promise(r=>{\n            let _this = this;\n            new TWEEN.Tween({x:from})\n                .to({x:to}, 250)\n                .onUpdate(function(){\n                    _this.el.setAttribute('scale',this.x+' '+this.x+' '+this.x);\n                })\n                .onComplete(()=>{\n                    Utils.stoppedChanging(this.el.object3D.uuid);\n                    r();\n                })\n                .easing(TWEEN.Easing.Exponential.Out).start();\n        });\n    },\n    setupBacking(){\n        let circleBacking = document.createElement('a-circle');\n        circleBacking.className = 'no-yoga-layout';\n        circleBacking.setAttribute('position','0 0 -0.001');\n        circleBacking.setAttribute('material',{\n            color: this.data.backingColor,\n            flatShading: true,\n            shader: 'flat',\n            fog: false,\n            side: 'double'\n        });\n        circleBacking.setAttribute('radius',0.65);\n        circleBacking.setAttribute('theta-length',180);\n\n        this.el.appendChild(circleBacking);\n\n        let planeBacking = document.createElement('a-plane');\n        planeBacking.setAttribute('position','0 -0.375 -0.001');\n        planeBacking.className = 'no-yoga-layout';\n        planeBacking.setAttribute('material',{\n            color: this.data.backingColor,\n            flatShading: true,\n            shader: 'flat',\n            fog: false,\n            side: 'double'\n        });\n        planeBacking.setAttribute('width',1.3);\n        planeBacking.setAttribute('height',0.75);\n\n        this.el.appendChild(planeBacking);\n\n\n        let planeBackingBottom = document.createElement('a-plane');\n        planeBackingBottom.setAttribute('position','0 -1.05 -0.001');\n        planeBackingBottom.className = 'no-yoga-layout';\n        planeBackingBottom.setAttribute('material',{\n            color: this.data.backingColorBottom,\n            flatShading: true,\n            shader: 'flat',\n            fog: false,\n            side: 'double'\n        });\n        planeBackingBottom.setAttribute('width',1.3);\n        planeBackingBottom.setAttribute('height',0.6);\n        this.el.appendChild(planeBackingBottom);\n\n        let buttonConfirm = document.createElement('a-ui-button');\n        buttonConfirm.setAttribute('position','0.315 -1.17 0.001');\n        buttonConfirm.className = 'intersectable no-yoga-layout';\n        buttonConfirm.setAttribute('text-value','SAVE');\n        buttonConfirm.setAttribute('color','#ffffff');\n        buttonConfirm.setAttribute('wrap-count','9');\n        buttonConfirm.setAttribute('ripple-color','#009688');\n        buttonConfirm.setAttribute('font-color','#009688');\n        buttonConfirm.setAttribute('ripple-size','0.5 0.18');\n        buttonConfirm.setAttribute('width',0.5);\n        buttonConfirm.setAttribute('height',0.18);\n        if(this.data.targetEl)\n            this.data.targetEl.addEventListener('mousedown',()=> {\n                this.el.open();\n            });\n        this.el.appendChild(buttonConfirm);\n        buttonConfirm.addEventListener('mousedown',e=> {\n            let hex = this.getHex();\n            this.el.emit('color-selected',hex);\n            this.el.close();\n            Utils.preventDefault(e);\n            if(this.data.targetEl){\n                this.data.targetEl.setAttribute('color',hex);\n            }\n            if(this.selectCallback&& typeof this.selectCallback === \"function\"){\n                this.selectCallback(hex);\n            }\n        });\n\n        let buttonCancel = document.createElement('a-ui-button');\n        buttonCancel.setAttribute('position','-0.315 -1.17 0.001');\n        buttonCancel.className = 'intersectable no-yoga-layout';\n        buttonCancel.setAttribute('text-value','CANCEL');\n        buttonCancel.setAttribute('color','#ffffff');\n        buttonCancel.setAttribute('wrap-count','9');\n        buttonCancel.setAttribute('ripple-color','#ff9800');\n        buttonCancel.setAttribute('font-color','#ff9800');\n        buttonCancel.setAttribute('ripple-size','0.5 0.18');\n        buttonCancel.setAttribute('width',0.5);\n        buttonCancel.setAttribute('height',0.18);\n\n        this.el.appendChild(buttonCancel);\n        buttonCancel.addEventListener('mousedown',e=> {\n            this.el.emit('color-cancelled');\n            this.el.close();\n            Utils.preventDefault(e);\n        });\n        this.hexValue = document.createElement('a-text');\n        this.hexValue.setAttribute('value','#ffffff');\n        this.hexValue.setAttribute('align','center');\n        this.hexValue.setAttribute('position','0 -0.9 0.001');\n        this.hexValue.setAttribute('wrap-count',15);\n        this.hexValue.setAttribute('width',1.3);\n\n        this.el.appendChild(this.hexValue);\n    },\n    setupColorPreview(){\n        this.colorPreview = document.createElement('a-circle');\n        this.colorPreview.setAttribute('position','-0.45 -0.9 0');\n        this.colorPreview.setAttribute('material',{\n            color: '#ffffff',\n            flatShading: true,\n            transparent: true,\n            shader: 'flat',\n            fog: false,\n            side: 'double'\n        });\n        this.colorPreview.setAttribute('radius',0.05);\n        this.el.appendChild(this.colorPreview);\n    },\n    setupColorWheel(){\n        this.hsv = {\n            h: 0.0,\n            s: 0.0,\n            v: 1.0\n        };\n        this.colorWheel = document.createElement('a-circle');\n        this.colorWheel.setAttribute('material',{\n            color: '#ffffff',\n            flatShading: true,\n            transparent: true,\n            shader: 'flat',\n            fog: false,\n            side: 'double'\n        });\n        this.colorWheel.setAttribute('radius',0.5);\n        this.el.appendChild(this.colorWheel);\n        this.colorWheel.className = 'intersectable no-yoga-layout';\n        this.colorWheel.addEventListener('loaded',()=>{\n            let colorWheel = this.colorWheel.getObject3D('mesh');\n            let vertexShader = '\\n\\n      varying vec2 vUv;\\n      void main() {\\n        vUv = uv;\\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\\n        gl_Position = projectionMatrix * mvPosition;\\n      }\\n    ';\n\n            let fragmentShader = '\\n      #define M_PI2 6.28318530718\\n      uniform float brightness;\\n      varying vec2 vUv;\\n      vec3 hsb2rgb(in vec3 c){\\n          vec3 rgb = clamp(abs(mod(c.x * 6.0 + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0, 0.0, 1.0 );\\n          rgb = rgb * rgb * (3.0 - 2.0 * rgb);\\n          return c.z * mix( vec3(1.0), rgb, c.y);\\n      }\\n\\n      void main() {\\n        vec2 toCenter = vec2(0.5) - vUv;\\n        float angle = atan(toCenter.y, toCenter.x);\\n        float radius = length(toCenter) * 2.0;\\n        vec3 color = hsb2rgb(vec3((angle / M_PI2) + 0.5, radius, brightness));\\n        gl_FragColor = vec4(color, 1.0);\\n      }\\n      ';\n\n            colorWheel.material = new ShaderMaterial({\n                uniforms: {\n                    brightness: {\n                        type: 'f',\n                        value: this.hsv.v\n                    }\n                },\n                vertexShader: vertexShader,\n                fragmentShader: fragmentShader\n            });\n            colorWheel.material.needsUpdate = true;\n        })\n    },\n    setupBrightnessSlider(){\n        this.brightnessSlider = document.createElement('a-plane');\n        this.brightnessSlider.setAttribute('height',0.1);\n        this.brightnessSlider.setAttribute('width',0.8);\n        this.brightnessSlider.setAttribute('position','0 -0.6 0');\n        this.brightnessSlider.className = 'intersectable no-yoga-layout';\n        this.el.appendChild(this.brightnessSlider);\n        this.brightnessSlider.addEventListener('loaded',()=>{\n\n            let vertexShader = '\\n      varying vec2 vUv;\\n      void main(){\\n        vUv = uv;\\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\\n      }\\n    ';\n\n            let fragmentShader = '\\n      uniform vec3 color1;\\n      uniform vec3 color2;\\n      varying vec2 vUv;\\n\\n      void main(){\\n        vec4 c1 = vec4(color1, 1.0);\\n  \\t    vec4 c2 = vec4(color2, 1.0);\\n\\n        vec4 color = mix(c2, c1, smoothstep(0.0, 1.0, vUv.x));\\n        gl_FragColor = color;\\n      }\\n    ';\n\n\n            this.brightnessSlider.getObject3D('mesh').material = new ShaderMaterial({\n                uniforms: {\n                    color1: {\n                        type: 'c',\n                        value: new Color(0xFFFFFF)\n                    },\n                    color2: {\n                        type: 'c',\n                        value: new Color(0x000000)\n                    }\n                },\n                vertexShader: vertexShader,\n                fragmentShader: fragmentShader\n            });\n            this.brightnessSlider.getObject3D('mesh').material.needsUpdate = true;\n        });\n        let brightnessResetLeft = document.createElement('a-triangle');\n        brightnessResetLeft.setAttribute('vertex-a','0 0.05 0');\n        brightnessResetLeft.setAttribute('vertex-b','-0.05 -0.05 0');\n        brightnessResetLeft.setAttribute('vertex-c','0.05 -0.05 0');\n        brightnessResetLeft.setAttribute('position','-0.475 -0.6 0');\n        brightnessResetLeft.setAttribute('rotation','0 0 90');\n        brightnessResetLeft.setAttribute('shader','flat');\n        brightnessResetLeft.setAttribute('color','#009688');\n        brightnessResetLeft.setAttribute('ui-btn','');\n        brightnessResetLeft.className = 'intersectable';\n        this.el.appendChild(brightnessResetLeft);\n\n\n        let brightnessResetRight = document.createElement('a-triangle');\n        brightnessResetRight.setAttribute('vertex-a','0 0.05 0');\n        brightnessResetRight.setAttribute('vertex-b','-0.05 -0.05 0');\n        brightnessResetRight.setAttribute('vertex-c','0.05 -0.05 0');\n        brightnessResetRight.setAttribute('position','0.475 -0.6 0');\n        brightnessResetRight.setAttribute('rotation','0 0 -90');\n        brightnessResetRight.setAttribute('color','#009688');\n        brightnessResetRight.setAttribute('shader','flat');\n        brightnessResetRight.setAttribute('ui-btn','');\n        brightnessResetRight.className = 'intersectable';\n        this.el.appendChild(brightnessResetRight);\n\n        brightnessResetLeft.addEventListener('mousedown',()=>{\n\n            Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n            this.colorWheel.getObject3D('mesh').material.uniforms['brightness'].value = 0;\n            this.hsv.v = 0;\n            this.hsv.h = 0;\n            this.hsv.s = 0;\n            this.updateColor();\n            Utils.stoppedChanging(this.el.object3D.uuid);\n        });\n        brightnessResetRight.addEventListener('mousedown',()=>{\n\n            Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n            this.colorWheel.getObject3D('mesh').material.uniforms['brightness'].value = 1;\n            this.hsv.v = 1;\n            this.hsv.h = 0;\n            this.hsv.s = 0;\n            this.updateColor();\n            Utils.stoppedChanging(this.el.object3D.uuid);\n        });\n    },\n    getHex(){\n        let rgb = this.hsvToRgb(this.hsv),\n            color = 'rgb(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ')';\n        return '#' + new Color(color).getHexString()\n    },\n    updateColor(){\n        let hex = this.getHex();\n        this.colorPreview.setAttribute('color',hex);\n        this.hexValue.setAttribute('value',hex);\n    },\n    setupEvents(){\n        this.colorWheel.addEventListener('mousedown',e=>{\n            this.isMouseDown = true;\n            Utils.preventDefault(e);\n        });\n        this.colorWheel.addEventListener('mouseup',e=>{\n            console.log('mouseup on color picker')\n            this.isMouseDown = false;\n            Utils.preventDefault(e);\n        });\n        this.colorWheel.addEventListener('ui-mousemove',e=>{\n            if(!this.isMouseDown)return;\n            Utils.preventDefault(e);\n\n            Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n            let colorWheel = this.colorWheel.getObject3D('mesh'),\n                radius = 0.5,\n                position = e.detail.intersection.point;\n\n            colorWheel.updateMatrixWorld();\n            colorWheel.worldToLocal(position);\n\n            //Determine Hue and Saturation value from polar co-ordinates\n            let polarPosition = {\n                r: Math.sqrt(position.x * position.x + position.y * position.y),\n                theta: Math.PI + Math.atan2(position.y, position.x)\n            };\n\n            let angle = (polarPosition.theta * (180 / Math.PI) + 180) % 360;\n            this.hsv.h = angle / 360;\n            this.hsv.s = polarPosition.r / radius;\n            this.updateColor();\n            Utils.stoppedChanging(this.el.object3D.uuid);\n        });\n        this.brightnessSlider.addEventListener('mousedown',e=>{\n            this.isMouseDown = true;\n            Utils.preventDefault(e);\n        });\n        this.brightnessSlider.addEventListener('mouseup',e=>{\n            this.isMouseDown = false;\n            Utils.preventDefault(e);\n        });\n        this.brightnessSlider.addEventListener('ui-mousemove',e=>{\n\n            Utils.preventDefault(e);\n            Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n            if(!this.isMouseDown)return;\n            let brightnessSlider = this.brightnessSlider.getObject3D('mesh'),\n                colorWheel = this.colorWheel.getObject3D('mesh'),\n                position = e.detail.intersection.point;\n\n            brightnessSlider.updateMatrixWorld();\n            brightnessSlider.worldToLocal(position);\n\n            //Brightness is a value between 0 and 1. The parent plane is centre registered, hence offset\n            let cursorOffset = position.x + 0.4;//this.brightnessSliderHeight / 2;\n            let brightness = cursorOffset / 0.8;//this.brightnessSliderHeight;\n\n            //Update material brightness\n            colorWheel.material.uniforms['brightness'].value = brightness;\n            this.hsv.v = brightness;\n            this.updateColor();\n            Utils.stoppedChanging(this.el.object3D.uuid);\n        });\n    },\n    hsvToRgb(hsv) {\n        let r, g, b, i, f, p, q, t;\n        let h = ThreeMath.clamp(hsv.h, 0, 1);\n        let s = ThreeMath.clamp(hsv.s, 0, 1);\n        let v = hsv.v;\n\n        i = Math.floor(h * 6);\n        f = h * 6 - i;\n        p = v * (1 - s);\n        q = v * (1 - f * s);\n        t = v * (1 - (1 - f) * s);\n        switch (i % 6) {\n            case 0:\n                r = v;\n                g = t;\n                b = p;\n                break;\n            case 1:\n                r = q;\n                g = v;\n                b = p;\n                break;\n            case 2:\n                r = p;\n                g = v;\n                b = t;\n                break;\n            case 3:\n                r = p;\n                g = q;\n                b = v;\n                break;\n            case 4:\n                r = t;\n                g = p;\n                b = v;\n                break;\n            case 5:\n                r = v;\n                g = p;\n                b = q;\n                break;\n        }\n        return {\n            r: Math.round(r * 255),\n            g: Math.round(g * 255),\n            b: Math.round(b * 255)\n        };\n    }\n});\n\n","import UI from '../ui';\nimport {Entity, registerComponent} from \"aframe\";\n\n/**\n * Modal Component for aframe-material-collection.\n * @namespace aframe-material-collection\n * @component ui-modal\n * @author Shane Harris\n */\nexport = registerComponent('ui-modal', {\n    modalPanel: undefined as any as  Entity,\n    mainComponents: {},\n    modalComponents: {},\n    openModal: () => {},\n    modalTween: undefined as any,\n    schema: {\n        modal:{type:'selector'},\n        main:{type:'selector'}\n    },\n    init(){\n        if(this.data.modal&&this.data.main){\n            // Get the modal panel to be able to animate its scale on open/close.\n            this.modalPanel = document.querySelector(this.data.modal.getAttribute('ui-panel'));\n\n            this.mainComponents = this.data.main.components;\n            this.modalComponents = this.data.modal.components;\n            // Pause rendering of modal until opened.\n            if(this.modalComponents&&this.modalComponents['ui-renderer']){\n                this.modalComponents['ui-renderer'].pause();\n            }\n            // Setup close listeners for anything with the class close-modal.\n            let close_buttons = this.data.modal.querySelectorAll('.close-modal');\n            for(let i = 0; i < close_buttons.length; i++ ){\n                let close_button = close_buttons[i];\n                close_button.addEventListener('mousedown',()=>{\n                    this.close();\n                });\n            }\n            // Add click handler for opening the modal, pause the main render screen and play the modal renderer\n            this.openModal = this.open.bind(this);\n            this.el.addEventListener('mousedown',this.openModal);\n            this.data.main.modal = this;\n\n            // Expose methods to open/close the modal.\n            (this.el as any).open = this.open.bind(this);\n            (this.el as any).close = this.close.bind(this);\n        }\n    },\n    remove(){\n        this.el.removeEventListener('mousedown',this.openModal);\n    },\n    open(){\n        if(this.mainComponents&&this.mainComponents['ui-renderer']){\n            this.mainComponents['ui-renderer'].pauseRender();\n            this.tweenModalScale(0.0000001,1);\n            this.modalComponents['ui-renderer'].play();\n        }\n    },\n    close(){\n        // Pause the modal rendering and play the main rendering again.\n        this.modalComponents['ui-renderer'].pause();\n        this.mainComponents['ui-renderer'].play();\n        this.mainComponents['ui-renderer'].playRender();\n        this.tweenModalScale(1,0.0000001)\n            .then(()=>{\n                this.el.sceneEl!!.emit('modal-closed');\n            });\n    },\n    tweenModalScale(from,to){\n        return new Promise(r=>{\n            let _this = this;\n            if(this.modalTween)this.modalTween.stop();\n            this.modalTween = new TWEEN.Tween({x:from})\n                .to({x:to}, 250)\n                .onUpdate(function () {\n                    if(_this.modalPanel)\n                        _this.modalPanel.setAttribute('scale',this.x+' '+this.x+' '+this.x);\n                })\n                .onComplete(r)\n                .easing(TWEEN.Easing.Exponential.Out).start();\n        });\n    }\n});","import UI from '../ui';\nimport {Mesh, MeshBasicMaterial, PerspectiveCamera, Raycaster, SphereGeometry, WebGLRenderTarget} from \"three\";\nimport {registerComponent} from \"aframe\";\nimport {Utils} from \"../utils\";\n\n/**\n * A component to render the UI to a flat plane, removing the objects from the scene and rendering them separately to a\n * render target.\n * @namespace aframe-material-collection\n * @component ui-renderer\n * @author Shane Harris\n */\nexport = registerComponent('ui-renderer', {\n    schema: {\n        uiPanel: {type: 'selector'},\n        lookControlsEl: {type: 'selector'},\n        lookControlsComponent:{default:'look-controls'},\n        panelPosition:{type:'vec3',default:{x:0,y:1.6,z:-1}},\n        panelSize:{type:'vec2',default:{x:6,y:3}},\n        renderResolution:{type:'vec2',default:{x:1024,y:512}},\n        debugRaycaster:{type:'boolean',default: false},\n        fps:{type:'number',default:45},\n        intersectableClass:{default:'intersectable'},\n        debug:{type:'boolean',default:false},\n        initDelay:{type:'int',default:500},\n    },\n    init() {\n        this.setupBackDrop();\n        if(!this.data.uiPanel){\n            this.meshEl = this.setupUIPanel();\n        }else{\n            this.meshEl = this.data.uiPanel;\n        }\n        // Remove this object from the scene to be rendered separately.\n        this.el.object3D.parent.remove(this.el.object3D);\n        // Setup fixed camera nd render target.\n        this.camera = new PerspectiveCamera( 100, 2, 0.1, 1000 );\n        // Setup render target\n        this.renderTarget = new WebGLRenderTarget(this.data.renderResolution.x,this.data.renderResolution.y);\n        // Set the texture to the ui panel mesh.\n        this.meshEl.getObject3D('mesh').material.map = this.renderTarget.texture;\n        // emit ready event for anythng wanting to use this texture.\n        this.meshEl.emit('texture-ready',this.renderTarget.texture);\n        // Listen for change events to enable rendering.\n        this.stoppedRendering = false;\n        this.isRendering = true;\n        // Listen for change events to enable/disable rendering\n        this.el.sceneEl.addEventListener('ui-changing',()=>{\n            //console.log(JSON.stringify(new Date()),'ui-changing');\n            this.stoppedRendering = false;\n            this.isRendering = true;\n        });\n        this.el.sceneEl.addEventListener('ui-changing-stopped',()=>{\n            //console.log(JSON.stringify(new Date()),'ui-changing-stopped');\n            this.isRendering = false;\n        });\n        // Setup raycaster for relaying mouse/keyboard events\n        this.raycaster = new Raycaster();\n        this.helper = new Mesh(new SphereGeometry(0.01),new MeshBasicMaterial({color:'#ff0000'}));\n        // Add cursor helper to object\n        if(this.data.debugRaycaster)this.el.object3D.add(this.helper);\n        // Set last render time\n        this.lastRenderTime = 0;\n        this.isFrozen = false;\n\n        // Expose methods to the element to pause/play the renderer.\n        this.el.pauseRender = this.pauseRender.bind(this);\n        this.el.playRender = this.playRender.bind(this);\n        this.isReady = false;\n        setTimeout(()=>{\n            this.isReady = true;\n            Utils.isChanging(this.el.sceneEl,this.el.object3D.uuid);\n                setTimeout(()=>{\n                    Utils.stoppedChanging(this.el.object3D.uuid);\n                },250);\n        },this.data.initDelay);\n    },\n    pauseRender(time){\n        return this.playRender(time,true)\n    },\n    playRender(time,isPaused){\n        let _this = this;\n        return new Promise(resolve=>{\n            if(_this.isFrozen===isPaused||_this.isAnimatingBackground)return resolve();\n            _this.isAnimatingBackground = true;\n            if(!_this.isFrozen)this.backdrop.setAttribute('scale','1 1 1');\n            let fromScale = _this.isFrozen?0.9:0.000001;\n            let toScale = _this.isFrozen?0.000001:0.9;\n            let duration = _this.isFrozen?time||350:time||500;\n            if(_this.isFrozen){\n                _this.isFrozen = isPaused;\n                _this.play();\n            }\n            Utils.isChanging(_this.el.sceneEl,_this.backdrop.uuid);\n            if(_this.renderTween)_this.renderTween.stop();\n            _this.renderTween = new TWEEN.Tween({x:fromScale})\n                .to({x:toScale}, duration)\n                .onUpdate(function(){\n                    _this.backdrop.setAttribute('opacity',this.x);\n                })\n                .onComplete(()=>{\n                    _this.isFrozen = isPaused;\n                    _this.isAnimatingBackground = false;\n                    if(_this.isFrozen){\n                        _this.pause();\n                    }else{\n                        this.backdrop.setAttribute('scale','0.000001 0.000001 0.000001');\n                    }\n                    // Stop changes\n                    Utils.stoppedChanging(this.backdrop.uuid);\n                    resolve();\n                })\n                .easing(TWEEN.Easing.Exponential.Out).start();\n        });\n    },\n    setupBackDrop(){\n        this.backdrop = document.createElement('a-plane');\n        this.backdrop.setAttribute('transparent',true);\n        this.backdrop.setAttribute('opacity',0.000001);\n        this.backdrop.setAttribute('color','#000');\n        this.backdrop.setAttribute('shader','flat');\n        this.backdrop.setAttribute('position',{x:0,y:0,z:-0.2});\n        this.backdrop.setAttribute('width',1);\n        this.backdrop.setAttribute('height',1);\n        this.backdrop.setAttribute('scale','0.000001 0.000001 0.000001');\n        this.el.appendChild(this.backdrop);\n    },\n    play(){\n        this.lastMouseMoveTime = 0;\n        // Register event listeners\n        // Mousedown and mouseup do not have the correct intersection point. Use last mouse move event if available instead.\n        // TODO: raise issue with aframe / submit PR;\n        this.click = e=>this.mouseEvent('click',this.lastMoveEvent||e);\n        this.mousedown = e=>this.mouseEvent('mousedown',this.lastMoveEvent||e);\n        this.mouseup = e=>this.mouseEvent('mouseup',this.lastMoveEvent||e);\n        this.mousewheel = e=>this.mouseEvent('ui-mousewheel',e.detail.evt);\n        this.mousemove = e=>{\n            // Save mousemove event for mousedown/mouseup events.\n            this.lastMoveEvent = e;\n            this.mouseEvent('ui-mousemove',e);\n        };\n        this.meshEl.addEventListener('mousedown',this.mousedown);\n        this.meshEl.addEventListener('mouseup',this.mouseup);\n        this.meshEl.addEventListener('click',this.click);\n        this.meshEl.addEventListener('ui-mousemove',this.mousemove);\n        this.meshEl.addEventListener('ui-mousewheel',this.mousewheel);\n    },\n    pause(){\n        this.meshEl.removeEventListener('mousedown',this.mousedown);\n        this.meshEl.removeEventListener('mouseup',this.mouseup);\n        this.meshEl.removeEventListener('click',this.click);\n        this.meshEl.removeEventListener('ui-mousemove',this.mousemove);\n        this.meshEl.removeEventListener('ui-mousewheel',this.mousewheel);\n    },\n    setupUIPanel(){\n        let uiPanel = document.createElement('a-plane');\n        uiPanel.setAttribute('position',this.data.panelPosition);\n        uiPanel.setAttribute('width',this.data.panelSize.x);\n        uiPanel.setAttribute('height',this.data.panelSize.y);\n        this.el.sceneEl.appendChild(uiPanel);\n        return uiPanel;\n    },\n\n    mouseEvent(type,e){\n        let mouse = {x:0,y:0};\n        if(e.detail&&e.detail.intersection){\n            let localPoint = this.meshEl.object3D.worldToLocal(e.detail.intersection.point.clone());\n\n            mouse = {\n                x:localPoint.x/this.meshEl.getAttribute('width')*2,\n                y:localPoint.y/this.meshEl.getAttribute('height')*2\n            };\n        }\n        if(type==='ui-mousewheel'&&(e.detail||(e.deltaX||e.deltaY))){\n            (mouse as any).deltaX = e.detail?e.detail.deltaX:e.deltaX;\n            (mouse as any).deltaY = e.detail?e.detail.deltaY:e.deltaY;\n        }\n        if(type==='mousedown'&&this.lookControlsEl&&this.lookControlsEl.components['look-controls']){\n            this.lookControlsEl.components[this.data.lookControlsComponent].pause();\n        }\n        if(type==='mouseup'&&this.lookControlsEl&&this.lookControlsEl.components['look-controls']){\n            this.lookControlsEl.components[this.data.lookControlsComponent].play();\n        }\n        // if(type===\"mousedown\"){\n        //     console.log(\"mousedown on menu/editor\",mouse);\n        // }\n        this.raycastIntersections(e,mouse,type);\n    },\n    raycastIntersections(e,mouse,type){\n        if(!this.camera||this.isFrozen||this.isAnimatingBackground)return;\n        //console.log(mouse);\n        this.raycaster.setFromCamera( mouse, this.camera );\n        // this.helper.setDirection(this.raycaster.ray.direction);\n        let intersections = this.raycaster.intersectObjects( this.el.object3D.children, true );\n        this.prevIntersectionEls = this.prevIntersectionEls||[];\n        let intersectionEls = new Array<Element>();\n        if(intersections.length&&this.data.debugRaycaster){\n            let intersectionPoint = intersections[0].point;\n            if(intersections[0].object===this.helper&&intersections.length>1){\n                intersectionPoint = intersections[1].point;\n            }\n            this.helper.position.copy(intersectionPoint);\n            this.helper.position.x-=0.03;\n        }\n        let defaultPrevented = false;\n        for(let i = 0;i < intersections.length; i++){\n            let intersection = intersections[i];\n            // Only emit events on objecst with an element attached\n            if(intersection.object.el&&intersection.object.el.classList.contains(this.data.intersectableClass)){\n                let currentEvent = {intersection:intersection,evt:e,preventDefault:()=>{defaultPrevented=true}};\n                // If this is the first time weve seen this element then emit the mouseenter event.\n                if(this.prevIntersectionEls.indexOf(intersection.object.el)===-1&&!defaultPrevented){\n                    intersection.object.el.emit('mouseenter',currentEvent);\n                }\n                // Emit the mouse event received\n                if(!defaultPrevented||type==='ui-mousewheel'){\n                    intersection.object.el.emit(type,currentEvent);\n                }\n                // Store the intersection on the element.\n                intersection.object.el.intersection = intersection;\n                // Add the current el to the list to check against previous intersection els.\n                intersectionEls.push(intersection.object.el);\n            }\n        }\n        // Find any intersections that have disappeared to emit the mouse leave event.\n        for(let i = 0;i < this.prevIntersectionEls.length; i++){\n            let intersectionEl = this.prevIntersectionEls[i];\n            if(intersectionEls.indexOf(intersectionEl)===-1){\n                intersectionEl.emit('mouseleave',{intersection:intersectionEl.intersection});\n            }\n        }\n        // Store the current intersected elements for the next iteration.\n        this.prevIntersectionEls = intersectionEls;\n    },\n    tick(delta){\n        if(this.isFrozen||this.stoppedRendering||!this.isReady)return;\n        if(delta-this.lastRenderTime<(1000/this.data.fps)&&this.isRendering)return;\n        this.el.object3D.traverse(child=>{\n            child.updateMatrixWorld();\n        });\n        let renderer = this.el.sceneEl.renderer;\n        let vrModeEnabled = renderer.vr.enabled;\n        renderer.vr.enabled = false;\n        renderer.render(this.el.object3D,this.camera,this.renderTarget);\n        renderer.vr.enabled = vrModeEnabled;\n        this.lastRenderTime = delta;\n        if(!this.isRendering){\n            this.stoppedRendering = true;\n        }\n    }\n});"],"sourceRoot":""}